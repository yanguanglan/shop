define("cBase",["libs"],function(e){function s(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}typeof console=="undefined"&&(console={log:function(){},error:function(){}});var t=function(){},n=[].slice,r=function(e,t,r){return r=r||[],function(){e.apply(t,r.concat(n.call(arguments)))}},i=function(e){return Object.prototype.toString.call(e)};location.host=="m.ctrip.com"&&(window.console.log=function(){}),t.Class=function(e,t){typeof e=="object"&&(t=e,e=function(){});var r=e.prototype,i=function(){},s=function(){this.__propertys__(),this.initialize.apply(this,arguments)},o,u,a,f,l;i.prototype=r,s.prototype=new i,s.prototype.constructor=e,a=s.prototype.initialize||function(){},f=t.initialize||function(){},o=s.prototype.__propertys__||function(){},u=t.__propertys__||function(){};var c=/^\s*function\s*\(([^\(\)]*?)\)\s*?\{/i.exec(f.toString())[1].replace(/\s/i,"").split(",");for(l in t)t.hasOwnProperty(l)&&(s.prototype[l]=t[l]);arguments.length>0&&arguments[0].prototype&&arguments[0].prototype.initialize===a&&(s.prototype.initialize=function(){var e=this,t=[function(){a.apply(e,arguments)}];f.apply(this,t.concat(n.call(arguments)))}),s.prototype.__propertys__=function(){o.call(this),u.call(this)};for(var l in e)e.hasOwnProperty(l)&&l!=="prototype"&&(s[l]=e[l]);return s},t.extend=function(){var e=n.call(arguments),t=e.shift()||{};if(!t)return!1;for(var r=0,i=e.length;r<i;r++)if(typeof e[r]=="object")for(var s in e[r])t[s]=e[r][s];return t},t.implement=function(e,t){if(typeof e!="function")return!1;for(var n in t)e.prototype[n]=t[n];return e},t.Type=function(e){return i(e)},function(e,n){for(var r=0;r<n.length;r++)e["is"+n[r]]=function(e){return function(n){return t.Type(n)==="[object "+e+"]"}}(n[r])}(t.Type,["Boolean","Object","String","Number","Date","Function","Array","Error","RegExp","Arguments"]),t.Object=new t.Class({}),t.extend(t.Object,{keys:function(e){var t=[];if(typeof Object.keys=="function")return Object.keys(e);if(e)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}}),t.Date=new t.Class({initialize:function(e){e=e||new Date,this.date=new Date(e)},addDay:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this},addMonth:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this},addHours:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this},addMinutes:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this},addSeconds:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this},addYear:function(e){return e=e||0,this.date.setYear(this.date.getFullYear()+e),this},setHours:function(){return this.date.setHours.apply(this.date,arguments),this},valueOf:function(){return this.date},getTime:function(){return this.date.valueOf()},toString:function(){return this.date.toString()},format:function(e){typeof e!="string"&&(e="");for(var t in this._MAPS)e=this._MAPS[t].call(this,e,this.date,t);return e},diffMonth:function(e){var n=parseInt(this.format("Y")),r=parseInt(this.format("n")),i=new t.Date(e),s=parseInt(i.format("Y")),o=parseInt(i.format("n"));return(s-n)*12+(o-r)},_DAY1:["鍛ㄦ棩","鍛ㄤ竴","鍛ㄤ簩","鍛ㄤ笁","鍛ㄥ洓","鍛ㄤ簲","鍛ㄥ叚"],_DAY2:["鏄熸湡澶�","鏄熸湡涓€","鏄熸湡浜�","鏄熸湡涓�","鏄熸湡鍥�","鏄熸湡浜�","鏄熸湡鍏�"],_MAPS:{d:function(e,t,n){var r=t.getDate().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},j:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getDate())},N:function(e,t,n){var r=t.getDay();return r==0&&(r=7),e.replace(new RegExp(n,"mg"),r)},w:function(e,t,n){var r=t.getDay(),i=this._DAY1[r];return e.replace(new RegExp(n,"mg"),i)},W:function(e,t,n){var r=t.getDay(),i=this._DAY2[r];return e.replace(new RegExp(n,"mg"),i)},m:function(e,t,n){var r=(t.getMonth()+1).toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},n:function(e,t,n){return e.replace(n,t.getMonth()+1)},Y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getFullYear())},y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getYear())},g:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),e.replace(new RegExp(n,"mg"),r)},G:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getHours())},h:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),r+="",r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},H:function(e,t,n){var r=t.getHours().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},i:function(e,t,n){var r=t.getMinutes().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},s:function(e,t,n){var r=t.getSeconds().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},I:function(e,t,n){var r=t.getMinutes().toString();return e.replace(new RegExp(n,"mg"),r)},S:function(e,t,n){var r=t.getSeconds().toString();return e.replace(new RegExp(n,"mg"),r)},D:function(e,n,r){var i=t.getServerDate();i.setHours(0,0,0,0),n=new Date(n.valueOf()),n.setHours(0,0,0,0);var s=864e5,o="",u=n-i;return u>=0&&(u<s?o="浠婂ぉ":u<2*s?o="鏄庡ぉ":u<3*s&&(o="鍚庡ぉ")),e.replace(new RegExp(r,"mg"),o)}}}),t.extend(t.Date,{parse:function(e,n){if(typeof e=="undefined")return new Date;if(typeof e=="string"){e=e||"";var r=/^(\d{4})\-?(\d{1,2})\-?(\d{1,2})/i;e.match(r)&&(e=e.replace(r,"$2/$3/$1"));var i=Date.parse(e),s=new Date(i||new Date);return n?s:new t.Date(s)}return typeof e=="number"?new Date(e):new Date},getHM:function(e){var t=this._getDate(e),n=t.getHours(),r=t.getMinutes();return(n<10?"0"+n:""+n)+":"+(r<10?"0"+r:""+r)},getIntervalDay:function(e,t){var n=this._getDate(e),r=this._getDate(t);return n.setHours(0,0,0,0),r.setHours(0,0,0,0),parseInt((r-n)/864e5)},m2H:function(e){var t=Math.floor(e/60),n=e%60;return(t>0?t+"灏忔椂":"")+(n>0?n+"鍒嗛挓":"")},_getDate:function(e){var n=t.Date.parse(e,!0),r=new Date;return r.setTime(n),r},format:function(e,n){return(new t.Date(e)).format(n)},weekday:function(e){var t=["鍛ㄦ棩","鍛ㄤ竴","鍛ㄤ簩","鍛ㄤ笁","鍛ㄥ洓","鍛ㄤ簲","鍛ㄥ叚"],n=new Date(e);return t[n.getDay()]},diffMonth:function(e,n){var e=new t.Date(e);return e.diffMonth(n)}}),t.Hash=new t.Class({__propertys__:function(){this.keys=[],this.values=[]},initialize:function(e){typeof e=="object"&&(e={});for(var t in e)e.hasOwnProperty(t)&&(this.keys.push(t),this.values.push(e[t]))},length:function(){return this.keys.length},getItem:function(e){var t=s(e,this.keys);return t<0?null:this.values[t]},getKey:function(e){return this.keys[e]},index:function(e){return this.values[e]},add:function(e,t){return this.push(e,t)},del:function(e){var t=s(e,this.keys);return t<0?this:(this.keys.splice(t,1),this.values.splice(t,1),this)},delByIndex:function(e){return e<0?this:(this.keys.splice(e,1),this.values.splice(e,1),this)},pop:function(){return this.keys.length?(this.keys.pop(),this.values.pop()):null},push:function(e,t,n){if(typeof e=="object"&&!t)for(var r in e)e.hasOwnProperty(r)&&this.push(r,e[r],n);else{var i=s(e,this.keys);i<0||n?(n&&this.del(e),this.keys.push(e),this.values.push(t)):this.values[i]=t}return this},indexOf:function(e){var t=s(e,this.values);return t>=0?this.keys[t]:-1},shift:function(){return this.keys.length?(this.keys.shift(),this.values.shift()):null},unshift:function(e,t,n){if(Ext.isObject(e)&&!t)for(var r in e)e.hasOwnProperty(r)&&this.unshift(r,e[r]);else{var i=s(e,this.keys);i<0||n?(n&&this.del(e),this.keys.unshift(e),this.values.unshift(t)):this.values[r]=t}return this},slice:function(e,t){var n=this.keys.slice(e,t||null),r=this.values.slice(e,t||null),i={};for(var s=0,o=n.length;s<o;s++)i[n[s]]=r[s];return i},splice:function(e,t){var n=this.keys.splice(e,t||null),r=this.values.splice(e,t||null),i={};for(var s=0,o=n.length;s<o;s++)i[n[s]]=r[s];return i},toString:function(){return typeof JSON!="undefined"&&JSON.stringify?JSON.stringify(this.valueOf()):typeof this.values},filter:function(e){var t={};if(typeof e!="function")return null;for(var n=0,r=this.keys.length;n<r;n++)e.call(this.values[n],this.values[n],this.keys[n])&&(t[this.keys[n]]=this.values[n]);return t},each:function(e){var t={};if(typeof e!="function")return null;for(var n=0,r=this.keys.length;n<r;n++)e.call(this.values[n],this.values[n],this.keys[n],n)},valueOf:function(){var e={};for(var t=0,n=this.keys.length;t<n;t++)e[this.keys[t]]=this.values[t];return e},sortBy:function(e){var t=_.sortBy(this.values,e),n=[];for(var r=0;r<t.length;r++){var i=this.indexOf(t[r]);n[r]=i}this.values=t,this.keys=n}}),t.getInstance=function(){return this.instance?this.instance:this.instance=new this},t.console={ENUM_LEVEL_LOG:1,ENUM_LEVEL_ERROR:4,ENUM_LEVEL_ALL:5,level:null,log:function(){this.level&this.ENUM_LEVEL_LOG&&console.log.apply(console,arguments)},error:function(){this.level&this.ENUM_LEVEL_ERROR&&console.error.apply(console,arguments)}},t.console.level=t.console.ENUM_LEVEL_ALL,window.__at=function(){var e=JSON.stringify(arguments);alert(e)};var o=function(){var e=window.localStorage.getItem("isInApp");if(e)return e=="1"?!0:!1;var t=window.localStorage.getItem("ISINAPP");if(t)return t=="1"?!0:!1};return t.isInApp=o,t.getServerDate=function(e){if(!o()){if(location.pathname.match(/^\/?html5/i))return e&&e(new Date),new Date;if(typeof __SERVERDATE__=="undefined"||!__SERVERDATE__.server)return e&&e(new Date),new Date;var n=new Date(__SERVERDATE__.server.valueOf()+((new Date).valueOf()-__SERVERDATE__.local.valueOf()));return e&&e(n),n}var t=window.localStorage.getItem("SERVERDATE");if(!t)return e&&e(new Date),new Date;try{t=JSON.parse(t);if(t&&t.server&&t.local){var n=window.parseInt(t.server),r=window.parseInt(t.local),i=(new Date).getTime(),s=new Date(n+i-r);return e&&e(s),s}return e&&e(new Date),new Date}catch(u){return e&&e(new Date),new Date}},t}),define("cUIBase",[],function(){var e={};return e.config={prefix:"cui-"},e.setConfig=function(t,n){e.config[t]=n},e.getElementPos=function(e){var t=0,n=0;do t+=e.offsetTop,n+=e.offsetLeft;while(e=e.offsetParent);return{top:t,left:n}},e.getCreateId=function(){var t=(new Date).getTime();return function(){return e.config.prefix+ ++t}}(),e.getBiggerzIndex=function(){var e=parseInt(Math.random()*1e4+1e3);return function(){return++e}}(),e.getCurStyleOfEl=function(e,t){if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(e).getPropertyValue(t);if(e.currentStyle){var n=t.split("-"),r=[],i;for(var s=0;s<n.length;s++)s==0?r.push(n[s]):(i=n[s].split(""),i[0]=i[0].toUpperCase(),r.push(i.join("")));return r=r.join(""),e.currentStyle[r]}},e.bindthis=function(e,t){return function(){e.apply(t,arguments)}},e.strToNum=function(e){var t=parseInt(e.replace(/[a-z]/i,""));return isNaN(t)?0:t},e.getElementRealSize=function(e){var t=$(e);return{width:t.width(),height:t.height()}},e.getPageSize=function(){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:e,height:t}},e.getPageScrollPos=function(){var e=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),t=Math.max(document.documentElement.scrollTop,document.body.scrollTop),n=Math.min(document.documentElement.clientHeight,document.body.clientHeight),r=Math.min(document.documentElement.clientWidth,document.body.clientWidth),i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),s=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{top:t,left:e,height:n,width:r,pageWidth:i,pageHeight:s}},e.getMousePos=function(e){var t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);return{top:t+e.clientY,left:n+e.clientX}},e.getMousePosOfElement=function(e,t){var n=getMousePos(e),r=getElementPos(t),i=t.clientWidth,s=t.clientHeight,o=n.left-r.left,u=n.top-r.top;return o=o<0?0:o>i?i:o,u=u<0?0:u>s?s:u,{x:o,y:u}},e.createElement=function(e,t){var n=document.createElement(e),r,i;if(t)for(r in t)switch(r){case"attr":if(typeof t[r]=="object")for(i in t[r])t[r][i]!=null&&n.setAttribute(i,t[r][i]);break;case"styles":if(typeof t[r]=="object")for(i in t[r])t[r][i]!=null&&(n.style[i]=t[r][i]);break;case"id":n.id=t[r];break;case"class":n.className=t[r];break;case"html":n.innerHTML=t[r]}return n},e}),define("cHistory",["cBase","cUIBase","libs"],function(e,t,n){var r=function(e){this.element,this.clazz=[t.config.prefix+"history"],this.maskName="maskName",this.style={},this.size=!1,this.listSize=6,this.itemClickFun=null,this.focusFun=null,this.blursFun=null,this.inputFun=null,this._id=t.getCreateId(),this._boxDom,this._borderDom,this._contDom,this._clearButton,this.clearButtonTitle="娓呴櫎鎼滅储鍘嗗彶",this.notHistoryButtonTitle="鏃犳悳绱㈠巻鍙�",this.historyStore=null,this.dataSource=[],this._autoLocResoure,this._bodyDom,this.rootBox,this._oneShow=!1;var n=this;this.event_focus=function(){n.Open(),typeof n.focusFun=="function"&&n.focusFun()},this.event_blur=function(){typeof n.blurFun=="function"&&n.blurFun()},this.event_input=function(){n.element.val()==""&&(n._init(),n.Open()),n.inputFun(n.element.val())},this._setOption(e),this._init()};return r.prototype={_setOption:function(e){for(var t in e)switch(t){case"element":case"maskName":case"clearButtonTitle":case"style":case"dataSource":case"historyStore":case"itmeClickFun":case"focusFun":case"blurFun":case"inputFun":case"size":case"listSize":case"rootBox":this[t]=e[t];break;case"clazz":isArray(e[t])&&(this.clazz=this.clazz.concat(e[t])),isString(e[t])&&this.clazz.push(e[t])}},_init:function(){this._contDom&&(this._contDom.find("li.item").unbind("click"),this._contDom.remove()),this._boxDom&&this._boxDom.remove(),this._CreateDom(),this._BuildEvent()},_CreateDom:function(){var e=t.createElement;this._bodyDom=this.rootBox||$("body"),this.element=$(this.element),this._boxDom=$(e("div",{id:this._id,"class":this.clazz.join(" ")})),this._boxDom.css({position:"absolute",display:"none"}),this._borderDom=$(e("div",{"class":t.config.prefix+"history-border"}));var n=[];this.element.val()==""?n=this._getHistory():n=this._getSubList(this.dataSource,this.listSize),this._contDom=$(e("ul",{"class":t.config.prefix+"history-list"}));for(var r in n)this._contDom.append('<li class="item" data_id="'+n[r].id+'">'+n[r].name+"</li>");this.element.val()==""&&(this._clearButton=$(e("li",{"class":[t.config.prefix+"clear-history clearbutton"]})),n.length>0?this._clearButton.html(this.clearButtonTitle):this._clearButton.html(this.notHistoryButtonTitle),this._contDom.append(this._clearButton)),this._borderDom.append(this._contDom),this._boxDom.append(this._borderDom),this._bodyDom.append(this._boxDom)},_Location:function(){this._boxDom.css({height:"auto",width:"auto"});var e=t.getPageSize(),n=t.getElementPos(this.element[0]),r=this.style.left?this.style.left:(this.size&&this.size.left?this.size.left+n.left:n.left)+"px",i=this.style.top?this.style.top:(this.size&&this.size.top?this.size.top+(n.top+this.element.height()):n.top+this.element.height())+"px",s=this.style.width?this.style.width:this.element.width()+"px",o=this.size&&this.size.height?e.height+this.size.height+"px":"auto";this._boxDom.css({left:r,top:i,width:s,height:o})},_AutoLocation:function(){this._Location();var e=this;this._autoLocResoure=function(){e._Location()},$(window).unbind("resize",this._autoLocResoure),$(window).bind("resize",this._autoLocResoure)},_UnAutoLocation:function(){$(window).unbind("resize",this._autoLocResoure)},_BuildEvent:function(){var e=this;this._contDom.find("li.item").unbind("click").bind("click",function(){var t=$(this);e.element.val(t.text()),e.Close();if(typeof e.itmeClickFun=="function"){var n={id:t.attr("data_id"),name:t.text()};e.itmeClickFun(n)}}),this.element.unbind("focus",this.event_focus),this.element.unbind("blur",this.event_blur),this.element.unbind("input",this.event_input),this.element.bind({focus:this.event_focus,blur:this.event_blur,input:this.event_input}),this.element.val()==""&&this._getHistory().length>0&&this._clearButton.bind("click",function(){e.historyStore.remove(),e.Close(),e._init()})},setOpen:function(){this._oneShow=!0},Open:function(){this._boxDom.css("z-index",t.getBiggerzIndex()),this._boxDom.show(),this._AutoLocation()},Close:function(){this._boxDom.hide(),this._UnAutoLocation()},setDataSource:function(e){this.dataSource=e,this.Close(),this._init(),this.Open()},addHistory:function(e){var t=this.historyStore.get()||[];e.id||(e.id=0);var n=-1;for(var r=0,i=t.length;r<i;r++)if(t[r].name==e.name){n=r;break}n>-1&&t.splice(n,1),t.unshift(e),this.historyStore.set(t),this._init()},reset:function(){this._init()},_getHistory:function(){var e=this.historyStore.get()||[];return this._getSubList(e,this.listSize)},_getSubList:function(e,t){var n=e.length;return n<=t?e:e.slice(0,t)}},r}),define("cUIAbstractView",["libs","cBase","cUIBase"],function(e,t,n){var r=Array.prototype.slice,i=Array.prototype.push,s=Object.prototype.toString,o="notCreate",u="onCreate",a="onShow",f="onHide",l={};return l.__propertys__=function(){this.allowEvents={onCreate:!0,onShow:!0,onHide:!0},this.allowsPush={classNames:!0},this.allowsConfig={rootBox:!0},this.events={onCreate:[],onShow:[],onHide:[]},this.status=o,this.setOptionHander=[],this.rootBox,this.id=n.getCreateId(),this.classNames=[n.config.prefix+"view"],this.root,this.isCreate=!1},l.initialize=function(e){this.setOption(function(e,t){switch(!0){case this.allowEvents[e]:this.addEvent(e,t);break;case this.allowsPush[e]:s.call(t)==="[object Array]"?i.apply(this[e],t):this[e].push(t);break;case this.allowsConfig[e]:this[e]=t}}),this.readOption(e)},l.readOption=function(e){e=e||{};var t=this;$.each(e,function(e,n){$.each(t.setOptionHander,function(r,i){typeof i=="function"&&i.call(t,e,n)})})},l.setOption=function(e){this.setOptionHander.push(e)},l.createRoot=function(){var e=document.createElement("div");return e.className=this.classNames.join(" "),e.id=this.id,$(e)},l.addClass=function(e){this.classNames.push(e);if(!this.root)return;if(typeof e=="array")for(var t in e)this.root.addClass(e[t]);else typeof e=="string"&&this.root.addClass(e)},l.removeClass=function(e){if(typeof e=="array")for(var t in e)this.root.removeClass(e[t]);else typeof e=="string"&&this.root.removeClass(e)},l.createHtml=function(){throw new Error("鏈畾涔塩reateHtml鏂规硶")},l.setRootHtml=function(e){this.root&&(this.root.empty(),this.root.append(e))},l.getRoot=function(){return this.root},l.addEventType=function(e){this.allowEvents[e]=!0,this.events[e]=[]},l.addEvent=function(e,t){if(!this.allowEvents[e])return!1;this.events[e]&&this.events[e].push(t)},l.removeEvent=function(e,t){this.events[e]&&(t?deleleValue(t,this.events[e]):this.events[e]=[])},l.remove=function(){this.hide(),this.root.remove()},l.trigger=function(e,t){var n=[],r;if(this.events[e]){t=t||[];for(r=0;r<this.events[e].length;r++)n[n.length]=this.events[e][r].apply(this,t)}return n},l.create=function(){!this.isCreate&&this.status!==u&&(this.rootBox=this.rootBox||$("body"),this.root=this.createRoot(),this.root.hide(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.trigger("onCreate"),this.status=u,this.isCreate=!0)},l.template=function(e){return _.template(e)},l.showAction=function(e){this.root.show(),typeof e=="function"&&e()},l.hideAction=function(e){this.root.hide(),typeof e=="function"&&e()},l.setzIndexTop=function(e){e=typeof e!="number"?0:e,this.root.css("z-index",n.getBiggerzIndex()+e)},l.isNotCreate=function(){return this.status===o},l.isShow=function(){return this.status===a},l.isHide=function(){return this.status===f},l.show=function(e){if(this.status===a)return;this.create(),this.showAction($.proxy(function(){this.trigger("onShow"),this.status=a,e&&e.call(this)},this))},l.hide=function(e){if(!this.root||this.status===f)return;this.hideAction($.proxy(function(){this.trigger("onHide"),this.status=f,e&&e.call(this)},this))},l.reposition=function(){this.root.css({"margin-left":-($(this.root).width()/2)+"px","margin-top":-($(this.root).height()/2)+"px"})},new t.Class(l)}),define("cUIMask",["libs","cBase","cUIAbstractView"],function(e,t,n){var r={},i={prefix:"cui-"};return r.__propertys__=function(){},r.initialize=function(e,t){this.bindEvent(),this.addClass(i.prefix+"mask"),e(t)},r.bindEvent=function(){this.addEvent("onCreate",function(){this.setRootStyle(),this.onResize=$.proxy(function(){this.resize()},this),this.onResize()}),this.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onResize()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.onResize),this.root.unbind("touchmove")})},r.setRootStyle=function(){this.root.css({position:"absolute",left:"0px",top:"0px"})},r.createHtml=function(){return"<div></div>"},r.resize=function(){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);this.root.css({width:"100%",height:t+"px"})},new t.Class(n,r)}),define("cUILayer",["libs","cBase","cUIAbstractView","cUIMask"],function(e,t,n,r){var i={},s={prefix:"cui-"};return i.__propertys__=function(){this.tpl=this.template(['<div class="'+s.prefix+'layer-padding">','<div class="'+s.prefix+'layer-content"><%=content%></div>',"</div>"].join("")),this.content="",this.contentDom,this.mask=new r({classNames:[s.prefix+"opacitymask"]}),this.addClass(s.prefix+"layer"),this.viewdata={},this.windowResizeHander,this.setIntervalResource,this.setIntervalTotal=0},i.initialize=function(e,t){var n={content:!0};this.setOption(function(e,t){switch(!0){case n[e]:this[e]=t;break;case"class"===e:this.addClass(t)}}),this.bindEvent(),e(t),this.loadViewData()},i.loadViewData=function(){this.viewdata.content=this.content},i.setViewData=function(e){this.viewdata=cUtility.mix(this.viewdata,e),this.setRootHtml(this.createHtml())},i.bindEvent=function(){this.addEvent("onCreate",function(){this.windowResizeHander=$.proxy(this.reposition,this),this.contentDom=this.root.find("."+s.prefix+"layer-content")}),this.addEvent("onShow",function(){this.mask.show(),$(window).bind("resize",this.windowResizeHander),this.root.css("visibility","hidden"),this.reposition(),this.setIntervalResource=setInterval($.proxy(function(){this.setIntervalTotal<10?this.windowResizeHander():(this.setIntervalTotal=0,this.root.css("visibility","visible"),clearInterval(this.setIntervalResource)),this.setIntervalTotal++},this),1),this.setzIndexTop()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.windowResizeHander),clearInterval(this.setIntervalResource),this.root.css("visibility","visible"),this.mask.hide()})},i.createHtml=function(){return this.tpl(this.viewdata)},i.maskToHide=function(e){this.mask.root.on("click",$.proxy(function(){this.hide(),typeof e=="function"&&e(),this.mask.root.off("click")},this)),this.mask.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},new t.Class(n,i)}),define("cUIAlert",["libs","cBase","cUILayer"],function(e,t,n){var r=Object.prototype.toString,i="confirm",s="cancel",o={};o.onCreate=function(){this.loadButtons()};var u={},a={prefix:"cui-"};u.__propertys__=function(){this.tpl=this.template(['<div class="cui-pop-box">','<div class="cui-bd">','<p class="cui-error-tips"><%=message%></p>','<div class="cui-roller-btns">',"</div>","</div>","</div>"].join("")),this.title="",this.message="",this.buttons=[{text:"纭畾",type:"confirm",click:function(){this.hide()}}],this.viewdata={title:"",message:""}},u.initialize=function(e,t){var n={title:!0,message:!0,buttons:!0};this.setOption(function(e,t){switch(!0){case n[e]:this[e]=t}}),this.addClass(a.prefix+"alert"),e($.extend(o,t)),this.buildViewData()},u.buildViewData=function(){this.viewdata.title=this.title,this.viewdata.message=this.message},u.setViewData=function(e){e.title&&(this.title=e.title),e.message&&(this.message=e.message),e.buttons&&(this.buttons=e.buttons),this.buildViewData(),this.setRootHtml(this.createHtml()),this.loadButtons()},u.loadButtons=function(){this.root||this.create();var e=this.root.find(".cui-roller-btns"),t=this.createButtons();e.empty(),$.each(t,function(t,n){e.append(n)})},u.createButtons=function(){var e=[],t=r.call(this.buttons)==="[object Array]",n=0,o=this;return $.each(this.buttons,function(r,u){var a="",f=[],l=function(){};if(t){a=u.text,u.cls&&f.push(u.cls),u.type=u.type?u.type:a=="鍙栨秷"?s:i;switch(u.type){case s:f.push("cui-btns-cancel");break;case i:f.push("cui-btns-sure")}u.click&&(l=u.click)}else a=r,typeof u=="function"&&(l=u);e[n]=$('<div class="cui-flexbd '+f.join(" ")+'">'+a+"</div>"),e[n].addClass(f.join(" ")),e[n].bind("click",$.proxy(l,o)),n++}),e},u.createHtml=function(){return this.tpl(this.viewdata)};var f=new t.Class(n,u);return f.STYLE_CONFIRM=i,f.STYLE_CANCEL=s,f}),define("cUIWarning",["libs","cBase","cUILayer","cUIMask"],function(e,t,n,r){var i={},s={prefix:"cui-"},o=new r({classNames:[s.prefix+"warning-mask"]}),u=function(){},a={};return a.class=s.prefix+"warning",a.onCreate=function(){this.contentDom.html('<div class="'+s.prefix+'warning"><div class="blank"></div><p class="blanktxt">'+this.warningtitle+"</p></div>"),this.warningDom=this.contentDom.find(".blanktxt"),this.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this)),o.create(),o.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},a.onShow=function(){o.show()},a.onHide=function(){o.hide()},a.setTitle=function(e,t){e&&(this.create(),this.warningDom.html(e),this.warningtitle=e),t?this.callback=t:this.callback=function(){}},a.getTitle=function(){return this.warningtitle},i.__propertys__=function(){this.warningDom,this.warningtitle="",this.callback=function(){}},i.initialize=function(e,t){this.setOption(function(e,t){switch(e){case"title":this.warningtitle=t}}),e($.extend(a,t))},new t.Class(n,i)}),define("cUIHashObserve",["libs","cBase","cUIAbstractView"],function(e,t){var n={},r={prefix:"cui-"};return n.__propertys__=function(){this.hash,this.callback,this._hashchange=$.proxy(function(){this.hashchange()},this),this.isend=!0,this.scope},n.initialize=function(e){this.setOption(e)},n.setOption=function(e){var t={hash:!0,callback:!0,scope:!0};for(var n in e)switch(!0){case t[n]:this[n]=e[n]}},n.start=function(){this.isend=!1,window.location.hash+="|"+this.hash,$(window).bind("hashchange",this._hashchange)},n.end=function(){$(window).unbind("hashchange",this._hashchange),this.isend||(this.isend=!0,window.history.go(-1))},n.hashchange=function(){var e=window.location.hash;e.match(new RegExp("\\b"+this.hash+"\\b","ig"))||(this.isend=!0,this.callback.call(this.scope||this),this.end())},new t.Class(n)}),define("cUIPageview",["libs","cBase","cUIAbstractView","cUIMask","cUIHashObserve"],function(e,t,n,r,i){var s={},o={prefix:"cui-"};return s.__propertys__=function(){this.mask=new r({classNames:[o.prefix+"warning-mask"]}),this.hashObserve=new i({hash:this.id,scope:this,callback:function(){this.hide()}})},s.initialize=function(e,t){this.addClass(o.prefix+"pageview"),this.addEvent("onCreate",function(){this.mask.create(),this.mask.root.css({background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAPX19QAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==) repeat"}),this.root.css({position:"absolute",left:"0px",top:"0px"})}),this.addEvent("onShow",function(){this.mask.show(),this.mask.root.css({"z-index":"500"}),this.hashObserve.start(),this.root.bind("touchmove",function(e){e.preventDefault()})}),this.addEvent("onHide",function(){this.mask.hide(),setTimeout($.proxy(function(){this.hashObserve.end()},this),10)}),e(t)},s.createHtml=function(){return""},new t.Class(n,s)}),define("cUIHeadWarning",["libs","cBase","cUIPageview"],function(e,t,n){var r={},i={prefix:"cui-"},s={};return s.class=i.prefix+"warning",s.onCreate=function(){this.root.html(['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-header">','<div class="head-warning-header-backbtu"><span class="returnico"></span></div>','<div class="head-warning-header-title"></div>',"</div>",'<div class="head-warning-content">','<div class="head-warning-content-icon"><div class="cui-load-error"><div class="i cui-wifi cui-exclam"></div></div></div>','<div class="head-warning-content-title"></div>',"</div>","</div>","</div>"].join("")),this.addClass("head-warning-top"),this.warningtitleDom=this.root.find(".head-warning-header-title"),this.warningcontentDom=this.root.find(".head-warning-content-title"),this.warningleftbtuDom=this.root.find(".head-warning-header-backbtu"),this.warningleftbtuDom.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},s.onShow=function(){this.setzIndexTop(),window.scrollTo(0,0)},r.__propertys__=function(){this.warningtitleDom,this.warningcontentDom,this.warningtitle="",this.warningcontent="",this.callback=function(){}},r.initialize=function(e,t){e($.extend(s,t))},r.setTitle=function(e,t,n){e&&(this.create(),this.warningtitleDom.html(e),this.warningcontentDom.html(t)),n&&(this.callback=n)},new t.Class(n,r)}),define("cWidgetFactory",["libs"],function(e){var t=t||{};return t.products={},t.hasWidget=function(e){return!!t.products[e]},t.register=function(e){if(!(e&&e.name&&e.fn))throw"WidgetFactory: widget is lack of necessary infomation.";if(t.products[e.name])throw"WidgetFactory: widget has been register in WidgetFactory";t.products[e.name]=e.fn},t.create=function(e){return t.products[e]},t}),define("cStorage",["cBase"],function(e){var t=window.JSON,n=e.Date,r=function(){function e(e,t,n,r,i){return{value:e,oldvalue:i||{},timeout:t,tag:n,savedate:r}}function r(e){this.proxy=e}return r.prototype={constructor:r,set:function(r,i,s,o,u,a){u=u||(new n).format("Y/m/d H:i:s"),s=s?new n(s):(new n).addDay(30);var f=e(i,s.format("Y/m/d H:i:s"),o,u,a);try{return this.proxy.setItem(r,t.stringify(f)),!0}catch(l){console&&0}return!1},get:function(e,r,i){var s,o=null;try{s=this.proxy.getItem(e),s&&(s=t.parse(s),n.parse(s.timeout,!0)>=new Date&&(r?r===s.tag&&(o=i?s.oldvalue:s.value):o=i?s.oldvalue:s.value))}catch(u){console&&0}return o},getTag:function(e){var n,r=null,i=null;try{n=this.proxy.getItem(e),n&&(n=t.parse(n),i=n&&n.tag)}catch(s){console&&0}return i},getSaveDate:function(e,r){var i,s=null;try{i=this.proxy.getItem(e),i&&(i=t.parse(i),i.savedate&&(s=n.parse(i.savedate),r||(s=s.valueOf())))}catch(o){console&&0}return s},getExpireTime:function(e){var n=null,r=null;try{n=this.proxy.getItem(e),n&&(n=t.parse(n),r=Date.parse(n.timeout))}catch(i){console&&0}return r},remove:function(e){return this.proxy.removeItem(e)},getAll:function(){var e=this.proxy.length,t=[];for(var n=0;n<e;n++){var r=this.proxy.key(n),i={key:r,value:this.get(r)};t.push(i)}return t},clear:function(){this.proxy.clear()}},{localStorage:new r(window.localStorage),sessionStorage:new r(window.sessionStorage)}}();return r.localStorage.oldGet=function(t){var n=localStorage.getItem(t),r=n?JSON.parse(n):null;if(r&&r.timeout){var i=new Date,s=e.Date.parse(r.timeout).valueOf();if(r.timeby){if(s-i>=0)return r}else if(s-e.Date.parse(e.Date.format(i,"Y-m-d")).valueOf()>=0)return r;return localStorage.removeItem(t),null}return r},r.localStorage.oldSet=function(e,t){localStorage.setItem(e,t)},r.localStorage.getExpireTime=function(t){var n=localStorage.getItem(t),r=n?JSON.parse(n):null;return r&&r.timeout?r.timeout:(new e.Date(e.getServerDate())).addDay(2).format("Y-m-d")},r.localStorage.oldRemove=function(e){localStorage.removeItem(e)},r}),define("cUtility",["libs","cBase","cStorage"],function(e,t,n){var r={},i=Array.prototype.slice,s=Array.prototype.push,o=function(e){return Object.prototype.toString.call(e)},u=t.Date,a=n.localStorage;return r.JsonArrayToObject=function(e){if(!e)return[];var t=e.shift(),n=[],i;for(var s=0,u=e.length;s<u;s++){i={};for(var a=0,f=e[s].length;a<f;a++)switch(o(e[s][a])){case"[object Array]":i[t[a]]=r.JsonArrayToObject(e[s][a]);break;default:i[t[a]]=e[s][a]}n.push(i)}return n},r.mix=function(e,t,n){e=e||{},t=t||{};for(var r in t)t.hasOwnProperty(r)&&(n?t[r]!==null&&(e[r]=t[r]):e[r]=t[r]);return e},r.indexOf=function(e,t){var n=-1,r;if(t.indexOf&&!1)n=t.indexOf(e);else for(r=0;r<t.length;r++)if(t[r]===e){n=r;break}return n},r.each=function(e,t,n){e=e||{},t=t||function(){};var r=Object.prototype.toString.call(e),i;if(r==="[object Array]")for(i=0;i<e.length;i++)t.call(n||e[i],i,e[i]);else if(r==="[object Object]")for(i in e)e.hasOwnProperty(i)&&t.call(n||e[i],i,e[i])},r.grep=function(e,t,n){var r;e=e||{},t=t||function(){};var i=Object.prototype.toString.call(e),s;if(i==="[object Array]"){r=[];for(s=0;s<e.length;s++)t(e[s],s)&&r.push(e[s])}else if(i==="[object Object]"){n?r=[]:r={};for(s in e)e.hasOwnProperty(s)&&t(e[s],s)&&(n?r.push(e[s]):r[s]=e[s])}return r},r.deleteValue=function(e,t){var n=r.indexOf(e,t);return n>-1?t.splice(n,1):null},r.getGuid=function(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}function t(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var n=localStorage.GUID||"";return n||(n=t(),localStorage.GUID=n),n},r.trim=function(){return function(e){return e.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")}},r.stripTags=function(e){return(e||"").replace(/<[^>]+>/g,"")},r.jsonToQuery=function(){var e=function(e,t){return e=e==null?"":e,e=r.trim(e.toString()),t?encodeURIComponent(e):e};return function(t,n){var r=[];if(typeof t=="object")for(var i in t)if(t[i]instanceof Array)for(var s=0,o=t[i].length;s<o;s++)r.push(i+"="+e(t[i][s],n));else typeof t[i]!="function"&&r.push(i+"="+e(t[i],n));return r.length?r.join("&"):""}}(),r.queryToJson=function(){function e(e){return Object.prototype.toString.call(e)==="[object Array]"}return function(t,n){var i=r.trim(t).split("&"),s={},o=function(e){return n?decodeURIComponent(e):e};for(var u=0,a=i.length;u<a;u++)i[u]&&(_hsh=i[u].split("="),_key=_hsh[0],_value=_hsh[1],_hsh.length<2&&(_value=_key,_key="$nullName"),s[_key]?(e(s[_key])!=1&&(s[_key]=[s[_key]]),s[_key].push(o(_value))):s[_key]=o(_value));return s}}(),r.validate=function(){var e=function(){};$.each("String Function Boolean RegExp Number Date Object Null Undefined".split(" "),function(t,n){var r;switch(n){case"Null":r=function(e){return e===null};break;case"Undefined":r=function(e){return e===undefined};break;default:r=function(e){return(new RegExp(n+"]","i")).test(o(e))}}e["is"+n]=r});var t={Email:/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,Qq:/^[1-9]\d{4,}$/,Phone:/^[0-9]{3,4}-[0-9]{7,8}$/,Url:/^http(s)?:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/,Mobile:/^1\d{10}/,Postcode:/^\d{6}$/,IP:function(t){if(!t||e.isNull(t))return!1;var n=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return n.test(t)&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256?!0:!1},EmptyObject:function(e){for(var t in e)return!1;return!0},IdCard:function(e){var t={11:"鍖椾含",12:"澶╂触",13:"娌冲寳",14:"灞辫タ",15:"鍐呰挋鍙�",21:"杈藉畞",22:"鍚夋灄",23:"榛戦緳姹�",31:"涓婃捣",32:"姹熻嫃",33:"娴欐睙",34:"瀹夊窘",35:"绂忓缓",36:"姹熻タ",37:"灞变笢",41:"娌冲崡",42:"婀栧寳",43:"婀栧崡",44:"骞夸笢",45:"骞胯タ",46:"娴峰崡",50:"閲嶅簡",51:"鍥涘窛",52:"璐靛窞",53:"浜戝崡",54:"瑗胯棌",61:"闄曡タ",62:"鐢樿們",63:"闈掓捣",64:"瀹佸",65:"xinjiang",71:"鍙版咕",81:"棣欐腐",82:"婢抽棬",91:"鍥藉"},e,n,r,i,s,o=new Array;o=e.split("");if(t[parseInt(e.substr(0,2))]==null)return!1;switch(e.length){case 18:return parseInt(e.substr(6,4))%4==0||parseInt(e.substr(6,4))%100==0&&parseInt(e.substr(6,4))%4==0?ereg=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:ereg=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/,ereg.test(e)?(i=(parseInt(o[0])+parseInt(o[10]))*7+(parseInt(o[1])+parseInt(o[11]))*9+(parseInt(o[2])+parseInt(o[12]))*10+(parseInt(o[3])+parseInt(o[13]))*5+(parseInt(o[4])+parseInt(o[14]))*8+(parseInt(o[5])+parseInt(o[15]))*4+(parseInt(o[6])+parseInt(o[16]))*2+parseInt(o[7])*1+parseInt(o[8])*6+parseInt(o[9])*3,n=i%11,s="F",r="10X98765432",s=r.substr(n,1),s.toUpperCase()==o[17].toUpperCase()?!0:!1):!1;default:return!1}},CharsLenWithinRange:function(t,n){if(!e.isString(t))return!1;var r=t.match(/\W/g),i=r==null?t.length:t.length+r.length;return isValidate=i>=0&&i<=n,isValidate?(this.cutLen=t.length,!0):!1},ContactName:function(n){return e.isString(n)?t.CharsLenWithinRange.call(this,n,26):!1},BookPS:function(n){return e.isString(n)?t.CharsLenWithinRange.call(this,n,100):!1},InvTitle:function(n){return e.isString(n)?t.CharsLenWithinRange.call(this,n,100):!1},BoardTitle:function(n){return e.isString(n)?t.CharsLenWithinRange.call(this,n,40):!1},AreaTitle:function(n){return e.isString(n)?t.CharsLenWithinRange.call(this,n,80):!1},MobileNumber:function(t){if(!e.isString(t))return!1;var n=11;return t.length==n&&/^(\d| )+$/g.test(t)},FlightNumber:function(t){if(!e.isString(t))return!1;var n=3,r=7;return t.length>=n&&t.length<=r&&/^(\d|\w)+$/g.test(t)}};return $.each(t,function(t,n){e["is"+t]=function(t){return!t||e.isNull(t)||e.isNull(n)?!1:e.isFunction(n)?n.call(this,t):e.isRegExp(n)?n.test(t):!1}}),e}(),r.cookie=function(){var e={};return e.getCookie=function(e){e=e.replace(/([\.\[\]\$])/g,"\\$1");var t=new RegExp(e+"=([^;]*)?;","i"),n=document.cookie+";",r=n.match(t);return r?unescape(r[1])||"":""},e.setCookie=function(e,t,n,r,i,s){var o=[];o.push(e+"="+escape(t));if(n){var u=new Date,a=u.getTime()+n*36e5;u.setTime(a),o.push("expires="+u.toGMTString())}r&&o.push("path="+r),i&&o.push("domain="+i),s&&o.push(s),document.cookie=o.join(";")},e.deleteCookie=function(e){document.cookie=e+"=;"+"expires=Fri, 31 Dec 1999 23:59:59 GMT;"},e}(),r.dateParse=function(e){var t=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof e){if(t.test(e)||isNaN(Date.parse(e))){var n=e.split(/ |T/),r=n.length>1?n[1].split(/[^\d]/):[0,0,0],i=n[0].split(/[^\d]/);return new Date(i[0]-0,i[1]-1,i[2]-0,r[0]-0,r[1]-0,r[2]-0)}return new Date(e)}return new Date},r.getServerTime=function(){var e=r.cookie.getCookie("WAP_SERVERDATE");return r.dateParse(e)},r.getServerDate=function(e){return t.getServerDate(e)},r.isInApp=function(){var e=window.navigator.userAgent;if(e.indexOf("CtripWireless")>-1)return!0;var t=a.oldGet("isInApp");if(t)return t=="1"?!0:!1;var n=a.oldGet("ISINAPP");if(n)return n=="1"?!0:!1},r.isPreProduction=function(){var e=a.oldGet("isPreProduction");return e},r.Object={set:function(e,t,n){if(!t)return null;var r=t.split(".");e=e||{},tmp=e;for(var i=0,s=r.length,o=Math.max(s-1,0);i<s;i++)i<o?tmp=tmp[r[i]]=tmp[r[i]]||{}:tmp[r[i]]=n;return e},get:function(e,t){if(!e||!t)return null;var n=t.split(".");e=e||{},tmp=e;for(var r=0,i=n.length,s=Math.max(i-1,0);r<i;r++){tmp=tmp[n[r]];if(typeof tmp=="null"||typeof tmp=="undefined")return null}return tmp}},r.SimpleQueue=new t.Class({initialize:function(){this.index=0,this.handlers=[],this.isStart=!1},add:function(e){this.handlers.push(e),this.isStart||(this.isStart=!0,this._next())},_next:function(e){var t=this.handlers.shift();t&&t.call(this,this,e)},next:function(){this._next.apply(this,arguments),this.stop()},stop:function(){this.isStart=!1}}),r.tryUrl=function(e){var t=document.createElement("iframe");t.height=1,t.width=1,t.frameBorder=0,t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),r.tryUrl=function(e){t.src=e},r.tryUrl(e)},r}),define("cStore",["cBase","cStorage","cUtility"],function(e,t,n){CDate=e.Date,HObject=n.Object;var r=new e.Class({__propertys__:function(){this.NULL={},this.key=this.NULL,this.lifeTime="30M",this.useServerTime=!1,this.isLocal=!0,this.defaultData=null,this.rollbackEnabled=!1,this.sProxy=this.NULL},initialize:function(e){for(var n in e)this[n]=e[n];this.assert(),this.isLocal?this.sProxy=t.localStorage:this.sProxy=t.sessionStorage},assert:function(){if(this.key===this.NULL)throw"not override key property"},set:function(e,t,n){var r=this._getNowTime();r.addSeconds(this._getLifeTime()),this.rollbackEnabled&&!n&&(n=e),this.sProxy.set(this.key,e,r,t,null,n)},setLifeTime:function(e,t){this.lifeTime=e;var n=this.getTag(),r=this.get(),i;t?i=this._getNowTime():i=this.sProxy.getSaveDate(this.key,!0)||this._getNowTime();var s=(new CDate(i.valueOf())).format("Y/m/d H:i:s");i.addSeconds(this._getLifeTime()),this.sProxy.set(this.key,r,i,n,s)},setAttr:function(e,t,n){if(_.isObject(e)){for(var r in e)e.hasOwnProperty(r)&&this.setAttr(r,e[r],t);return}var i=this.get(n)||{},s={};if(i){if(this.rollbackEnabled){s=this.get(n,!0);var o=HObject.get(i,e);HObject.set(s,e,o)}return HObject.set(i,e,t),this.set(i,n,s)}return!1},get:function(t,n){var r=null,i=!0;Object.prototype.toString.call(this.defaultData)==="[object Array]"?r=this.defaultData.slice(0):this.defaultData&&(r=_.clone(this.defaultData));var s=this.sProxy.get(this.key,t,n),o=typeof s;if({string:!0,number:!0,"boolean":!0}[o])return s;if(s)if(Object.prototype.toString.call(s)=="[object Array]"){r=[];for(var u=0,a=s.length;u<a;u++)r[u]=s[u]}else s&&!r&&(r={}),e.extend(r,s);for(var f in r){i=!1;break}return i?null:r},getAttr:function(e,t){var n=this.get(t),r=null;return n&&(r=HObject.get(n,e)),r},getTag:function(){return this.sProxy.getTag(this.key)},remove:function(){this.sProxy.remove(this.key)},removeAttr:function(e){var t=this.get()||{};t[e]&&delete t[e],this.set(t)},getExpireTime:function(){var e=null;try{e=this.sProxy.getExpireTime(this.key)}catch(t){console&&0}return e},setExpireTime:function(e){var t=this.get(),n=new CDate(e);this.sProxy.set(this.key,t,n)},_getNowTime:function(){return this.useServerTime?new CDate(e.getServerDate()):new CDate},_getLifeTime:function(){var e=0,t=this.lifeTime+"",n=t.charAt(t.length-1),r=+t.substring(0,t.length-1);return typeof n=="number"?n="M":n=n.toUpperCase(),n=="D"?e=r*24*60*60:n=="H"?e=r*60*60:n=="M"?e=r*60:n=="S"?e=r:e=r*60,e},rollback:function(e){if(this.rollbackEnabled){var t=this.getTag(),n=this.sProxy.get(this.key,t),r=this.sProxy.get(this.key,t,!0);if(e&&e instanceof Array)for(var i in e){var s=e[i],o=r[s];typeof o!="undefined"&&(n[s]=o)}else n=r,r={};this.set(n,t,r)}}});return r.getInstance=function(){return this.instance?this.instance:this.instance=new this},r}),define("CommonStore",["cBase","cStore","cStorage","cUtility"],function(e,t,n,r){var i={};return i.UserStore=new e.Class(t,{__propertys__:function(){this.key="USER",this.lifeTime="1D"},initialize:function(e,t){e(t)},getUser:function(){var e=n.localStorage.oldGet("USERINFO");return e=e&&e.data||null,this.set(e),e},setUser:function(e){var t=n.localStorage.getExpireTime("USERINFO"),r={data:e,timeout:t};n.localStorage.oldSet("USERINFO",JSON.stringify(r)),this.set(e)},removeUser:function(){n.localStorage.oldRemove("USERINFO"),this.set(null)},isNonUser:function(){var e=this.getUser();return e&&!!e.IsNonUser},isLogin:function(){var e=this.getUser();return e&&!!e.Auth&&!e.IsNonUser},getUserName:function(){var e=this.getUser();return e.UserName},getUserId:function(){var e=this.getUser()||{};return e.UserID||r.getGuid()},getAuth:function(){var e=i.HeadStore.getInstance(),t=this.getUser();return t&&t.Auth&&e.setAttr("auth",t.Auth),e.getAttr("auth")},setAuth:function(e){var t=this.isLogin(),n=this.getUser()||{};n.Auth=e,n.IsNonUser=t?!1:!0,this.setUser(n)},setNonUser:function(e){var t=n.localStorage.oldGet("USERINFO"),r=i.HeadStore.getInstance(),s=t&&t.data||{};s.Auth=e,s.IsNonUser=!0,this.setUser(s),r.setAttr("auth",e)}}),i.HeadStore=new e.Class(t,{userStore:i.UserStore.getInstance(),__propertys__:function(){this.key="HEADSTORE",this.lifeTime="15D",this.defaultData={cid:r.getGuid(),ctok:"351858059049938",cver:"1.0",lang:"01",sid:"8888",syscode:"09",auth:""};var e=this.get;this.get=function(){var t=e.apply(this,arguments),n=this.userStore.getUser(),r=i.SalesObjectStore.getInstance().get();return r&&r.sid?t.sid=r.sid:t.sid="8888",n&&n.Auth?t.auth=n.Auth:t.auth="",this.set(t),t}},initialize:function(e,t){e(t)},setAuth:function(e){var t=i.UserStore.getInstance();t.setAuth(e),this.setAttr("auth",e)}}),i.UnionStore=new e.Class(t,{__propertys__:function(){this.key="UNION",this.lifeTime="7D",this.store=n.localStorage},initialize:function(e,t){e(t)},get:function(){var e=this.store.oldGet(this.key);return e&&e.data||null},set:function(t,n){n||(n=new e.Date(r.getServerDate()),n.addSeconds(this._getLifeTime()));var i={data:t,timeout:n.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(i))}}),i.SalesStore=new e.Class(t,{__propertys__:function(){this.key="SALES",this.lifeTime="30D",this.store=n.localStorage},initialize:function(e,t){e(t)},get:function(){var e=this.store.oldGet(this.key);return e&&e.data||null},set:function(t,n){n||(n=new e.Date(r.getServerDate()),n.addSeconds(this._getLifeTime()));var i={data:t,timeout:n.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(i))}}),i.SalesObjectStore=new e.Class(t,{__propertys__:function(){this.key="SALES_OBJECT",this.lifeTime="30D"},initialize:function(e,t){e(t)}}),i.UnionStore.getInstance=i.SalesStore.getInstance=e.getInstance,i}),define("cLog",["libs"],function(){window.onerror=function(e,t,n){cLog.errorLog(e,t,n)},window.onload=function(){cLog.urlLog(window.location.href)},window.onhashchange=function(){cLog.urlLog(window.location.href)};var cLog={serverLog:function(){var e=!1,t=localStorage.getItem("H5_CFG");return t&&(e=JSON.parse(t).value.serverLog),!!e}(),errorLog:function(e,t,n){var r=this.buildErrorObj(e,t,n);return this.pushLog("ERROR_LOG",r),!1},urlLog:function(e){if(e.indexOf("monitor")>-1)return;var t={url:e,dt:this.getDateTime()};this.pushLog("URL_LOG",t)},restlog:function(e,t,n){if(!this.serverLog)return;var r={url:e,rspCode:n?"200":"404",req:t,rsp:n,dt:this.getDateTime()};this.pushLog("SERVER_LOG",r)},applog:function(name,param){var logStore=localStorage.getItem("APP_LOG"),appLog=logStore?JSON.parse(logStore):{};appLog[name]={data:param,dt:this.getDateTime()},JSON.stringify?logStr=JSON.stringify(appLog):logStr=eval("("+appLog+")"),localStorage.setItem("APP_LOG",logStr)},buildErrorObj:function(e,t,n){var r=typeof t=="string"?t.substr(t.lastIndexOf("/")+1):"";return{msg:e,file:r,line:n,fullPath:t,dt:this.getDateTime(),url:window.location.href,restful:{url:"",request:"",response:""}}},pushLog:function(logName,logItem){var logStore=localStorage.getItem(logName),logStr=[],logStack=logStore?JSON.parse(logStore):[];logStack.length>0&&logStack.splice(50),logStack.unshift(logItem),JSON.stringify?logStr=JSON.stringify(logStack):logStr=eval("("+logStack+")"),localStorage.setItem(logName,logStr)},getDateTime:function(){var e=new Date,t="";return t+=e.getMonth()+1,t+="/",t+=e.getDate(),t+=" ",t+=e.getHours(),t+=":",t+=e.getMinutes(),t+=":",t+=e.getSeconds(),t}};return cLog}),define("cHybridFacade",["libs","CommonStore","cLog"],function(e,t,n){var r=r||{};r.METHOD_ENTRY="METHOD_ENTRY",r.METHOD_MEMBER_LOGIN="METHOD_MEMBER_LOGIN",r.METHOD_NON_MEMBER_LOGIN="METHOD_NON_MEMBER_LOGIN",r.METHOD_AUTO_LOGIN="METHOD_AUTO_LOGIN",r.METHOD_LOCATE="METHOD_LOCATE",r.METHOD_REFRESH_NAV_BAR="METHOD_REFRESH_NAV_BAR",r.METHOD_CALL_PHONE="METHOD_CALL_PHONE",r.METHOD_BACK_TO_HOME="METHOD_BACK_TO_HOME",r.METHOD_BACK_TO_BOOK_CAR="METHOD_BACK_TO_BOOK_CAR",r.METHOD_BACK="METHOD_BACK",r.METHOD_COMMIT="METHOD_COMMIT",r.METHOD_REGISTER="METHOD_REGISTER",r.METHOD_LOG_EVENT="METHOD_LOG_EVENT",r.METHOD_INIT="METHOD_INIT",r.METHOD_CALL_SERVICE_CENTER="METHOD_CALL_SERVICE_CENTER",r.METHOD_BACK_TO_LAST_PAGE="METHOD_BACK_TO_LAST_PAGE",r.METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE="METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE",r.METHOD_GO_TO_HOTEL_DETAIL="METHOD_GO_TO_HOTEL_DETAIL",r.METHOD_OPEN_URL="METHOD_OPEN_URL",r.METHOD_CHECK_UPDATE="METHOD_CHECK_UPDATE",r.METHOD_RECOMMEND_APP_TO_FRIEND="METHOD_RECOMMEND_APP_TO_FRIEND",r.METHOD_ADD_WEIXIN_FRIEND="METHOD_ADD_WEIXIN_FRIEND",r.METHOD_SHOW_NEWEST_INTRODUCTION="METHOD_SHOW_NEWEST_INTRODUCTION",r.METHOD_BECOME_ACTIVE="METHOD_BECOME_ACTIVE",r.METHOD_WEB_VIEW_FINISHED_LOAD="METHOD_WEB_VIEW_FINISHED_LOAD",r.METHOD_CROSS_DOMAIN_HREF="METHOD_CROSS_DOMAIN_HREF",r.METHOD_CHECK_APP_INSTALL="METHOD_CHECK_APP_INSTALL",r.METHOD_CROSS_JUMP="METHOD_CROSS_JUMP",r.METHOD_REFRESH_NATIVE="METHOD_REFRESH_NATIVE",r.METHOD_H5_NEED_REFRESH="METHOD_H5_NEED_REFRESH",r.METHOD_READ_FROM_CLIPBOARD="METHOD_READ_FROM_CLIPBOARD",r.METHOD_COPY_TO_CLIPBOARD="METHOD_COPY_TO_CLIPBOARD",r.METHOD_SHARE_TO_VENDOR="METHOD_SHARE_TO_VENDOR",r.METHOD_DOWNLOAD_DATA="METHOD_DOWNLOAD_DATA",r.METHOD_NATIVE_LOG="METHOD_NATIVE_LOG";var i="h5_init_finished",s="member_login",o="non_member_login",u="member_auto_login",a="locate",f="refresh_nav_bar",l="back",c="commit",h="member_register",p="init_member_H5_info",d="become_active",v="web_view_finished_load",m="check_app_install_status",g="app_h5_need_refresh",y="read_copied_string_from_clipboard",b="download_data",w=!1,E={METHOD_NON_MEMBER_LOGIN:function(e){S[o]=function(r){n.applog("METHOD_NON_MEMBER_LOGIN",r),typeof r=="string"&&(r=JSON.parse(r));var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u),typeof e.callback=="function"&&e.callback(r)}},METHOD_LOCATE:function(e){S[a]=function(t){n.applog("METHOD_LOCATE",t);try{var r=t;typeof t=="string"&&(r=JSON.parse(t)),e.success(r)}catch(i){e.error(!0,"瀹氫綅澶辫触")}}},METHOD_MEMBER_LOGIN:function(e){S[s]=function(r){n.applog("METHOD_MEMBER_LOGIN",r),typeof r=="string"&&(r=JSON.parse(r));var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u),typeof e.callback=="function"&&e.callback()}},METHOD_AUTO_LOGIN:function(e){S[u]=function(r){n.applog("METHOD_AUTO_LOGIN",r),typeof r=="string"&&(r=JSON.parse(r));if(r){var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u)}typeof e.callback=="function"&&e.callback(r)}},METHOD_REGISTER:function(e){S[h]=function(r){n.applog("METHOD_REGISTER",r),typeof r=="string"&&(r=JSON.parse(r));var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u),typeof e.callback=="function"&&e.callback()}},METHOD_ENTRY:function(e){S[i]=e.callback},METHOD_BACK:function(e){S[l]=e.callback},METHOD_COMMIT:function(e){S[c]=e.callback},METHOD_INIT:function(e){S[p]=function(r){n.applog("METHOD_INIT",r),typeof r=="string"&&(r=JSON.parse(r));if(window.localStorage&&r){if(r&&r.userInfo)try{var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.userInfo.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.userInfo.data.Auth,o.set(u)}catch(a){alert("set data error")}if(r&&r.device){var f={device:r.device};window.localStorage.setItem("DEVICEINFO",JSON.stringify(f))}if(r&&r.appId){var l={version:r.version,appId:r.appId,serverVersion:r.serverVersion,platform:r.platform};window.localStorage.setItem("APPINFO",JSON.stringify(l))}r&&r.timestamp&&window.localStorage.setItem("SERVERDATE",r.timestamp),r&&r.sourceId&&window.localStorage.setItem("SOURCEID",r.sourceId),r&&r.isPreProduction&&window.localStorage.setItem("isPreProduction",r.isPreProduction)}e.callback()}},METHOD_WEB_VIEW_FINISHED_LOAD:function(e){S[v]=e.callback},METHOD_BECOME_ACTIVE:function(e){S[d]=e.callback},METHOD_CHECK_APP_INSTALL:function(e){S[m]=function(t){n.applog("METHOD_CHECK_APP_INSTALL",t),e.callback(t)}},METHOD_H5_NEED_REFRESH:function(e){S[g]=e.callback},METHOD_READ_FROM_CLIPBOARD:function(e){S[y]=function(t){n.applog("METHOD_READ_FROM_CLIPBOARD",t),e.callback(t)}},METHOD_DOWNLOAD_DATA:function(e){S[b]=function(t){n.applog("METHOD_DOWNLOAD_DATA",t),typeof e.callback=="function"&&e.callback(t)}}},S={},x={h5_init_finished:function(e){typeof S[i]=="function"&&S[i](e)},non_member_login:function(e){typeof S[o]=="function"&&S[o](e)},locate:function(e){typeof S[a]=="function"&&S[a](e)},member_login:function(e){typeof S[s]=="function"&&S[s](e)},back:function(){typeof S[l]=="function"&&S[l]()},commit:function(){typeof S[c]=="function"&&S[c]()},init_member_H5_info:function(e){typeof S[p]=="function"&&S[p](e)},member_register:function(){typeof S[h]=="function"&&S[h]()},web_view_finished_load:function(){typeof S[v]=="function"&&S[v]()},become_active:function(){typeof S[d]=="function"&&S[d]()},member_auto_login:function(e){typeof S[u]=="function"&&S[u](e)},check_app_install_status:function(e){typeof S[m]=="function"&&S[m](e)},app_h5_need_refresh:function(e){typeof S[g]=="function"&&S[g](e)},read_copied_string_from_clipboard:function(e){typeof S[y]=="function"&&S[y](e)},download_data:function(e){typeof S[b]=="function"&&S[b](e)}},T={callback:function(e){if(w)return;var t=e;if(typeof e=="string")try{t=JSON.parse(window.decodeURIComponent(e))}catch(n){setTimeout(function(){0},0)}if(typeof x[t.tagname]=="function")return x[t.tagname](t.param),!0}},N=function(e){for(var t in T)e[t]=e[t]||T[t]};return r.init=function(){var e=window.app={};N(e)},r.register=function(e){typeof E[e.tagname]=="function"&&E[e.tagname](e)},r.request=function(e){var t={METHOD_INIT:function(e){r.register({tagname:r.METHOD_INIT,callback:e.callback}),CtripUtil.app_init_member_H5_info()},METHOD_ENTRY:function(e){return},METHOD_MEMBER_LOGIN:function(e){r.register({tagname:r.METHOD_MEMBER_LOGIN,callback:e.callback}),CtripUser.app_member_login()},METHOD_NON_MEMBER_LOGIN:function(e){r.register({tagname:r.METHOD_NON_MEMBER_LOGIN,callback:e.callback}),CtripUser.app_non_member_login()},METHOD_AUTO_LOGIN:function(e){r.register({tagname:r.METHOD_AUTO_LOGIN,callback:e.callback}),CtripUser.app_member_auto_login()},METHOD_REGISTER:function(e){r.register({tagname:r.ETHOD_REGISTER,callback:e.callback}),CtripUser.app_member_register()},METHOD_LOCATE:function(e){r.register({tagname:r.METHOD_LOCATE,success:e.success,error:e.error});var t=!0;e.isAsync&&(t=e.isAsync),CtripUtil.app_locate(t)},METHOD_REFRESH_NAV_BAR:function(e){CtripUtil.app_refresh_nav_bar(e.config)},METHOD_CALL_PHONE:function(e){CtripUtil.app_call_phone(e.tel)},METHOD_BACK_TO_HOME:function(e){CtripUtil.app_back_to_home()},METHOD_BACK_TO_BOOK_CAR:function(e){app_back_to_book_car()},METHOD_LOG_EVENT:function(e){CtripUtil.app_log_event(e.event_name)},METHOD_CALL_SERVICE_CENTER:function(){CtripUtil.app_call_phone()},METHOD_BACK_TO_LAST_PAGE:function(e){var t=e.param||"";CtripUtil.app_back_to_last_page(t)},METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE:function(e){CtripUtil.app_go_to_book_car_finished_page(e.url)},METHOD_GO_TO_HOTEL_DETAIL:function(e){CtripUtil.app_go_to_hotel_detail(e.hotelId,e.hotelName,e.cityId,e.isOverSea)},METHOD_OPEN_URL:function(e){var t=e.title||"";CtripUtil.app_open_url(e.openUrl,e.targetMode,t)},METHOD_CHECK_UPDATE:function(e){CtripUtil.app_check_update()},METHOD_RECOMMEND_APP_TO_FRIEND:function(){CtripUtil.app_recommend_app_to_friends()},METHOD_ADD_WEIXIN_FRIEND:function(){CtripUtil.app_add_weixin_friend()},METHOD_CROSS_DOMAIN_HREF:function(e){CtripUtil.app_cross_domain_href(e.moduleType,e.anchor,e.param)},METHOD_SHOW_NEWEST_INTRODUCTION:function(e){CtripUtil.app_show_newest_introduction()},METHOD_CHECK_APP_INSTALL:function(e){r.register({tagname:r.METHOD_CHECK_APP_INSTALL,callback:e.callback}),CtripUtil.app_check_app_install_status(e.url,e.package)},METHOD_CROSS_JUMP:function(e){CtripUtil.app_cross_package_href(e.path,e.param)},METHOD_REFRESH_NATIVE:function(e){CtripUtil.app_refresh_native_page(e.package,e.json)},METHOD_READ_FROM_CLIPBOARD:function(e){r.register({tagname:r.METHOD_READ_FROM_CLIPBOARD,callback:e.callback}),CtripUtil.app_read_copied_string_from_clipboard()},METHOD_COPY_TO_CLIPBOARD:function(e){CtripUtil.app_copy_string_to_clipboard(e.content)},METHOD_SHARE_TO_VENDOR:function(e){CtripUtil.app_call_system_share(e.imgUrl,e.text)},METHOD_DOWNLOAD_DATA:function(e){r.register({tagname:r.METHOD_DOWNLOAD_DATA,callback:e.callback}),CtripUtil.app_download_data(e.url,e.suffix)},METHOD_NATIVE_LOG:function(e){var t=window.localStorage.getItem("isPreProduction");t&&t!=""&&CtripTool.app_log("@[Wireless H5] "+e.log,e.result)}};t[e.name](e)},r.getOpenUrl=function(e){var t="ctrip://wireless/"+e.module+"?";return _.each(e.param,function(e,n,r){t+=n+"="+e+"&"}),t[t.length-1]==="&"&&(t=t.slice(0,t.length-1)),t},r}),define("cWidgetGuider",["cUtility","cWidgetFactory","cHybridFacade"],function(e,t,n){var r="Guider",i={jump:function(e){var t={refresh:function(){n.request({name:n.METHOD_OPEN_URL,targetMode:0,title:e.title})},app:function(){if(e&&e.module){var t=n.getOpenUrl(e);n.request({name:n.METHOD_OPEN_URL,openUrl:t,targetMode:1,title:e.title})}else e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:1,title:e.title})},h5:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:2,title:e.title})},browser:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:3,title:e.title})}};typeof t[e.targetModel]=="function"&&t[e.targetModel]()},apply:function(e){e.hybridCallback()},call:function(e){return!1},init:function(e){e&&window.parseFloat(e.version)<5.2?n.request({name:n.METHOD_ENTRY,callback:e.callback}):n.request({name:n.METHOD_INIT,callback:e.callback})},log:function(e){n.request({name:n.METHOD_LOG_EVENT,event_name:e.name})},print:function(e){n.request({name:n.METHOD_NATIVE_LOG,log:e.log,result:e.result})},callService:function(){n.request({name:n.METHOD_CALL_SERVICE_CENTER})},backToLastPage:function(e){var t=e?e.param:"";n.request({name:n.METHOD_BACK_TO_LAST_PAGE,param:t})},checkUpdate:function(){n.request({name:n.METHOD_CHECK_UPDATE})},recommend:function(){n.request({name:n.METHOD_RECOMMEND_APP_TO_FRIEND})},addWeixinFriend:function(){n.request({name:n.METHOD_ADD_WEIXIN_FRIEND})},showNewestIntroduction:function(){n.request({name:n.METHOD_SHOW_NEWEST_INTRODUCTION})},register:function(e){e&&e.tagname&&e.callback&&n.register({tagname:e.tagname,callback:e.callback})},create:function(){n.init()},home:function(){n.request({name:n.METHOD_BACK_TO_HOME})},jumpHotel:function(e){n.request({name:n.METHOD_GO_TO_HOTEL_DETAIL,hotelId:e.hotelId,hotelName:e.name,cityId:e.cityId,isOverSea:e.isOverSea})},injectUbt:function(){var e='!function () { var a, b, c, d, e, f, g, i; if (true) { for (a = document.getElementsByTagName("script") || [], b = /_bfa.min.js/i, c = 0; c < a.length; c++) if (b.test(a[c].src)) return; if (!(window.$_bf || window.$LAB || window.CtripJsLoader)) { d = new Date, e = "?v=" + d.getFullYear() + d.getMonth() + "_" + d.getDate() + ".js", f = document.createElement("script"), f.type = "text/javascript", f.charset = "utf-8", f.async = !0; try { g = "https:" == document.location.protocol } catch (h) { g = "https:" == document.URL.match(/[^:]+/) + ":" } f.src = g ? "https://s.c-ctrip.com/_bfa.min.js" + e : "http://webresource.c-ctrip.com/code/ubt/_bfa.min.js" + e, i = document.getElementsByTagName("script")[0], i.parentNode.insertBefore(f, i) } } } ();',t=$("<script>"+e+"//<"+"/scrtip>");$("body").append(t)},checkAppInstall:function(e){n.request({name:n.METHOD_CHECK_APP_INSTALL,url:e.url,"package":e.package,callback:e.callback})},callPhone:function(e){n.request({name:n.METHOD_CALL_PHONE,tel:e.tel})},cross:function(e){n.request({name:n.METHOD_CROSS_JUMP,param:e.param,path:e.path})},refreshNative:function(e){n.request({name:n.METHOD_REFRESH_NATIVE,"package":e.package,json:e.json})},copyToClipboard:function(e){n.request({name:n.METHOD_COPY_TO_CLIPBOARD,content:e.content})},readFromClipboard:function(e){n.request({name:n.METHOD_READ_FROM_CLIPBOARD,callback:e.callback})},shareToVendor:function(e){n.request({name:n.METHOD_SHARE_TO_VENDOR,imgUrl:e.imgUrl,text:e.text})},downloadData:function(e){n.request({name:n.METHOD_DOWNLOAD_DATA,url:e.url,callback:e.callback,suffix:e.suffix})}},s={jump:function(e){e&&e.url&&typeof e.url=="string"&&(window.location.href=e.url)},apply:function(e){e&&e.callback&&typeof e.callback=="function"&&e.callback()},call:function(e){var t=document.getElementById("h5-hybrid-caller");if(!e||!e.url||!typeof e.url==="string")return!1;t&&t.src==e.url?t.contentDocument.location.reload():t&&t.src!=e.url?t.src=e.url:(t=document.createElement("iframe"),t.id="h5-hybrid-caller",t.src=e.url,t.style.display="none",document.body.appendChild(t))},init:function(){return!1},log:function(e){window.console&&window.console.log(e.name)},print:function(e){return 0},callService:function(){window.location.href="tel:4000086666"},backToLastPage:function(){window.location.href=document.referrer},checkUpdate:function(){return!1},recommend:function(){return!1},addWeixinFriend:function(){return!1},showNewestIntroduction:function(){return!1},register:function(){return!1},create:function(){return!1},home:function(){window.location.href="/"},jumpHotel:function(){return!1},injectUbt:function(){return!1},checkAppInstall:function(){return!1},callPhone:function(){return!1},cross:function(){return!1},refreshNative:function(){return!1},copyToClipboard:function(e){return!1},readFromClipboard:function(e){return!1},shareToVendor:function(e){return!1},downloadData:function(e){return!1}};t.register({name:r,fn:e.isInApp()?i:s})}),define("cUIWarning404",["libs","cBase","cUIPageview","cWidgetFactory","cWidgetGuider"],function(e,t,n,r){var i=r.create("Guider"),s={},o={prefix:"cui-"},u=function(){},a={};return a.class=o.prefix+"warning",a.onCreate=function(){this.root.html(['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-content">','<div class="cui-load-fail cui-text-center">','<div class="cui-load-error">','<div class="i cui-wifi i_bef cui-fail-icon">',"</div>","</div>",'<p class="cui-grayc">鍔犺浇澶辫触锛岃绋嶅悗鍐嶈瘯璇曞惂</p>','<span class="cui-btns-retry">閲嶈瘯</span>','<div class="cui-glines"></div>','<p class="cui-grayc">鎴栬€呮嫧鎵撴惡绋嬪鏈嶇數璇�</p>','<div id="telBtn"><span class="cui-btns-tel"><i class="icon_phone i_bef"></i>鑱旂郴瀹㈡湇</span></div>',"</div>","</div>","</div>","</div>"].join("")),this.addClass("head-warning-top"),this.retryDom=this.root.find(".cui-btns-retry"),this.retryDom.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},a.onShow=function(){this.setzIndexTop();var e=this;window.scrollTo(0,0),this.root.find("#telBtn").click(function(){i.apply({hybridCallback:function(){i.callService()},callback:function(){window.location.href="tel:"+e.tel}})})},s.__propertys__=function(){this.retryDom,this.tel="4000086666",this.callback=function(){}},s.initialize=function(e,t){e(a,t)},s.retryClick=function(e){e&&(this.callback=e)},new t.Class(n,s)}),define("cUIToast",["libs","cBase","cUILayer"],function(e,t,n){function r(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedfocus\b/.test(e.className)}}typeof $.needFocus!="function"&&($.needFocus=r);var i={},s={prefix:"cui-",sleep:2},o=null,u=null,a=null,f=function(e){this.hide(),e&&typeof e=="function"&&e.call(this),$(".cui-opacitymask").unbind("click"),$(".cui-toast").unbind("click")},l=function(e,t){var n=this,r=function(){$(".cui-opacitymask").unbind("click").bind("click",function(){f.call(n,t)}),$(".cui-toast").unbind("click").bind("click",function(){f.call(n,t)})};e&&setTimeout(r,400)},c=function(e,t,n,r){var i=this;this.setContent(e),typeof u=="function"&&u.call(this);var a=function(){f.call(i,n)},c=(t||s.sleep)*1e3;o=setTimeout(a,c),l.call(this,r,n),this.focusPosition=setInterval($.proxy(function(){var e=document.activeElement;if($.needFocus(e)){this.focusPosition||(this.focusPosition=!0);var t=parseInt($(e).offset().top)+30;this.root.css({top:t+"px",position:"absolute"})}},this),20)},h=function(){clearTimeout(o),this.focusPosition&&(clearInterval(this.focusPosition),this.root.css({top:"50%",position:"fixed"})),typeof a=="function"&&a.call(this)};i.__propertys__=function(){u=this.show,a=this.hide,this.show=c,this.hide=h},i.initialize=function(e,t){this.addClass([s.prefix+"toast"]),e(t)},i.setContent=function(e){this.create(),this.contentDom.html(e)};var p=new t.Class(n,i);return p}),define("cAjax",["libs"],function(e){var t=function(e){function t(e,t,n,r){var i=a(e,t,n,r);return i.type="GET",o(i)}function n(e,t,n,r){t=JSON.stringify(t);var i=a(e,t,n,r);return i.type="POST",i.dataType="json",i.timeout=3e4,i.contentType="application/json",o(i)}function r(e,t,n,r){var i=a(e,t,n,r);return i.type="GET",i.dataType="jsonp",i.crossDomain=!0,o(i)}function i(e,t,n,r,i){t.toLowerCase()!=="get"&&(n=JSON.stringify(n));var s=a(e,n,r,i);return s.type=t,s.dataType="json",s.crossDomain=!0,s.data=n,s.contentType="application/json; charset=utf-8",o(s)}function s(t,n,r,i){var s=null,u="";typeof n=="string"?s=e("#"+n):s=e(n),s&&s.length>0&&(u=s.serialize());var f=a(t,u,r,i);return o(f)}function o(t){var n={url:t.url,type:t.type,dataType:t.dataType,data:t.data,contentType:t.contentType,timeout:t.timeout||5e4,success:function(e){t.callback(e)},error:function(e){t.error&&t.error(e)}};return t.url.indexOf(window.location.host)===-1&&(n.crossDomain=!!t.crossDomain),e.ajax(n)}function u(t){if(window.XDomainRequest){var n=new XDomainRequest;if(n){t.error&&typeof t.error=="function"&&(n.onerror=function(){t.error()}),t.timeout&&typeof t.timeout=="function"&&(n.ontimeout=function(){t.timeout()}),t.success&&typeof t.success=="function"&&(n.onload=function(){t.dataType?t.dataType.toLowerCase()=="json"&&t.callback(JSON.parse(n.responseText)):t.callback(n.responseText)});var r="";t.type=="POST"?r=t.data:r=e.param(t.data),n.open(t.type,t.url),n.send(r)}}}function a(e,t,n,r){return{url:e,data:t,callback:n,error:r}}return{get:t,post:n,jsonp:r,cros:i,form:s}}($);return t}),define("cAbstractModel",["libs","cBase","cAjax","cUtility","cLog"],function(e,t,n,r,i){var s=r.Object,o=new t.Class({__propertys__:function(){this.url=null,this.param=null,this.dataformat=null,this.validates=[],this.debug=!1,this.protocol="http",this.contentType=o.CONTENT_TYPE_JSON,this.method="POST",this.ajax,this.isAbort=!1,this.onBeforeCompleteCallback=null},initialize:function(e){this.assert();for(var t in e)this[t]=e[t]},assert:function(){if(this.url===null)throw"not override url property";if(this.param===null)throw"not override param property"},pushValidates:function(e){typeof e=="function"&&this.validates.push($.proxy(e,this))},setParam:function(e,t){typeof e=="object"&&!t?this.param=e:this.param[e]=t},getParam:function(){return this.param},buildurl:function(){var e=o.baseurl(this.protocol);return this.protocol+"://"+e.domain+"/"+e.path+(typeof this.url=="function"?this.url():this.url)},execute:function(e,t,r,s,u){this.isAbort=!1;var a=this.buildurl(),f=this,l=$.proxy(function(n){i.restlog(f.buildurl(),f.getParam(),n);if(this.validates&&this.validates.length>0)for(var s=0,o=this.validates.length;s<o;s++)if(!this.validates[s](n))return typeof t=="function"?t.call(r||this,n):!1;var u=typeof this.dataformat=="function"?this.dataformat(n):n;typeof this.onBeforeCompleteCallback=="function"&&this.onBeforeCompleteCallback(u),typeof e=="function"&&e.call(r||this,u,n)},this),c=$.proxy(function(e){i.restlog(f.buildurl(),f.getParam());if(f.isAbort)return f.isAbort=!1,typeof s=="function"?s.call(r||this,e):!1;typeof t=="function"&&t.call(r||this,e)},this),u=u||_.clone(this.getParam()||{});return this.contentType===o.CONTENT_TYPE_JSON?this.ajax=n.cros(a,this.method,u,l,c):this.contentType===o.CONTENT_TYPE_JSONP?this.ajax=n.jsonp(a,u,l,c):this.ajax=n.post(a,u,l,c)},abort:function(){this.isAbort=!0,this.ajax&&this.ajax.abort&&this.ajax.abort()}});return o.getInstance=function(){return this.instance instanceof this?this.instance:this.instance=new this},o.baseurl=function(){throw"[ERROR]abstract method:baseurl, must be override"},o.CONTENT_TYPE_JSON="json",o.CONTENT_TYPE_FORM="form",o.CONTENT_TYPE_JSONP="jsonp",o}),define("cModel",["libs","cBase","cStore","cAjax","cUtility","CommonStore","cAbstractModel","cStorage"],function(e,t,n,r,i,s,o,u){var a=i.Object,f=new t.Class(o,{__propertys__:function(){this.usehead=!0,this.head=s.HeadStore.getInstance(),this.result=null,this.headinfo=null,this.ajaxOnly=!1},initialize:function(e,t){e(t),this.baseurl=f.baseurl.call(this,this.protocol)},setHead:function(e){if(!e instanceof n)throw"Set head is not a store";this.head=e},getHead:function(){return this.head},getParamStore:function(){return this.param},setParamStore:function(e){if(typeof e!="object")throw"Set param is not a store";this.param=e},getResultStore:function(){return this.result},clearResult:function(){this.result&&typeof this.result.remove=="function"&&this.result.remove()},setParam:function(e,t){var r={};typeof e=="object"&&!t?r=e:r[e]=t;for(var i in r)this.param instanceof n?this.param.setAttr(i,r[i]):a.set(this.param,i,r[i])},getParam:function(){return this.param instanceof n?this.param.get():this.param},buildurl:function(){var e=u.localStorage.get("H5_CFG"),t;e&&e.path&&(t=e.path);var n=this.baseurl,r=[];t&&!location.host.match(/^m\.ctrip\.com/i)&&(this.protocol==="http"?r=t.http&&t.http.split("/"):r=t.https&&t.https.split("/"));var i=this.protocol+"://"+(r[0]||n.domain)+"/"+(r[1]||n.path)+(typeof this.url=="function"?this.url():this.url);return i},getTag:function(){var e=_.clone(this.getParam()||{});if(this.isUserData&&!e.cid){var t=this.head.userStore;e.cid=t.getUserId()}return JSON.stringify(e)},excute:function(e,t,r,i,s){var o=_.clone(this.getParam()||{});this.pushValidates(function(e){var t=this.head.get(),n=e.head;return this.contentType!==f.CONTENT_TYPE_JSONP&&this.usehead&&n.auth&&n.auth!==t.auth&&this.head.setAuth(n.auth),n&&n.errcode===0?!0:!1});var u=this.getTag(),a=this.result&&this.result.get(u);!a||this.ajaxOnly||r?(this.method.toLowerCase()!=="get"&&this.usehead&&this.contentType!==f.CONTENT_TYPE_JSONP?o.head=this.head.get():this.method.toLowerCase()!=="get"&&!this.usehead&&this.contentType!==f.CONTENT_TYPE_JSONP&&this.headinfo&&(o.head=this.headinfo),this.onBeforeCompleteCallback=function(e){this.result instanceof n&&this.result.set(e,u)},this.execute(e,t,i,s,o)):typeof e=="function"&&e.call(i||this,a)}});return f.baseurl=function(e){var t=location.host,n="m.ctrip.com",r="restapi";return i.isInApp()?i.isPreProduction()=="1"?e=="https"?n="wpg.ctrip.com":n="m.ctrip.com":i.isPreProduction()=="0"?(e=="https"?n="restful.waptest.ctrip.com":n="waptest.ctrip.com",r="restapi2"):e=="https"?n="wpg.ctrip.com":n="m.ctrip.com":t.match(/^m\.ctrip\.com/i)?n="m.ctrip.com":!t.match(/^(localhost|172\.16|127\.0)/i)||location.protocol!="https"&&e!="https"?t.match(/^(localhost|172\.16|127\.0)/i)?(e=="https"?n="restful.waptest.ctrip.com":n="waptest.ctrip.com",r="restapi2"):t.match(/^10\.8\.2\.111/i)?n="10.8.2.111":!t.match(/^waptest\.ctrip|^210\.13\.100\.191/i)||location.protocol!="https"&&e!="https"?t.match(/^waptest\.ctrip|^210\.13\.100\.191/i)?(n="waptest.ctrip.com",r="restapi2"):n="m.ctrip.com":(n="restful.waptest.ctrip.com",r="restapi2"):(n="restful.waptest.ctrip.com",r="restapi2"),{domain:n,path:r}},f}),define("cSales",["cBase","cStorage","libs","CommonStore","cUtility","cModel"],function(e,t,n,r,i,s){function T(e){var t=".__hreftel__",n=".__conttel__",r=".__appaddress__";$(e[0]).find(t).each(function(){this.href=E(this.href)}),$(e[0]).find(n).each(function(){var e=$(this);e.html(E(e.html()))}),$(r).each(function(){var e=x();if(!e)switch(!0){case y:e=$(this).attr("data-ios-app");break;case b:e=$(this).attr("data-android-app");break;case w:e=$(this).attr("data-win-app")}e&&$(this).attr("href",e)})}var o=null,u=r.SalesObjectStore.getInstance(),a=function(e){return s.baseurl(e)},f=function(n,r,i){var s=u.get(n);if(s)o=s,r&&r(s);else{var f=a(),l="http://"+(f&&f.domain)+"/html5/ClientData/GetSalesInfo/"+n;$.ajax({url:l,type:"GET",dataType:"json",success:$.proxy(function(s){var a={};if(s.ServerCode==1){if(s.Data){for(var f in s.Data)a[f.toLowerCase()]=s.Data[f];s.Data=a,u.set(s.Data,n);var l=30;s.Data&&(s.Data.sales==="ydwxcs"||s.Data.sales==="1622")&&(l=5),t.localStorage.oldSet("SALESOBJ",JSON.stringify({data:s.Data,timeout:(new e.Date(e.getServerDate())).addDay(l).format("Y/m/d H:i:s")}))}o=s.Data,r&&r(s.Data)}else i&&i(s)},this),error:$.proxy(function(e){i&&i(e)},this)})}},l=function(){return o},c=function(e){r.SalesStore.getInstance().set({sales:e})},h=function(e){r.SalesStore.getInstance().set({sourceid:e})},p=function(e){r.UnionStore.getInstance().set(e)},d=/400\d{3}\d{4}/i,v=/400\s+\d{3}\s+\d{4}/i,m=/400-\d{3}-\d{4}/i,g=navigator.userAgent,y=!!g.match(/(ipad|iphone)/i),b=!!g.match(/android/i),w=!!g.match(/MSIE/i),E=window.replaceStrTel=function(e){var t=l();return typeof e=="string"&&t&&t.tel&&(e=e.replace(d,t.tel),e=e.replace(v,t.teltitle),t.teltitle&&(e=e.replace(m,t.teltitle.split(" ").join("-")))),e},S=function(){var e=null;return y?e="ios-app":b?e="andreod-app":w&&(e="win-app"),e},x=function(e){var t=l();if(t){t.isseo&&$(".module").show();if(t.appurl)return t.appurl;var e=t.sid?t.sid:t.sales;return"/market/download.aspx?from="+e}return null};return{replaceContent:T,replaceStrTel:E,setSales:c,getSales:l,getSalesObject:f,setUnion:p,setSourceId:h}}),function(){var e={t:1500,hasApp:!1,key:"HAS_CTRIP_APP",appProtocol:"ctrip://wireless",openApp:function(t,n,r){var i=e.getAppData();if(i&&i!="")return i.hasApp?typeof t=="function"?t()&&(window.location=r):window.location=r:typeof n=="function"&&n(),"";var s=Date.now(),o=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",u=o.indexOf("android",0)!=-1||o.indexOf("adr",0)!=-1?1:0,a=u&&o.indexOf("chrome",0)!=-1,f=$('<iframe style="display: none;"></iframe>');f.attr("src",r),$("body").append(f),a?(setTimeout(function(){typeof n=="function"&&n()},1),window.location.href=r):setTimeout(function(){e.testApp(s)},e.t),e.setTestResult(t,n)},testApp:function(t){var n=Date.now();if(!t||n-t<e.t+200)e.hasApp=!1},setTestResult:function(t,n){setTimeout(function(){e.hasApp?typeof t=="function"&&t():typeof n=="function"&&n();var r=new Date;r.setHours(r.getHours()+1);var i={value:{hasApp:e.hasApp},timeout:r.toUTCString()};window.localStorage.setItem(e.key,JSON.stringify(i)),window.hasApp=e.hasApp},e.t+1e3)},getAppData:function(){return"";var t,n}};window.AppUtility=e}();var adOptions=adOptions||{};adOptions.__propertys__=function(){},adOptions.initialize=function(e,t){this.data=t||{},this.storeKey="APP_DOWNLOAD",e(t)},adOptions.update=function(e){this.isInFooter&&(this.remove(),this.isCreate=!1),this.rootBox=e.rootBox,this.root||(this.root=this.rootBox),this.isInFooter=!!this.rootBox.hasClass("js_in_Footer"),this.addEvent&&(this.removeEvent("onShow"),this.addEvent("onShow",this.onShow))},adOptions.createHtml=function(){var e=adOptions.getUrlParam("sourceid"),t=adOptions.getUrlParam("sales"),n=adOptions.getUrlParam("allianceid"),r=adOptions.getUrlParam("sid"),i=this.isInFooter?"":"fix_bottom",s="/market/download.aspx?from=H5",o=adOptions._get("SALES_OBJECT"),u=adOptions._get("UNION"),a=adOptions._getCookie("UNION"),f="";n&&n.length>0&&r&&r.length>0&&(f="display:none;");if(u||a)f="display:none;";if(o&&o.sid&&+o.sid>0){if(!o.appurl||o.appurl.length<=0)f="display:none;";s=o.appurl?o.appurl:"/market/download.aspx?from="+o.sid}if(e&&e.length>0){var l=0,c=["497","1107","1108","3516","3512","3511","3503","3513","1595","1596","3524","3517","3518","1591","1825","1826","1827","1828","1829","1830","1831","1832","1833"];for(var h=0,p=c.length;h<p;h++){var d=c[h];if(d==e){l=1;break}}l&&(f="display:none;")}return adOptions.isAutoDown(o.sid)&&(f="display:none;"),this.checkDeviceSupport()==0&&(f="display:none;"),f.length>0?($("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),adOptions.saveExpire(1),""):['<div id="dl_app" style="'+f+'" class="',i,'"> <div id="icon_text" class="txt_middle"><img src="http://res.m.ctrip.com/html5/content/images/icon_text_s6.png"/></div>',' <a href="'+s+'" id="app_link" class="txt_middle __appaddress__"><img src="http://res.m.ctrip.com/html5/content/images/icon_open_s6.png"/></a>','<div id="close_icon"></div>',"</div>"].join("")},adOptions.getUrlParam=function(e){var t=document.location.href||"",n=new RegExp("(\\?|&)"+e+"=([^&]+)(&|$)","i"),r=t.match(n);return r?r[2]:""},adOptions.setAppUrl=function(){var e=adOptions._get("SALES_OBJECT"),t=AppUtility.appProtocol,n=null,r=null,i=null,s=null,o=null,u=null,a=null,f=null,l=null,c=null,h=null,p=null,d=null,v=$("#page_id").val(),m=new RegExp("-","g"),g=new RegExp("/","g");if(v&&+v>0){if(+v==212092||+v==212093||+v==212094){n=+v==212092?"hotel_inquire":+v==212093?"hotel_inland_list":+v==212094?"InlandHotel":"",r=window.localStorage?window.localStorage.getItem("HOTELSEARCHINFO"):null;if(r){r=JSON.parse(r),+v==212092&&(r.data&&(i=r.data.CheckInDate.replace(m,""),s=r.data.CheckOutDate.replace(m,""),o=r.data.CheckInCityID,u=r.data.DistrictId?+r.data.DistrictId<=0?"":r.data.DistrictId:"",a=r.data.BrandId,f=r.data.BrandName,l=0),n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"")+"&c4="+(u||"")+"&c5="+(a||"")+"&c6="+(f||"")+"&c7="+(l||"")),+v==212093&&(r.data&&(i=r.data.CheckInDate.replace(m,""),s=r.data.CheckOutDate.replace(m,""),o=r.data.CheckInCityID,u=r.data.DistrictId?+r.data.DistrictId<=0?"":r.data.DistrictId:"",a=0,f=r.data.BrandId?+r.data.BrandId<=0?"":r.data.BrandId:"",l=r.data.BrandName||"",c=0),n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"")+"&c4="+(u||"")+"&c5="+(a||"")+"&c6="+(f||"")+"&c7="+(l||""));if(+v==212094){r.data&&(i=r.data.CheckInDate.replace(m,""),s=r.data.CheckOutDate.replace(m,""),o=r.data.CheckInCityID);var y=window.localStorage?window.localStorage.getItem("HOTELDETAIL"):null;y&&(y=JSON.parse(y),y&&y.data&&(u=y.data.HotelID)),n+="?checkInDate="+(i||"")+"&checkOutDate="+(s||"")+"&cityId="+(o||"")+"&hotelId="+(u||"")}}}if(+v==212001||+v==214008)n=+v==212001?"hotel_groupon_list":+v==214008?"hotel_groupon_detail":"",+v==212001&&(r=window.localStorage?window.localStorage.getItem("TUAN_SEARCH"):null,r=r?JSON.parse(r):null,i=r&&r.value?r.value.ctyId:"2",n+="?c1="+(i||"2")),+v==214008&&(r=window.localStorage?window.localStorage.getItem("TUAN_DETAILS"):null,r=r?JSON.parse(r):null,i=r&&r.value?r.value.id:null,n+="?c1="+(i||""));if(+v==212003||+v==212004||+v==212009||+v==214019){r=window.localStorage?window.localStorage.getItem("FLIGHT_SEARCH"):null,r=r?JSON.parse(r):null,r&&r.value&&r.value._items&&r.value._items.length>0&&(i=r.value.tripType,s=r.value._items[0].dCtyId,o=r.value._items[0].aCtyId,u=r.value._items[0].date.replace(g,""),i&&+i>1&&r.value._items.length>1&&(a=r.value._items[1].date.replace(g,"")),f="",l="",c="",h="",p="",d=""),+v==212003&&(n="flight_inquire");if(+v==212009||+v==212004)n=i&&+i>1?"flight_inland_tolist":"flight_inland_singlelist";+v==214019&&(n=i&&+i>1?"flight_int_tolist":"flight_int_singlelist"),n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"")+"&c4="+(u||"")+"&c5="+(a||"")+"&c6="+(f||"")+"&c7="+(l||"")+"&c8="+(c||"")+"&c9="+(h||"")+"&c10="+(p||"")+"&c11="+(d||"")}}return t+=n?"/"+n:"",t.indexOf("?")<=-1&&(t+="?v=2"),e&&e.sid&&+e.sid>0?t+="&extendSourceID="+e.sid:t+="&extendSourceID=8888",t},adOptions.onShow=function(){this.root.off("click"),this.root.find("#close_icon").on("click",$.proxy(function(){this.saveExpire(1),this.hide(),$("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")},this));var e=this;this.root.find("#app_link").on("click",function(t){t.preventDefault();var n=$(this).attr("href"),r=adOptions.setAppUrl(),i=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",s=i.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0;return s?(window.location=r,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return e.saveExpire(),!0},function(){window.location=n},r),!1}),this.checkDeviceSupport()==0&&(this.root.attr("id")=="dl_app"&&this.root.hide(),$("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"))},adOptions.checkDeviceSupport=function(){var e=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",t=e.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0,n=e.indexOf("android",0)!=-1||e.indexOf("adr",0)!=-1?1:0;return t==0&&n==0?!1:!0},adOptions.saveExpire=function(e){var t={isExpire:1},n=new Date;e&&(t.isClose=e),n.setDate(n.getDate()+1),this.storeKey||(this.storeKey="APP_DOWNLOAD"),this._set(this.storeKey,t,n.toUTCString())},adOptions.saveAutoDown=function(e){var t={isAutoDown:1,sid:e},n=new Date;n.setDate(n.getDate()+1),this._set("APP_AUTODOWNLOAD",t,n.toUTCString())},adOptions.appDownload=function(){var e=this,t=adOptions._get("SALES_OBJECT"),n=AppUtility.appProtocol;t&&t.sid&&+t.sid>0?n+="?extendSourceID="+t.sid:n+="?extendSourceID=8888";var r=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",i=r.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0;i?(window.location=n,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return!0},function(){var e="http://m.ctrip.com/market/download.aspx?from=H5";t&&(t.appurl&&t.appurl.length>0?e=t.appurl:t.sid&&+t.sid>0&&(e="http://m.ctrip.com/market/download.aspx?from="+t.sid)),window.location.href=e},n)},adOptions.checkForceDownload=function(e){var t=this;if(!e||e.length<=0||+e<=0)return;var n=adOptions._get("SALES_OBJECT"),r=AppUtility.appProtocol;n&&n.sid&&+n.sid>0?r+="?extendSourceID="+n.sid:r+="?extendSourceID=8888";if(navigator.connection&&navigator.connection.type!=navigator.connection.WIFI){adOptions.saveExpire(1),adOptions.saveAutoDown(e);return}if(adOptions.isAutoDown(e)){adOptions.saveExpire(1),adOptions.saveAutoDown(e);return}var i=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",s=i.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0;s?(adOptions.saveExpire(1),adOptions.saveAutoDown(e),window.location=r,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return adOptions.saveExpire(1),adOptions.saveAutoDown(e),t.root.attr("id")=="dl_app"&&t.root.hide(),!0},function(){var r=i.indexOf("android",0)!=-1||i.indexOf("adr",0)!=-1?1:0;if(r){var s="http://m.ctrip.com/market/download.aspx?from="+e+"&App=3";n&&n.sid&&+n.sid>0&&+n.sid==+e&&n.appurl&&n.appurl.length>0&&(s=n.appurl),adOptions.saveExpire(1),adOptions.saveAutoDown(e),t.root.attr("id")=="dl_app"&&t.root.hide(),window.location.href=s}},r)},adOptions.create=function(){if(!this.isCreate&&!this.isExpire()&&this.status!==this.STATE_ONCREATE){var e=this.createHtml();e&&e.length>0&&(this.root=$(e),this.rootBox.append(this.root),this.trigger("onCreate")),this.isCreate=!0}else $("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85")},adOptions.isExpire=function(){var e=this._get(this.storeKey);return e&&e.isClose?!0:!1},adOptions.isAutoDown=function(e){var t=this._get("APP_AUTODOWNLOAD");return t&&t.isAutoDown?!0:!1},adOptions._getCookie=function(e){var t=null;if(e){var n=new RegExp("\\b"+e+"=([^;]*)\\b"),r=n.exec(document.cookie);t=r&&unescape(r[1])}else{var i=document.cookie.split(";"),s,o;t={};for(s=0,len=i.length;s<len;s++)o=i[s].split("="),t[o[0]]=unescape(o[2])}return t},adOptions._get=function(e){var t=window.localStorage.getItem(e);if(t){t=JSON.parse(t);if(Date.parse(t.timeout)>=new Date)return t.value||t.data}return""},adOptions._set=function(e,t,n){var r={value:t,timeout:n};window.localStorage.setItem(e,JSON.stringify(r))};if(window.location.pathname.indexOf("webapp")>-1||window.localStorage.getItem("isInApp"))define("cAdView",["cBase","cUIAbstractView","libs","cStore"],function(e,t,n,r){var i=new e.Class(t,adOptions);return i.getInstance=function(){return this.instance?this.instance:this.instance=new this},i});else{adOptions.show=function(){this.status="",this.create(),this.onShow()},adOptions.hide=function(){this.root.hide()},adOptions.trigger=function(){},adOptions.remove=function(){$("#dl_app").remove()};var config={rootBox:$("#footer")};adOptions.initialize(function(){},config);var AdView=adOptions;AdView.update(config),AdView.show()}define("cView",["libs","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cSales","cStorage","cBase","CommonStore","cUtility","cAdView"],function(e,t,n,r,i,s,o,u,a,f,l,c){function h(e,t,n){e&&e.originalEvent&&alert(e.originalEvent.message+" "+t+" "+n)}var p=u.localStorage;return document.body&&(document.body.tabIndex=1e4),Backbone.View.extend({ENUM_STATE_NOCREATE:0,ENUM_STATE_CREATE:1,ENUM_STATE_LOAD:2,ENUM_STATE_SHOW:3,ENUM_STATE_HIDE:4,pageid:0,scrollPos:{x:0,y:0},header:null,footer:null,cSales:o,warning:null,alert:null,onCreate:function(){},viewInitialize:function(){},initialize:function(e,o,u){this.$el.addClass("sub-viewport"),this.id=_.uniqueId("viewport"),this.$el.attr("id","id_"+this.id),this.viewname=u,this.pageid&&this.$el.attr("page-id",this.pageid),this.viewdata={},this.appliction=o,this.request=e,this.$el.attr("page-url",this.request.viewpath),this.state=this.ENUM_STATE_CREATE,this.alert=new t({title:"鎻愮ず淇℃伅",message:"",buttons:[{text:"鐭ラ亾浜�",click:function(){this.hide()}}]}),this.warning=new n({title:""}),this.headwarning=new r({title:""}),this.warning404=new i,this.toast=new s,_.isArray(this.css)&&this.appliction.appendCss(this.css),c&&(this.footer=c.getInstance()),this.debug();try{this.onCreate()}catch(a){}},_initializeHeader:function(){var e=this;this.header.backUrl&&this.$el.on("click","#js_return",function(){e.back(e.header.backUrl)}),this.header.home&&this.$el.delegate("#js_home","click",function(){e.home()}),this.header.phone&&this.$el.find("#js_phone").attr("href","tel:"+this.header.phone),this.header.title&&this.$el.find("header h1").text(this.header.title),this.header.subtitle&&this.$el.find("header p").text(this.header.subtitle),this.header.rightAction&&this.$el.delegate("header div","click",this.header.rightAction)},_initializeFooter:function(){this.footer&&this.footer.hide();if(l.isInApp())return;if(this.hasAd&&!this.footer.isExpire()){var e=this.adContainer?this.$el.find("#"+this.adContainer):$("#footer"),t=this.footer.rootBox;t&&t.attr("id")!=e.attr("id")&&(this.footer.remove(),this.footer.isCreate=!1),this.footer.update({rootBox:e}),this.footer.show()}},__onLoad:function(e){this.getServerDate(),this.disposeChannel(),this.header=this._getDefaultHeader(),this.state=this.ENUM_STATE_LOAD,this.onLoad&&this.onLoad(e)},__onShow:function(){document.body&&document.body.focus(),document.activeElement.blur(),this.state=this.ENUM_STATE_SHOW,window.scrollTo(0,0);try{this.onShow&&this.onShow()}catch(e){}this._sendUbt(),this._initializeHeader(),this._initializeFooter(),this.__updateSales(this.$el),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this._sendGa(),this._sendKenshoo(),this.resetViewMinHeight()},resetViewMinHeight:function(){},__onHide:function(e){this.state=this.ENUM_STATE_HIDE,this.onHide&&this.onHide(e),this.hideHeadWarning(),this.hideWarning(),this.hideLoading(),this.hideWarning404(),this.hideToast(),this.onBottomPull&&this.removeScrollListener(),this.scrollPos={x:window.scrollX,y:window.scrollY}},turning:function(){this.appliction.turning()},showLoading:function(){this.appliction.showLoading()},hideLoading:function(){this.loadingTimer&&clearTimeout(this.loadingTimer),this.appliction.hideLoading()},forward:function(e,t){this.appliction.forward.apply(null,arguments)},back:function(e){this.appliction.back.apply(null,arguments)},jump:function(e,t){l.isInApp()?(e=e.replace(window.BASEURL,""),this.forward(e)):t?window.location.replace(e):window.location.href=e},home:function(){this.appliction.forward("")},setTitle:function(e){this.appliction.setTitle("鎼虹▼鏃呰缃�-"+e)},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},getQuery:function(e){return this.request.query[e]||null},getPath:function(e){return this.request.path[e]||null},getRoot:function(){return this.request.root||null},showMessage:function(e,t){this.alert.setViewData({message:e,title:t}),this.alert.show()},showWarning:function(e,t){e&&this.warning.setTitle(e,t),this.warning.show()},hideWarning:function(){this.warning.hide()},showHeadWarning:function(e,t,n){e&&this.headwarning.setTitle(e,t,n),this.headwarning.show()},hideHeadWarning:function(){this.headwarning.hide()},showWarning404:function(e){e&&this.warning404.retryClick(e),this.warning404.show()},hideWarning404:function(){this.warning404.hide()},showNoHeadWarning:function(e,t){e&&this.NoHeadWarning.setContent(e,t),this.NoHeadWarning.show()},showToast:function(e,t,n,r){if(this.toast.isShow())return;r=typeof r!="undefined"?r:!0,this.toast.show(e,t,n,r)},hideToast:function(){this.toast.hide()},updateHeader:function(e){for(var t in e)this.header[t]=e[t];this._initializeHeader()},_getDefaultHeader:function(){return{backUrl:null,home:!1,phone:null,title:null,subtitle:null,rightAction:null}},__updateSales:function(e){var t=location.host,n=document.referrer,r="";if(t&&n.indexOf(t)===-1){n=n.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),n.indexOf("baidu")>-1&&(r="SEO_BAIDU"),n.indexOf("google")>-1&&(r="SEO_GOOGLE"),n.indexOf("soso.com")>-1&&(r="SEO_SOSO"),n.indexOf("sogou")>-1&&(r="SEO_SOGOU"),n.indexOf("m.so.com")>-1&&(r="SEO_SO"),n.indexOf("so.360")>-1&&(r="SEO_360SO"),n.indexOf("bing.com")>-1&&(r="SEO_BING"),n.indexOf("yahoo")>-1&&(r="SEO_YAHOO"),n.indexOf("youdao")>-1&&(r="SEO_YOUDAO");if(n.indexOf("jike.com")>-1||n.indexOf("babylon.com")>-1||n.indexOf("ask.com")>-1||n.indexOf("avg.com")>-1||n.indexOf("easou.com")>-1||n.indexOf("panguso.com")>-1||n.indexOf("yandex.com")>-1)r="SEO_360SO"}var i=window.localStorage.getItem("SOURCEID"),s=this.getQuery("sourceid"),a=this.getQuery("sales"),l=f.SalesStore.getInstance().get(),c=this.getQuery("sales")||r||l&&l.sales,h=this.getQuery("sourceid")||i||l&&l.sourceid;(s&&+s>0||a&&a.length>0)&&u.localStorage.oldRemove("APP_DOWNLOAD");if(c||h)c&&o.setSales(c),h&&o.setSourceId(h),o.getSalesObject(c||h,$.proxy(function(t){if(!t.appurl||t.appurl.length<=0)if(this.footer&&this.footer.rootBox){var n=this.footer.rootBox.find("#dl_app");n.length>0&&n.hide()}this.warning404.tel=t.tel?t.tel:"4000086666",o.replaceContent(e)},this));else if(t&&n.indexOf(t)===-1){n=n.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),n.indexOf("baidu")>-1&&(c="SEO_BAIDU"),n.indexOf("google")>-1&&(c="SEO_GOOGLE"),n.indexOf("soso.com")>-1&&(c="SEO_SOSO"),n.indexOf("sogou")>-1&&(c="SEO_SOGOU"),n.indexOf("m.so.com")>-1&&(c="SEO_SO"),n.indexOf("so.360")>-1&&(c="SEO_360SO"),n.indexOf("bing.com")>-1&&(c="SEO_BING"),n.indexOf("yahoo")>-1&&(c="SEO_YAHOO"),n.indexOf("youdao")>-1&&(c="SEO_YOUDAO");if(n.indexOf("jike.com")>-1||n.indexOf("babylon.com")>-1||n.indexOf("ask.com")>-1||n.indexOf("avg.com")>-1||n.indexOf("easou.com")>-1||n.indexOf("panguso.com")>-1||n.indexOf("yandex.com")>-1)r="SEO_360SO";c&&o.setSales(c),setTimeout(function(){o.replaceContent(e)},1)}},getServerDate:function(e){return l.getServerDate(e)},now:function(){return l.getServerDate()},debug:function(){var e=this.request.query.debug||p.get("DEBUG");e=="yes"?($(window).unbind("error",h),$(window).bind("error",h),p.set("DEBUG",e,(new a.Date(a.getServerDate())).addDay(1).valueOf())):e=="no"&&($(window).unbind("error",h),p.remove("DEBUG"))},_sendUbt:function(){if(window.$_bf&&window.$_bf.loaded==1){if(this.pageid==0)return;var e=this._getAurl(),t=this.request.query,n=$("#page_id"),r=$("#bf_ubt_orderid"),i=location.protocol+"//"+location.host+e,s=+this.pageid;l.isInApp()&&(s+=1e3,i="http://hybridm.ctrip.com/"+e.substr(e.indexOf("webapp"))),n.length==1&&n.val(s),r.length==1&&(t&&t.orderid?r.val(t.orderid):r.val("")),window.$_bf.asynRefresh({page_id:s,url:location.protocol+"//"+location.host+e})}else l.isInApp()||setTimeout($.proxy(this._sendUbt,this),300)},_sendGa:function(){if(typeof _gaq!="undefined"){var e=this._getAurl();_gaq.push(["_trackPageview",e])}else setTimeout($.proxy(this._sendGa,this),300)},_sendKenshoo:function(){var e=this.request.query;if(e&&e.orderid){var t="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";t+="&val="+e.val+"&orderId="+e.orderid+"&type="+e.type;var n="https://tracker.marinsm.com/tp?act=2&cid=6484iki26001&orderid="+e.orderid+"&convtype="+e.type+"&price="+e.val+"&script=no",r="<img width='1' height='1' src='"+t+"'/><img width='1' height='1' src='"+n+"'/>";$("body").append(r)}},_getAurl:function(){var e=this.request.root,t;return this.request.viewpath&&(e+="#"+this.request.viewpath),this.request.path.length>0&&(t=$.param(this.request.query),e+="!"+this.request.path.join("/")+(t.length?"?"+t:"")),e},disposeChannel:function(){var e=this.getQuery("allianceid"),t=this.getQuery("sid"),n=this.getQuery("ouid"),r;if(e&&t){r={AllianceID:e,SID:t,OUID:n},f.UnionStore.getInstance().set(r);if(this.footer&&this.footer.rootBox){var i=this.footer.rootBox.find("#dl_app");i.length>0&&i.hide()}}else{var s=location.host,o=document.referrer;if(s&&o.indexOf(s)===-1){o=o.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),o.indexOf("baidu")>-1&&(e=e||"4897",t=t||"353693",n=n||""),o.indexOf("google")>-1&&(e=e||"4899",t=t||"353694",n=n||""),o.indexOf("soso.com")>-1&&(e=e||"4900",t=t||"353696",n=n||""),o.indexOf("sogou")>-1&&(e=e||"4901",t=t||"353698",n=n||""),o.indexOf("m.so.com")>-1&&(e=e||"5376",t=t||"353699",n=n||""),o.indexOf("so.360")>-1&&(e=e||"5376",t=t||"353700",n=n||""),o.indexOf("bing.com")>-1&&(e=e||"4902",t=t||"353701",n=n||""),o.indexOf("yahoo")>-1&&(e=e||"4903",t=t||"353703",n=n||""),o.indexOf("youdao")>-1&&(e=e||"4904",t=t||"353704",n=n||"");if(o.indexOf("jike.com")>-1||o.indexOf("babylon.com")>-1||o.indexOf("ask.com")>-1||o.indexOf("avg.com")>-1||o.indexOf("easou.com")>-1||o.indexOf("panguso.com")>-1||o.indexOf("yandex.com")>-1)e=e||"5376",t=t||"353700",n=n||"";if(e&&t){r={AllianceID:e,SID:t,OUID:n},f.UnionStore.getInstance().set(r);if(this.footer&&this.footer.rootBox){var i=this.footer.rootBox.find("#dl_app");i.length>0&&i.hide()}}}}},getGuid:function(){return l.getGuid()}})}),define("cDataSource",["libs","cBase"],function(e,t){var n=new t.Class({__propertys__:function(){this.data,this.filters=[],this.group={},this.isUpdate=!0},initialize:function(e){this.setOption(e)},setOption:function(e){e=e||{};for(var t in e)switch(t){case"data":this.setData(data)}},filter:function(e,t){if(typeof e!="function")throw"Screening function did not fill in";var n=function(t,n){return e(n,t)};return this.filters=_.filter(this.data,n),this.filters=this.filters||[],typeof t=="function"?this.filters.sort(t):this.filters},groupBy:function(e,t){return this.group=_.filter(this.data,t),this.group=_.groupBy(this.group,e),this.group},setData:function(e){this.data=e,this.isUpdate=!0}});return n}),define("cUIAnimation",[],function(){return{slideleft:function(e,t,n,r){e.$el.addClass("animatestart"),e.$el.addClass("sliderightin");var i=this;return setTimeout(function(){e.$el.removeClass("animatestart"),e.$el.removeClass("sliderightin"),t.$el.hide(),e.$el.show(),n&&n.call(r)},340)},slideright:function(e,t,n,r){t.$el.addClass("animatestart"),t.$el.addClass("sliderightout");var i=this;return setTimeout(function(){t.$el.removeClass("animatestart"),t.$el.removeClass("sliderightout"),t.$el.hide(),e.$el.show(),n&&n.call(r)},340)},fadeIn:function(e,t,n,r){this.mainframe.hide(),this.viewport.children(".sub-viewport").hide(),e.$el.show(),this.mainframe.show(),n&&n.call(r||this)}}}),define("cUICitylist",["libs","cBase","cUIBase"],function(e,t,n){var r=new t.Class({__propertys__:function(){this.element=null,this.groupOpenClass="cityListClick",this.selectedCityClass="citylistcrt",this.autoLocCity=null,this.selectedCity=null,this.defaultData="inland",this.itemClickFun=null,this.data=null,this.autoLoc=!!navigator.geolocation,this.listType=this.defaultData},initialize:function(e){this.setOption(e),this.assert(),this._init()},_init:function(){this.renderCityGroup(),this.data&&(this.renderData=this.data[this.defaultData]||[],this.bindClickEvent())},setOption:function(e){for(var t in e)switch(t){case"groupOpenClass":case"selectedCityClass":case"selectedCity":case"itemClickFun":case"defaultData":case"autoLoc":case"autoLocCity":case"data":this[t]=e[t];break;case"element":this[t]=$(e[t])}},assert:function(){if(!this.element&&this.element.length==0)throw"not override element property"},renderCityGroup:function(){var e=[];this.autoLocCity&&this.autoLocCity.listType==this.listType&&this.autoLocCity.name&&(e.push('<li id="'+n.config.prefix+'curCity" data-ruler="item"'),!this.selectedCity||this.autoLocCity.name==this.selectedCity.name?e.push(' class="'+this.selectedCityClass+'" '):e.push(' class="noCrt"'),e.push(' data-value="'+this.autoLocCity.name+'"'),e.push(">褰撳墠鍩庡競</li>")),e.push('<li id="hotCity" data-ruler="group" data-group="hotCity" class="'+this.groupOpenClass+'" >鐑棬鍩庡競</li>');var t="ABCDEFGHJKLMNOPQRSTWXYZ".split("");for(var r in t)e.push('<li data-ruler="group" data-group="'+t[r]+'" id="'+t[r]+'">'+t[r]+"</li>");this.element.html(e.join(""))},groupClickHandler:function(e,t){var e=$(e),r=e.attr("data-group")||e.attr("id");if(e.children().length==0){var i=[];try{i=this.renderData[r]}catch(s){0;return}var o=[];o.push("<ul>");for(var u=0,a=i.length;u<a;u++){var f=i[u];o.push('<li class data-ruler="item" data-id="'+f.id+'"'),o.push(">"+f.name+"</li>")}o.push("</ul>"),e.append(o.join(""))}var l=e.attr("class");t?e.addClass(this.groupOpenClass):l&&$.inArray(this.groupOpenClass,l)?e.removeClass(this.groupOpenClass):(this.element.find("."+this.groupOpenClass).removeClass(this.groupOpenClass),e.addClass(this.groupOpenClass));var c=n.getElementPos(e[0]);c&&e.attr("id")!="hotCity"&&$(window).scrollTop(c.top-60),this.setSelectedCity(this.selectedCity)},bindClickEvent:function(){var e=this;this.element.delegate("li","click",function(t){var n=$(this).attr("data-ruler");if(n=="group")e.groupClickHandler(this);else if(n=="item"&&e.itemClickFun&&typeof e.itemClickFun=="function"){var r={id:$(this).attr("data-id"),name:$(this).attr("data-value")||$(this).html(),listType:e.listType};e.itemClickFun(r)}})},switchData:function(e){var t=this.data[e];t&&(this.listType=e,this.element.undelegate("li","click"),this.element.html(""),this.renderCityGroup(),this.renderData=t,this.groupClickHandler(this.element.find("#hotCity"),!0),this.setSelectedCity(this.selectedCity),this.bindClickEvent())},setSelectedCity:function(e){var t=this;if(e&&this.listType==e.listType&&e.name){var r=this.element.find("#"+n.config.prefix+"curCity");if(r.length>0)r.removeClass(this.selectedCityClass),r.addClass("noCrt");else if(t.autoLocCity&&t.autoLocCity.listType==this.listType&&t.autoLocCity.name){var i=[];i.push('<li id="'+n.config.prefix+'curCity"'),i.push('data-value="'+e.name+'" data-ruler="item">褰撳墠鍩庡競</li>'),this.element.prepend(i.join())}this.element.find("li").each(function(n){var r=$(this);r.html()==e.name||r.attr("data-value")==e.name?(r.removeClass("noCrt"),r.addClass(t.selectedCityClass)):r.removeClass(t.selectedCityClass)}),this.selectedCity=e}},setData:function(e){this.element.html(""),this.data=e,this._init()},openHotCity:function(e){var t=this.element.find("#hotCity");t.length>0&&this.groupClickHandler(t,!!e)}});return r}),define("cUIInputClear",["libs","cBase"],function(e,t){var n=function(){var e="placeholder"in document.createElement("input"),t=function(t,n,r,i){n||(n=""),i=i||{};var s=typeof t=="string"?$(t):t;s.each(function(){var t=$('<a class="clear-input '+n+'" href="javascript:;"><span></span></a>'),s=$(this);i.left&&t.css({left:i.left+"px",right:"auto"}),i.top&&t.css({top:i.top+"px",bottom:"auto"}),i.right&&t.css({right:i.right+"px",left:"auto"}),i.bottom&&t.css({bottom:i.bottom+"px",top:"auto"}),s.parent().addClass("clear-input-box");if(!e)var o=s.attr("placeholder"),u=$('<span class="placeholder-title'+(n?" placeholder-"+n:"")+'">'+o+"</span>");t.hide(),s.bind({focus:function(){var e=$.trim(s.val());e!=""&&t.show()},input:function(){window.setTimeout(function(){var n=s.val();n==""?t.hide():t.show(),e||(n==""?u.show():u.hide())},10)},blur:function(){var n=$.trim(s.val());e||(n==""?u.show():u.hide()),setTimeout(function(){t.hide()},200)}}),t.bind("click",function(){s.val(""),s.keyup(),t.hide(),s.focus(),s.trigger("input"),typeof r=="function"&&r.call(this)}),s.after(t),e||(s.after(u),u.bind("click",function(){s.focus()})),s.blur()})};return t}();return n}),define("cUILoading",["libs","cBase","cUILayer"],function(e,t,n){var r={},i={prefix:"cui-"},s={};return s["class"]=i.prefix+"loading",s.onCreate=function(){},s.onShow=function(){this.contentDom.html('<div class="cui-breaking-load"><div class="cui-w-loading"></div><i class="cui-white-logo"></i></div>'),this.reposition()},r.__propertys__=function(){this.contentDom,this.loadHtml=""},r.initialize=function(e){e(s)},r.setHtml=function(e){this.loadHtml=e},new t.Class(n,r)}),define("cUILoadingLayer",["libs","cBase","cUILayer"],function(e,t,n){var r={prefix:"cui-"},i={};i["class"]=r.prefix+"loading",i.onShow=function(){this.contentDom.html(['<div class="cui-grayload-text">','<div class="cui-w-loading"></div>','<i class="cui-white-logo"></i>','<i class="cui-grayload-close"></i>','<div class="cui-grayload-bfont">'+this.text+"</div>","</div>"].join("")),this.root.find(".cui-grayload-close").off("click").on("click",$.proxy(function(){this.callback&&this.callback(),this.hide()},this)),this.reposition()};var s={};return s.__propertys__=function(){this.contentDom,this.callback=function(){},this.text="鍙戦€佷腑..."},s.initialize=function(e,t,n){this.callback=t||function(){},this.text=n||"鍙戦€佷腑...",e(i)},new t.Class(n,s)}),define("cUIScrollList",["cBase"],function(e){window.initTap=function(){var e=$("#forTap");return e[0]||(e=$('<div id="forTap" style="color: White; display: none; border-radius: 60px; position: absolute; z-index: 99999; width: 60px; height: 60px"></div>'),$("body").append(e)),e},window.showMaskTap=function(e,t){var n=initTap();n[0]&&n.css({top:t+"px",left:e+"px"}),n.show(),setTimeout(function(){n.hide()},350)};var t=function(e){e=e||{},this._checkEventCompatibility(),this._setBaseParam(e),this._initBaseDom(e),this._setDisItemNum(e),this._setSelectedIndex(e),this.init()};return t.prototype={constructor:t,_checkEventCompatibility:function(){var e="ontouchstart"in document.documentElement;this.start=e?"touchstart":"mousedown",this.move=e?"touchmove":"mousemove",this.end=e?"touchend":"mouseup",this.startFn,this.moveFn,this.endFn},_setBaseParam:function(e){this.setHeight=0,this.itemHeight=0,this.dragHeight=0,this.dragTop=0,this.timeGap=0,this.touchTime=0,this.moveAble=!1,this.moveState="up",this.oTop=0,this.curTop=0,this.mouseY=0,this.cooling=!1,this.animateParam=e.animateParam||[50,40,30,25,20,15,10,8,6,4,2],this.animateParam=e.animateParam||[10,8,6,5,4,3,2,1,0,0,0],this.data=e.data||[],this.dataK={},this.size=this.data.length,this._changed=e.changed||null},_initBaseDom:function(e){this.wrapper=e.wrapper||$(document),this.type=e.type||"list",this.id=e.id||"id_"+(new Date).getTime(),this.className=e.className||"cui-roller-bd",this._setScrollClass(e),this._initDom(),this.wrapper.append(this.body)},_setScrollClass:function(e){var t;this.type=="list"?t="cui-select-view":this.type=="radio"&&(t="ul-list"),t=e.scrollClass||t,this.scrollClass=t},_initDom:function(){this.body=$(['<div class="'+this.className+'" style="overflow: hidden; position: relative; " id="'+this.id+'" >',"</div>"].join("")),this.dragEl=$(['<ul class="'+this.scrollClass+'" style="position: absolute; width: 100%;">',"</ul>"].join(""))},_setDisItemNum:function(e){this.disItemNum=this.data.length,this.disItemNum=this.disItemNum>5?5:this.disItemNum,this.type=="radio"&&(this.disItemNum=5),this.disItemNum=e.disItemNum||this.disItemNum,this.type=="radio"&&(this.disItemNum=this.disItemNum%2==0?this.disItemNum+1:this.disItemNum);if(this.data.length<this.disItemNum)if(this.type=="radio"){for(var t=0,n=this.disItemNum-this.data.length;t<n;t++)this.data.push({key:"",val:"",disabled:!1});this.size=this.disItemNum}else this.disItemNum=this.data.length},_setSelectedIndex:function(e){this.selectedIndex=parseInt(this.disItemNum/2),this.type=="list"&&(this.selectedIndex=-1),this.selectedIndex=e.index!=undefined?e.index:this.selectedIndex,this.selectedIndex=this.selectedIndex>this.data.length?0:this.selectedIndex,this._checkSelected()},_checkSelected:function(e){e=e||"down";var t=!1,n=this.selectedIndex;this.data[n]&&(typeof this.data[n].disabled=="undefined"||this.data[n].disabled==0)&&(e=="down"?(this.selectedIndex=this._checkSelectedDown(n),typeof this.selectedIndex!="number"&&(this.selectedIndex=this._checkSelectedUp(n))):(this.selectedIndex=this._checkSelectedUp(n),typeof this.selectedIndex!="number"&&(this.selectedIndex=this._checkSelectedDown(n)))),typeof this.selectedIndex!="number"&&(this.selectedIndex=n);var r=""},_checkSelectedUp:function(e){var t=!1;for(var n=e;n!=0;n--)if(typeof this.data[n].disabled=="undefined"||this.data[n].disabled==1){e=n,t=!0;break}return t?e:null},_checkSelectedDown:function(e){var t=!1;for(var n=e,r=this.data.length;n<r;n++)if(typeof this.data[n].disabled=="undefined"||this.data[n].disabled==1){e=n,t=!0;break}return t?e:null},init:function(){this._addItem(),this._initEventParam(),this._addEvent(),this._initScrollBar(),this.setIndex(this.selectedIndex,!0)},_addItem:function(){var e,t,n,r,i;for(var n in this.data)t=this.data[n],t.index=n,typeof t.key=="undefined"&&(t.key=t.id),typeof t.val=="undefined"&&(t.val=t.name),i=t.val||t.key,this.dataK[t.key]=t,e=$("<li>"+i+"</li>"),e.attr("data-index",n),typeof t.disabled!="undefined"&&t.disabled==0&&e.css("color","gray"),this.dragEl.append(e);this.body.append(this.dragEl)},_initEventParam:function(){if(this.data.constructor!=Array||this.data.length==0)return!1;var e=this.dragEl.offset(),t=this.dragEl.find("li").eq(0),n=t.offset();this.itemHeight=n.height,this.setHeight=this.itemHeight*this.disItemNum,this.body.css("height",this.setHeight),this.dragTop=e.top,this.dragHeight=this.itemHeight*this.size;var r=""},_addEvent:function(){var e=this;this.startFn=function(t){e._touchStart.call(e,t)},this.moveFn=function(t){e._touchMove.call(e,t)},this.endFn=function(t){e._touchEnd.call(e,t)},this.dragEl[0].addEventListener(this.start,this.startFn,!1),this.dragEl[0].addEventListener(this.move,this.moveFn,!1),this.dragEl[0].addEventListener(this.end,this.endFn,!1)},removeEvent:function(){this.dragEl[0].removeEventListener(this.start,this.startFn),this.dragEl[0].removeEventListener(this.move,this.moveFn),this.dragEl[0].removeEventListener(this.end,this.endFn)},_initScrollBar:function(){if(this.type!="list")return;this.scrollProportion=this.setHeight/this.dragHeight,this.isNeedScrollBar=!0;if(this.scrollProportion>=1)return this.isNeedScrollBar=!1,!1;this.scrollBar=$('<div style="background-color: rgba(0, 0, 0, 0.498039);border: 1px solid rgba(255, 255, 255, 0.901961); width: 5px; border-radius: 3px;  position: absolute; right: 1px;  opacity: 0.2;  "></div>'),this.body.append(this.scrollBar),this.scrollHeight=parseInt(this.scrollProportion*this.setHeight),this.scrollBar.css("height",this.scrollHeight)},_setScrollTop:function(e,t){if(this.isNeedScrollBar){e=this._getResetData(e).top,e=e<0?e+10:e;var n=e*-1;if(typeof t=="number"){var r=parseInt(n*this.scrollProportion)+"px";this.scrollBar.animate({top:r,right:"1px"},t,"linear")}else this.scrollBar.css("top",parseInt(n*this.scrollProportion)+"px");this.scrollBar.css("opacity","0.8")}},_hideScroll:function(){this.isNeedScrollBar&&this.scrollBar.animate({opacity:"0.2"})},_touchStart:function(e){e.preventDefault();var t=this;if(this.cooling)return setTimeout(function(){t.cooling=!1},50),e.preventDefault(),!1;var n=$(e.target).parent(),r;this.isMoved=!1;if(n.hasClass(this.scrollClass)){this.touchTime=e.timeStamp,r=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);var i=parseFloat(this.dragEl.css("top"))||0;this.mouseY=r.top-i,this.moveAble=!0}},_touchMove:function(e){e.preventDefault();if(!this.moveAble)return!1;var t=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);this.curTop=t.top-this.mouseY;var n=this._cheakListBound(this.curTop);n!=0&&(this.curTop=n.top),this.isMoved=!0,this.dragEl.css("top",this.curTop+"px"),this._setScrollTop(this.curTop),e.preventDefault()},_cheakListBound:function(e){var t=parseInt(this.dragHeight)-parseInt(this.setHeight),n=!1;if(this.type=="radio"){var r=parseInt(this.disItemNum/2);e>this.itemHeight*r?(e=this.itemHeight*r,n=!0):e<t*-1-this.itemHeight*r&&(e=t*-1-this.itemHeight*r,n=!0)}else e>this.itemHeight?(e=this.itemHeight,n=!0):e<t*-1-this.itemHeight&&(e=t*-1-this.itemHeight,n=!0);return n?(this.isBound=!0,{speed:1,top:e}):(this.isBound=!1,!1)},_getAnimateData:function(e){this.timeGap=e.timeStamp-this.touchTime;var t=this.oTop<=this.curTop?1:-1,n=this.curTop>0?1:-1;this.moveState=t>0?"up":"down";var r=parseFloat(this.itemHeight),i=r/2,s=Math.abs(this.curTop),o=s%r;s=(parseInt(s/r)*r+(o>i?r:0))*n;var u=parseInt(this.timeGap/10-10);u=u>0?u:0;var a=this.animateParam[u]||0,f=a*r*t;return s+=f,{top:s,speed:a}},_touchEnd:function(e){var t=this;if(this.isBound===!0&&this.isMoved===!0)return t.reset.call(t,this.curTop),!1;if(!this.moveAble)return!1;this.cooling=!0;var n=this._getAnimateData(e),r=n.top,i=n.speed,s=this._cheakListBound(r);s!=0&&(r=s.top,i=s.speed);if(this.oTop!=this.curTop&&this.curTop!=r)this.dragEl.animate({top:r+"px"},100+i*20,"linear",function(){t.reset.call(t,r)}),t._setScrollTop(r,100+i*20);else{var o=$(e.target);if(this.type=="list"){var u=this.dragEl.find("li");u.removeClass("current"),o.addClass("current")}this.selectedIndex=o.attr("data-index");if(this.type=="list"){this.onTouchEnd();if(t.start=="touchstart"){var a=e.changedTouches&&e.changedTouches[0];showMaskTap(a.pageX-30,a.pageY-30)}}this.cooling=!1}this._hideScroll(),this.moveAble=!1},_getResetData:function(e){var t=parseInt(this.type=="list"?0:this.disItemNum/2),n=e,r=!1,i=this.type=="list"?0:parseFloat(this.itemHeight)*t,s=this.type=="list"?this.setHeight:parseFloat(this.itemHeight)*(t+1),o=this.dragHeight;return e>=0&&(e>i?(n=i,r=!0):o<=i&&(n=i-this.itemHeight*(this.size-1),r=!0)),e<0&&e+this.dragHeight<=s&&(r=!0,n=(this.dragHeight-s)*-1),e==n&&(r=!1),{top:n,needReset:r}},reset:function(e){var t=this,n=this._getResetData(e).needReset,r=this._getResetData(e).top;n?t.dragEl.animate({top:r+"px"},50,"linear",function(){t._reset(r)}):t._reset(e),this._hideScroll()},_reset:function(e){this.oTop=e,this.curTop=e,this.type=="radio"&&this.onTouchEnd(),this.cooling=!1},onTouchEnd:function(e){e=e||this;var t,n,r,i,s,o=this._changed,u=parseInt(this.type=="list"?0:this.disItemNum/2);r=this.data.length,this.type=="radio"?(n=parseInt((this.curTop-this.itemHeight*u)/parseFloat(this.itemHeight)),this.selectedIndex=Math.abs(n),t=this.data[this.selectedIndex]):t=this.data[this.selectedIndex],s=!1,typeof t.disabled!="undefined"&&t.disabled==0&&(i=this.selectedIndex,this.type=="radio"&&this._checkSelected(this.moveState),i!=this.selectedIndex&&(s=!0));if(s)this.setIndex(this.selectedIndex);else{var o=this._changed;o&&typeof o=="function"&&t.disabled!=0&&o.call(e,t),this.dragEl.find("li").removeClass("current"),this.type=="radio"&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current")}},reload:function(e){this.data=e,this.dragEl.html(""),e.constructor==Array&&e.length>0&&(this.selectedIndex=parseInt(this.disItemNum/2),this.selectedIndex=this.selectedIndex>this.data.length?this.data.length-1:this.selectedIndex,this._checkSelected("down"),this._addItem(),this._initEventParam(),this.cooling=!1,this.setIndex(this.selectedIndex,!0),this.dragEl.find("li").removeClass("current"),this.type=="radio"&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current"))},setKey:function(e){if(e==undefined||e==null)return!1;var t=this.dataK[e]&&this.dataK[e].index;this.setIndex(t)},setIndex:function(e,t){if(e==undefined||e<0)return!1;var n=this,r=parseInt(n.disItemNum/2);n.type=="list"&&(this.data.length==n.disItemNum?r=e:(r=e==0?0:1,this.size-e<this.disItemNum&&(r=-1*parseInt(this.size)+parseInt(this.disItemNum)+parseInt(e))));var e=parseInt(e),i;if(e<0)return!1;e>=this.data.length&&(e=this.data.length-1),this.selectedIndex=e,i=this.itemHeight*(r-e),n.oTop=i,n.curTop=i,n.cooling=!1,n.dragEl.animate({top:i+"px"},50,"linear"),this._setScrollTop(i,50);if(n.type=="list"){var s=n.dragEl.find("li");s.removeClass("current"),s.eq(e).addClass("current")}t||n.onTouchEnd()},getSelected:function(){return this.data[this.selectedIndex]},getByKey:function(e){var t=this.dataK[e]&&this.dataK[e].index;return t!=null&&t!=undefined?this.data[t]:null},getMousePos:function(e){var t,n;return t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),{top:t+e.clientY,left:n+e.clientX}}},t}),define("cUIScrollRadio",["libs","cBase","cUILayer","cUIScrollList"],function(e,t,n,r){var i={},s={prefix:"cui-"},o={};o.class=s.prefix+"warning",o.onCreate=function(){this.root.html(['<div class="cui-pop-box" >','<div class="cui-hd">','<div class="cui-text-center">',""+this.title+"</div>","</div>",'<div class="cui-bd ">','<div class="cui-roller scrollWrapper">',"</div>",'<p class="cui-roller-tips">',""+this.tips+"</p>",'<div class="cui-roller-btns">','<div class="cui-btns-cancel cui-flexbd">'+this.cancel+'</div> <div class="cui-btns-sure cui-flexbd" >',""+this.ok+"</div>","</div>","</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.tips=this.root.find(".cui-roller-tips"),this.btCancel=this.root.find(".cui-btns-cancel"),this.btOk=this.root.find(".cui-btns-sure"),this.line=$('<div class="cui-mask-gray"></div><div class="cui-lines">&nbsp;</div>'),this.wrapper=this.root.find(".scrollWrapper")},o.onShow=function(){var e=this;this.maskToHide(function(){e.hide()});if(!this.data||this.data.length==0)return!1;for(var t=0,n=this.data.length;t<n;t++){var i={wrapper:this.wrapper,data:this.data[t],type:"radio",disItemNum:this.disItemNum,changed:function(t){return function(n){var r=e.changed[t];typeof r=="function"&&r.call(e,n)}}(t)};t==0&&n==3&&(i.className="cui-roller-bd  cui-flex2");var s=new r(i);this.scroll.push(s)}for(var t=0,n=this.data.length;t<n;t++)this.scroll[t].setIndex(this.index[t]),this.scroll[t].setKey(this.key[t]);this.wrapper.append(this.line),this.btOk.on("click",function(){var t=[];for(var n=0,r=e.scroll.length;n<r;n++)t.push(e.scroll[n].getSelected());e.okClick.call(e,t),e.hide()}),this.btCancel.on("click",function(){var t=[];for(var n=0,r=e.scroll.length;n<r;n++)t.push(e.scroll[n].getSelected());e.cancelClick.call(e,t),e.hide()}),this.setzIndexTop(),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},o.onHide=function(){for(var e=0,t=this.scroll.length;e<t;e++)this.scroll[e].removeEvent();this.btOk.off("click"),this.btCancel.off("click"),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this))},i.__propertys__=function(){var e=this;this.changed=[],this.scroll=[],this.data=[],this.index=[],this.key=[],this.disItemNum=5,this.tips="",this.btCancel,this.btOk,this.cancel="鍙栨秷",this.ok="纭畾",this.cancelClick=function(){e.hide()},this.okClick=function(){e.hide()}},i.initialize=function(e,t){this.setOption(function(e,t){this[e]=t}),e($.extend(o,t))},i.setTips=function(e){this.tips.html(e)};var u=new t.Class(n,i);return u}),define("cUIScrollRadioList",["libs","cBase","cUILayer","cUIScrollList"],function(e,t,n,r){var i={},s={prefix:"cui-"},o={};o.class=s.prefix+"warning",o.onCreate=function(){this.root.html(['<div class="cui-pop-box" lazyTap="true">','<div class="cui-hd"><div class="cui-text-center">'+this.title+"</div></div>",'<div class="cui-bd">',"</div>","</div>"].join("")),this.root.css({position:"absolute"}),this.title=this.root.find(".cui-text-center"),this.content=this.root.find(".cui-bd")},o.onShow=function(){var e=this;this.maskToHide(function(){e.hide()}),this.scroll=new r({wrapper:this.content,data:this.data,index:this.index,key:this.key,disItemNum:this.disItemNum,changed:function(t){e.hide(),e.itemClick.call(e,t)}}),this.scroll.setKey(this.key),this.setzIndexTop(),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},o.onHide=function(){this.scroll.removeEvent(),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this))},i.__propertys__=function(){this.title,this.content,this.itemClick=function(){},this.scroll=null,this.data=[],this.index=-1,this.key=null,this.disItemNum=5},i.initialize=function(e,t){this.setOption(function(e,t){this[e]=t}),e($.extend(o,t))};var u=new t.Class(n,i);return u}),define("cUIScrollLayer",["cBase"],function(e){var t=function(e){e=e||{},this._checkEventCompatibility(),this._setBaseParam(e),this._addEvent(),this._initScrollBar()};return t.prototype={constructor:t,_checkEventCompatibility:function(){var e="ontouchstart"in document.documentElement;this.start=e?"touchstart":"mousedown",this.move=e?"touchmove":"mousemove",this.end=e?"touchend":"mouseup",this.startFn,this.moveFn,this.endFn},_setBaseParam:function(e){this.timeGap=0,this.touchTime=0,this.isMoveing=!1,this.moveState="up",this.oTop=0,this.curTop=0,this.mouseY=0,this.animateParam=e.animateParam||[10,8,6,5,4,3,2,1,0,0,0],this.cooling=!0,this.steplen=25,this.wrapper=e.wrapper||$("body"),this.dragEl=e.body,this.dragEl.css("position","absolute"),this.wrapper.append(this.dragEl)},_initScrollBar:function(){this.dragHeight||(this.dragHeight=this.dragEl.offset().height,this.wrapperHeight=this.wrapper.offset().height),this.scrollProportion=this.wrapperHeight/this.dragHeight,this.isNeedScrollBar=!0;if(this.scrollProportion>=1)return this.isNeedScrollBar=!1,!1;this.scrollBar=$('<div style="background-color: rgba(0, 0, 0, 0.498039);border: 1px solid rgba(255, 255, 255, 0.901961); width: 5px; border-radius: 3px;  position: absolute; right: 1px; opacity: 0.2;  "></div>'),this.wrapper.append(this.scrollBar),this.scrollHeight=parseInt(this.scrollProportion*this.wrapperHeight),this.scrollBar.css("height",this.scrollHeight)},_setScrollTop:function(e,t){if(this.isNeedScrollBar){e=this._getResetData(e).top,e=e<0?e+10:e;var n=e*-1;if(typeof t=="number"){var r=parseInt(n*this.scrollProportion)+"px";this.scrollBar.animate({top:r,right:"1px"},t,"linear")}else this.scrollBar.css("top",parseInt(n*this.scrollProportion)+"px");this.scrollBar.css("opacity","0.8")}},_hideScroll:function(){this.isNeedScrollBar&&this.scrollBar.animate({opacity:"0.2"})},_addEvent:function(){var e=this;this.startFn=function(t){e._touchStart.call(e,t)},this.moveFn=function(t){e._touchMove.call(e,t)},this.endFn=function(t){e._touchEnd.call(e,t)},this.dragEl[0].addEventListener(this.start,this.startFn,!1),document.addEventListener(this.move,this.moveFn,!1),document.addEventListener(this.end,this.endFn,!1)},removeEvent:function(){this.dragEl[0].removeEventListener(this.start,this.startFn),document.removeEventListener(this.move,this.moveFn),document.removeEventListener(this.end,this.endFn)},_touchStart:function(e){var t=this;if(this.isMoveing)return e.preventDefault(),!1;this.cooling=!1,this.touchTime=e.timeStamp,pos=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);var n=parseFloat(this.dragEl.css("top"))||0;this.mouseY=pos.top-n},_touchMove:function(e){if(this.cooling)return e.preventDefault(),!1;this.isMoveing=!0,e.preventDefault();var t=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);if(Math.abs(t.top-this.mouseY-this.curTop)<10)return e.preventDefault(),!1;this.curTop=t.top-this.mouseY;var n=this._getResetData(this.curTop);n.needReset&&(this.curTop=this._resetEdge(this.curTop)),this.dragEl.css("top",this.curTop+"px"),this._setScrollTop(this.curTop),e.preventDefault()},_touchEnd:function(e){if(this.cooling)return e.preventDefault(),!1;if(Math.abs(this.oTop-this.curTop)<10)return e.preventDefault(),!1;this.cooling=!0;var t=this;this.timeGap=e.timeStamp-this.touchTime;var n=this.oTop<this.curTop?1:-1;this.moveState=n>0?"up":"down";var r=parseInt(this.timeGap/10-10);r=r>0?r:0;var i=this.animateParam[r]||0,s=i*this.steplen*n,o=this.curTop;o+=s;var u=this._getResetData(o);u.needReset&&(o=this._resetEdge(o),i=0);if(this.oTop!=this.curTop&&this.curTop!=o){var a=100+i*20;o+=s,this.dragEl.animate({top:o+"px"},a,"linear",function(){t.reset.call(t,o)}),this._setScrollTop(o,a)}else this.isMoveing=!1,this.oTop=o,this.reset(o),this.cooling=!1;this._hideScroll(),e.preventDefault()},_resetEdge:function(e){var t=parseInt(this.wrapperHeight/3),n=parseInt(this.dragHeight*-1+this.wrapperHeight*(2/3));return e>0&&e>t&&(e=t),e<0&&e<n&&(e=n),e},_getResetData:function(e){var t=!1;return e<-1*(this.dragHeight-this.wrapperHeight)&&(e=-1*(this.dragHeight-this.wrapperHeight),t=!0),e>0&&(e=0,t=!0),{top:e,needReset:t}},reset:function(e){var t=this,n=this._getResetData(e).needReset,e=this._getResetData(e).top;n?t.dragEl.animate({top:e+"px"},50,"linear",function(){t._reset(e)}):t._reset(e)},_reset:function(e){this.oTop=e,this.curTop=e,this.isMoveing=!1,this.cooling=!1},getMousePos:function(e){var t,n;return t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),{top:t+e.clientY,left:n+e.clientX}}},t}),define("cUIEventListener",["libs","cBase","cUICore"],function(e,t,n){var r={};return r.__propertys__=function(){this.__events__={}},r.initialize=function(e,t){},r.addEvent=function(e,t){if(!e||!t)throw"addEvent Parameter is not complete!";var n=this.__events__[e]||[];n.push(t),this.__events__[e]=n},r.removeEvent=function(e,t){if(!e)throw"removeEvent parameters must be at least specify the type!";var n=this.__events__[e],r;if(!n)return;if(t)for(var i=Math.max(n.length-1,0);i>=0;i--)n[i]===t&&n.splice(i,1);else delete n[e]},r.trigger=function(e,t,n){var r=this.__events__[e];if(r)for(var i=0,s=r.length;i<s;i++)typeof r[i]=="function"&&r[i].apply(n||this,t)},new t.Class(r)}),define("cUICore",["cHistory","cView","cDataSource","cUIBase","cUIAbstractView","cAdView","cUIAlert","cUIAnimation","cUICitylist","cUIHeadWarning","cUIInputClear","cUILayer","cUILoading","cUILoadingLayer","cUIMask","cUIPageview","cUIScrollRadio","cUIScrollRadioList","cUIScrollList","cUIScrollLayer","cUIToast","cUIWarning","cUIWarning404","cUIHashObserve","cUIEventListener"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){var N={prefix:"cui-"},C={History:e,View:t,DataSource:n,Tools:r,config:N,AbstractView:i,AdView:s,Alert:o,Animation:u,CityList:a,HeadWarning:f,InputClear:l,Layer:c,Loading:h,LoadingLayer:p,Mask:d,PageView:v,ScrollRadio:m,ScrollRadioList:g,ScrollList:y,ScrollLayer:b,Toast:w,Warning:E,HashObserve:x,EventListener:T};return C}),define("cUI",["cUICore"],function(e){return e}),define("cLazyload",["libs"],function(e){var t={};return t.lazyload=function(e,t,n,r){e=$(e),noImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEXy8vL6+vr+/v7+/v7+/v7v7+/+/v7+/v7+/v7+/v7+/v729vb+/v4AAADt7e3+/v673auIAAAADnRSTlPXrYhVZuwimTMRRMJ3AKjyf0QAAAH3SURBVHjaxdbZkqowGEXhzMM/ZL//2x6IEYh0Cd1addaFUhbJZyKKRv9TZ1iSHirpU6Gme3BB888h3kXwj8PLePZCc0F0lNn1Z0Irl3AQYVhZYnVYY/Zj+Nxze/Aa64ghYyRfrHieZ4Gz398qRV6KiNyL24AsS06e/RGuKqBKpJrWI31NIDo1Tsrt+foR9tfwLresBLcerYvplUu4oMlamGH6BWwXjREZIMGIruBq9jP/Co8pmLmsc9IC1ao6TXaCM0xfttUZnqO3MAkVgjwGaofXklDPQGgUaMA1Q0zW0kx9gQ0fK29hTUQCzuwqzA4TzslzxeJWtbszTPd/uTweNQ4C2eFiZc0hCoP7cQ6HqzpZwPoZbkj34RpZHmRlpAHveeT5+upwChlNpKFZKTsM6CU8Rxz6KvrGT59MRjjDDDRXlnNdQ6xHWLbSDZg4yxa7+UuOeoZTDrU22OUx+H2rCw7RHRiRt8A6KVbP8INxETJ9xgRDI3MPPk48wamBfoZJimqYr2rBtlv82YqrAesGU647nIHoyvxWI/yH8O62tMOCdvw6iQHsESag7vAHW+3buJ9LB0qE3eAe5XAcEZH1Cyv2jO52auSf9+OpMSID6RtwALiOLbdY4/DuH0jq1/gnWx3HgXTnnH2dE20M0F/DQvrlClU99Q/TJ4uko/HGBAAAAABJRU5ErkJggg==",loadImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",errorImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",e.each(function(){var e=$(this),t=e.attr("src"),n=$(new Image);e.addClass("cui-item-imgbg"),typeof t=="string"&&t.length>0?(e.attr("src",loadImg),n.bind("error",function(){e.attr("src",errorImg)}),n.bind("load",function(){e.attr("src",t),e.removeClass("cui-item-imgbg")}),n.attr("src",t)):e.attr("src",noImg)})},t}),define("c",["cBase","cUI","cUtility","cView","cModel","cStore","cStorage","cAjax","CommonStore","cLazyload","cLog"],function(e,t,n,r,i,s,o,u,a,f,l){var c={base:e,ui:t,view:r,utility:n,store:s,storage:o,model:i,ajax:u,log:l,commonStore:a,lazyload:f};return c}),define("App",["libs","c","cUIAnimation","cUtility","cWidgetFactory","cWidgetGuider"],function(e,t,n,r,i){var s=t.base,o="鎵嬫満棰勮涓変簹闂ㄧエ锛屼环鏍兼渶浣�",u="",a=new t.base.Class({__propertys__:function(){this.webroot="/#hotelsearch",this.head=$("head"),this.body=$("body"),this.viewRootPath="app/views/",this.defaultView="index",this.request,this.viewpath,this.mainframe,this.viewport,this.statedom,this.views=new t.base.Hash,this.maxLength=5,this.curView,this.inteface={loadView:_.bind(this.loadView,this),forward:_.bind(this.forward,this),hideLoading:_.bind(this.hideLoading,this),showLoading:_.bind(this.showLoading,this),turning:_.bind(this.turning,this),back:_.bind(this.back,this),setTitle:_.bind(this.setTitle,this),appendCss:_.bind(this.appendCss,this)},this.isCreate=!1,this.history=[],this.loading,this.css={},this.stopListening=!1,this.onHashChange=_.bind(function(){var e=window.history.length;this.history.push(window.location.href);if(!this.stopListening){var t=decodeURIComponent(window.location.hash.replace(/^#+/i,"")).toLowerCase();this._onHashChange(t)}},this),this._turning=function(){},this.timeoutres,this.lastHash="",this.lashFullHash="",this.isChangeHash=!1,this.animations=n,this.isAnimat=!0,this.isinapp=s.isInApp(),navigator.userAgent.toLowerCase().indexOf("ucbrowser")>0&&(this.isinapp=!1),this.notAnimatHandler=n.fadeIn,this.animForwardName="slideleft",this.animBackwardName="slideright",this.path=[],this.query={},this.viewMapping={}},buildUrl:function(e){var t=this.viewMapping[e];return t?t:this.viewRootPath+e},initialize:function(e){this.setOption(e),this.buildEvent(),this.createCommonUI();var t=i.create("Guider");t.create()},setOption:function(e){e=e||{};for(var t in e)switch(t){case"defaultView":case"viewRootPath":case"maxLength":case"webroot":case"path":case"query":case"baseUrl":case"viewRootPathMap":case"viewMapping":this[t]=e[t]}},lastUrl:function(){return this.history.length<2?document.referrer:this.history[this.history.length-2]},setTitle:function(e){document.title=e},localObserver:function(e,t){var n=t?this.animForwardName:this.animBackwardName;this.request=e,this.viewpath=this.request.viewpath||this.defaultView,this.request.viewpath=this.viewpath,this.switchView(this.viewpath,n)},startObserver:function(){this.stopListening=!1},endObserver:function(){this.stopListening=!0},showLoading:function(){var e=window.location.hash.replace(/^#+/i,""),t=e.substring(0,e.indexOf("/"));switch(t){case"vevent":this.loading.setHtml(o);break;default:this.loading.setHtml(u)}this.loading.show()},hideLoading:function(){this.loading.hide()},createViewPort:function(){if(this.isCreate)return;var e=['<div class="main-frame">','<div class="main-viewport"></div>','<div class="main-state"></div>',"</div>"].join("");this.mainframe=$(e),this.viewport=this.mainframe.find(".main-viewport"),this.statedom=this.mainframe.find(".main-state");var t=$("#main");t.empty(),t.append(this.mainframe),this.isCreate=!0},createCommonUI:function(){this.loading=new t.ui.Loading},buildEvent:function(){var e=this;requirejs.onError=function(n){if(n&&n.requireModules)for(var r=0;r<n.requireModules.length;r++){var i=new t.ui.Toast;i.show("鎶辨瓑锛屽綋鍓嶇殑缃戠粶鐘跺喌涓嶇粰鍔涳紝璇峰埛鏂伴噸璇�!",2,function(){e.hideLoading()})}},$(window).bind("hashchange",this.onHashChange),this.onHashChange(),$.bindFastClick&&$.bindFastClick()},switchView:function(e,t){var n=e,r=this.views.getItem(n),i,s;if(!r)this.loadView(e,function(e){this.curView?(typeof this.curView.__onHide=="function"&&this.curView.__onHide(n),i=this.curView,this.curView=new e(this.request,this.inteface,n),this.views.push(n,this.curView),s=this.curView,this._turning=_.bind(function(){this.createViewPort(),s.$el.show(),this.viewport.append(s.$el),this.startAnimation(s,i,t,$.proxy(function(){this.views.each(function(e,t){if(s===e||i===e)return!1;e.$el.hide()}),s.__onShow&&s.__onShow()},this))},this)):(this.curView=new e(this.request,this.inteface,n),this.views.push(n,this.curView),s=this.curView,this._turning=_.bind(function(){this.createViewPort(),s.$el.show(),this.viewport.append(s.$el),window.scrollTo(0,1),s.__onShow&&s.__onShow()},this));var r=(i||this.curView).viewname;typeof this.curView.__onLoad=="function"&&this.curView.__onLoad(r),this.views.length()>this.maxLength&&this.views.length()>2});else if(this.curView&&this.curView!==r){this.curView.request=this.request,typeof this.curView.__onHide=="function"&&this.curView.__onHide(n),i=this.curView,this.curView=r,s=this.curView,s.request=this.request,this._turning=_.bind(function(){this.createViewPort(),s.$el.show(),this.startAnimation(s,i,t,$.proxy(function(){this.views.each(function(e,t){if(s===e||i===e)return!1;e.$el.hide()}),this.viewport.find("#id_"+s.id).length||this.viewport.append(s.$el),s.__onShow&&s.__onShow()},this))},this);var o=(i||this.curView).viewname;typeof this.curView.__onLoad=="function"&&this.curView.__onLoad(o),this.views.push(n,r,!0)}else if(this.isChangeHash){this.curView.request=this.request,s=this.curView,this._turning=_.bind(function(){this.createViewPort(),s.$el.show(),window.scrollTo(0,1),this.viewport.find("#id_"+s.id).length||this.viewport.append(s.$el),s.__onShow&&s.__onShow()},this);var o=(i||this.curView).viewname;typeof this.curView.__onLoad=="function"&&this.curView.__onLoad(o)}},appendCss:function(e){if(!e)return;for(var t=0,n=e.length;t<n;t++)this.css[e[t]]||(this.head.append($('<link rel="stylesheet" type="text/css" href="'+e[t]+'" />')),this.css[e[t]]=!0)},turning:function(){this._turning()},startAnimation:function(e,t,n,r){n=n||this.animBackwardName,this.isinapp||(this.isAnimat=!1),this.isAnimat?this.timeoutres=this.animations[n]&&this.animations[n].call(this,e,t,r,this):this.timeoutres=this.notAnimatHandler(e,t,r,this),this.isAnimat=!0},loadView:function(e,t){var n=this;requirejs([this.buildUrl(e)],function(e){t&&t.call(n,e)})},_onHashChange:function(e,t){e=e.replace(/^#+/i,"");var n=this.parseHash(e);this.localObserver(n,t)},forward:function(e,t,n){e=e.toLowerCase(),n&&(this.isAnimat=!1),this.endObserver(),t?window.location.replace(("#"+e).replace(/^#+/,"#")):window.location.href=("#"+e).replace(/^#+/,"#"),this._onHashChange(e,!0),setTimeout(_.bind(this.startObserver,this),1)},parseHash:function(e){var t=e,e=e.replace(/([^\|]*)(?:\|.*)?$/img,"$1"),n=/^([^?&|]*)(.*)?$/i.exec(e),r=n[1]?n[1].split("!"):[],i=(r.shift()||"").replace(/(^\/+|\/+$)/i,""),s=r.length?r.join("!").replace(/(^\/+|\/+$)/i,"").split("/"):this.path,o=(n[2]||"").replace(/^\?*/i,"").split("&"),u=_.clone(this.query),a,f;this.isChangeHash=!this.lastHash&&t===this.lashFullHash||!!this.lastHash&&this.lastHash!==e;if(o)for(var l=0;l<o.length;l++)o[l]&&(a=o[l].split("="),a[1]?(f=a.shift(),u[f]=a.join("=")):u[a[0]]="");return this.lastHash=e,this.lashFullHash=t,{viewpath:i,path:s,query:u,root:location.pathname+location.search,fullhash:t}},back:function(e,t){t&&(this.isAnimat=!1);var n=this.lastUrl();e&&(!n||n.indexOf(e)!==0)?window.location.hash=e:(e=this.request.query.refer,e?window.location.href=e:history.back())}});return a}),define("cMultipleDate",["libs","c"],function(e,t){var n=t.base,r=new n.Class({__propertys__:function(){this.models=new n.Hash,this.index=0,this.results={}},initialize:function(e){this.setOption(e)},setOption:function(e){for(var t in e)switch(t){case"models":this.addModels(e[t])}},addModel:function(e,t){this.models.add(e,t)},addModels:function(e){for(var t in e)e.hasOwnProperty(t)&&this.models.add(t,e[t])},removeModelByName:function(e){this.models.del(e)},removeModelByIndex:function(e){this.models.delByIndex(e)},excute:function(e,t,n,r,i){if(!this.models.length())throw"No model";this.index=0,this._request(e,t,n,r,i)},_request:function(e,t,n,r,i){var s=this.models.index(this.index),o=this;s.excute(function(s){o.results[o.models.getKey(o.index)]=s,o.index++;if(o.index>=o.models.length()){e&&e.call(this,o.results),o.results={};return}o._request(e,t,n,r,i)},function(e){t&&t.call(this,e)},n,r,i)}});return r}),define("cListAdapter",["libs","cBase"],function(e,t){var n=n||{},r=function(e){var t="",n=function(){var e=Math.floor(Math.random()*62);return e<10?e:e<36?String.fromCharCode(e+55):String.fromCharCode(e+61)};while(t.length<e)t+=n();return t},i=function(e,t){var n=r(8);if(!e.getItem(n))return e.add(n,t);i(e,t)},s=function(e,t){for(var n=0;n<t.length;n++)i(e,t[n])};n.__propertys__=function(){this.observers=[]},n.initialize=function(e){this.setAdapter(e.data)},n.add=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)i(this.map,e[t]),this.list.push(e[t]);else i(this.map,e),this.list.push(e);this.notifyDataChanged()},n.shift=function(){return this.map.shift(),this.notifyDataChanged(),this.list.shift()},n.pop=function(){return this.map.pop(),this.notifyDataChanged(),this.list.pop()},n.remove=function(e){for(var t=0;t<e;t++)this.map.pop(),this.list.pop();this.notifyDataChanged()},n.sortBy=function(e){this.map.sortBy(e),this.list=_.sortBy(this.list,e),this.notifyDataChanged()},n.setAdapter=function(e){e=e&&e instanceof Array?e:[],this.list=$.extend(!0,[],e),this.map=new t.Hash,s(this.map,e),this.notifyDataChanged()},n.regiseterObserver=function(e){this.observers.indexOf(e)===-1&&this.observers.push(e)},n.unregiseterObserver=function(e){var t=this.observers.indexOf(e);t&&this.observers.splice(t,1)},n.notifyDataChanged=function(){for(var e=0;e<this.observers.length;e++)this.observers[e].update()};var o=new t.Class(n);return o}),define("cWidgetHeaderView",["cBase","cUICore","cWidgetFactory","cUtility","cSales","cHybridFacade"],function(e,t,n,r,i,s){function c(n){if(c.instance)return c.instance.reset(n),c.instance;var r=new e.Class(t.AbstractView,f);return c.instance=new r(n)}var o="HeaderView";if(n.hasWidget(o))return;var u=function(){var e=this.templateFactory(this.data);return $(e)},a=function(e){this.html="";if(e&&e.data){for(var t in this.htmlMap)e.data[t]&&(this.html+=this.htmlMap[t]);var n="",r=e.data.style;r&&(n=' style="'+r+'"'),this.html="<header"+n+">"+this.html+"</header>"}},f=f||{};f.__propertys__=function(){},f.initialize=function(e,t){t?(this.rootBox=t.container||$('<div id="headerview"></div>'),this.data=t.data,this.html=t.html||this.html,this.data&&(this.bindEvents=t.data.bindEvents||function(){}),a.call(this,t),t.onShow=this.onShow):(this.rootBox=$('<div id="headerview"></div>'),t={onShow:this.onShow}),e(t)},f.createHtml=function(){if(this.html)return this.templateFactory=this.template(this.html),u.call(this);return},f.onShow=function(){this.rootBox.off("click"),this.data&&this.data.btn&&typeof this.bindEvents=="function"&&(0,this.bindEvents(this.getView())),this.data&&this.data.events&&this.delegateEvents(this.data.events,this.data.view);if(this.data&&this.data.commit){var e=this.data.commit,t=this.getView(),n=this,r=function(){e.callback.call(n.view)};t.find("#"+e.id).on("click",r),s.register({tagname:s.METHOD_COMMIT,callback:r})}},f.set=function(e){e&&(this.data=e,a.call(this,{data:e}),this.bindEvents=this.data.bindEvents,this.isCreate=!1,this.hide())},f.reset=function(e){e&&(this.set(e),this.trigger("onShow"))},f.delegateEvents=function(e,t){if(e){l.call(this,"#c-ui-header-home","click",e.homeHandler,t),l.call(this,"#c-ui-header-return","click",e.returnHandler,t);var n=this,r=function(){e.returnHandler.call(t||n)};s.register({tagname:s.METHOD_BACK,callback:r})}};var l=function(e,t,n,r){this.rootBox.find(e).on(t,function(){n.call(r||this)})};f.getView=function(){return this.rootBox},f.updateHeader=function(e,t){this.data[e]=t,this.set(this.data),this.show()},f.html=null,f.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',title:"<h1><%=title %></h1>",back:'<i id="c-ui-header-return" class="returnico i_bef"></i>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%>"><%=btn.title %></i>',custom:"<%=custom %>"},f.create=function(){!this.isCreate&&this.status!==t.AbstractView.STATE_ONCREATE&&(this.rootBox=this.rootBox||$("body"),this.rootBox.empty(),this.root=$(this.createHtml()),this.rootBox.append(this.root),setTimeout($.proxy(function(){i.replaceContent(this.root)},this),200),this.rootBox.css("height",this.root.css("height")),this.trigger("onCreate"),this.status=t.AbstractView.STATE_ONCREATE,this.isCreate=!0)},f.showAction=function(e){r.isInApp()?(this.rootBox.hide(),this.saveHead()):this.root.show(),e()},f.saveHead=function(){var e={left:[],center:[],right:[]},t=this.data;t.back&&e.left.push({tagname:"back"}),t.title&&e.center.push({tagname:"title",value:t.title}),t.btn&&e.right.push({tagname:"commit",value:t.btn.title}),t.tel&&e.right.push({tagname:"call"}),t.home&&e.right.push({tagname:"home"});try{var n=JSON.stringify(e);s.request({name:s.METHOD_REFRESH_NAV_BAR,config:n})}catch(r){}},n.register({name:o,fn:c})}),define("cBasePageView",["libs","c","cWidgetFactory","cWidgetHeaderView","cWidgetGuider"],function(e,t,n){var r=n.create("Guider"),i=i||{};i.injectHeaderView=function(e){var t=n.create("HeaderView");this.headerview=new t(e),$("#main").before(this.headerview.getView())},i._initializeHeader=function(){},i._getDefaultHeader=function(){},i.hybridBridgeRender=function(){var e=this,t=$.proxy(e.showView,e),n=$.proxy(e.showView,e);r.apply({hybridCallback:t,callback:n})},i.registerCallback=function(e){},i.callAppInit=function(e){var t=0;if(window.localStorage){var n=window.localStorage.getItem("APPINFO");n=JSON.parse(n),n&&(t=n.version)}r.init({version:t,callback:e})};var s=t.view.extend(i);return s.ONCLICK="click",s}),define("cCommonPageFactory",["libs"],function(e){var t=t||{};return t.products={},t.hasPage=function(e){return!!t.products[e]},t.register=function(e){if(!(e&&e.name&&e.fn))throw"CommonPageFactory: factory is lack of necessary infomation.";if(t.products[e.name])throw"CommonPageFactory: factory has been register in CommonPageFactory";t.products[e.name]=e.fn},t.create=function(e){return t.products[e]},t}),require.config({baseUrl:"/webapp/",shim:{_:{exports:"_"},B:{deps:["_"],exports:"Backbone"},cBase:{exports:"cBase"},cAjax:{exports:"cAjax"},cView:{deps:["B"],exports:"cView"}},paths:{text:"res/libs/require.text",App:"dist/app/app",c:"dist/app/common/c",cUtility:"dist/app/common/c.utility",cBase:"dist/app/common/c.base",cLog:"dist/app/common/c.log",cValidate:"dist/app/common/c.validate",cSales:"dist/app/common/c.sales",cLazyload:"dist/app/common/c.lazyload",cListAdapter:"dist/app/common/c.common.listadapter",cGeoService:"dist/app/common/c.geo.service",rsa:"dist/app/common/c.rsa",Validate:"dist/app/common/c.validate",cAjax:"dist/app/common/c.ajax",cAbstractModel:"dist/app/model/c.abstract.model",cModel:"dist/app/model/c.model",cUserModel:"dist/app/model/c.user.model",cMultipleDate:"dist/app/model/c.multiple.data",memStore:"dist/app/store/c.memorystore",cStore:"dist/app/store/c.store",cStorage:"dist/app/store/c.storage",CommonStore:"dist/app/store/c.common.store",cUI:"dist/app/ui/c.ui",cUICore:"dist/app/ui/c.ui.core",cHistory:"dist/app/ui/c.ui.history",cView:"dist/app/ui/c.ui.view",cDataSource:"dist/app/ui/c.ui.datasource",cUIAbstractView:"dist/app/ui/c.ui.abstract.view",cAdView:"dist/app/ui/c.ui.ad",cUIAlert:"dist/app/ui/c.ui.alert",cUIAnimation:"dist/app/ui/c.ui.animation",cUIBase:"dist/app/ui/c.ui.base",cUIEventListener:"dist/app/ui/c.ui.event.listener",cUIHashObserve:"dist/app/ui/c.ui.hash.observe",cUIWarning:"dist/app/ui/c.ui.warning",cUIHeadWarning:"dist/app/ui/c.ui.head.warning",cUIInputClear:"dist/app/ui/c.ui.input.clear",cUILayer:"dist/app/ui/c.ui.layer",cUILoading:"dist/app/ui/c.ui.loading",cUILoadingLayer:"dist/app/ui/c.ui.loading.layer",cUIMask:"dist/app/ui/c.ui.mask",cUIPageview:"dist/app/ui/c.ui.page.view",cUIScrollRadio:"dist/app/ui/c.ui.scroll.radio",cUIScrollRadioList:"dist/app/ui/c.ui.scroll.radio.list",cUIScrollList:"dist/app/ui/c.ui.scrolllist",cUIScrollLayer:"dist/app/ui/c.ui.scrolllayer",cUIToast:"dist/app/ui/c.ui.toast",cUIWarning404:"dist/app/ui/c.ui.warning404",cUICitylist:"dist/app/ui/c.ui.citylist",cWidgetFactory:"dist/app/widget/c.widget.factory",cWidgetHeaderView:"dist/app/widget/c.widget.headerview",cWidgetListView:"dist/app/widget/c.widget.listview",cWidgetTipslayer:"dist/app/widget/c.widget.tipslayer",cWidgetInputValidator:"dist/app/widget/c.widget.inputValidator",cWidgetPublisher:"dist/app/widget/c.widget.publisher",cWidgetGeolocation:"dist/app/widget/c.widget.geolocation",cWidgetAbstractCalendar:"dist/app/widget/c.widget.abstract.calendar",cWidgetCalendar:"dist/app/widget/c.widget.calendar",cWidgetCalendarPrice:"dist/app/widget/c.widget.calendar.price",cWidgetSlide:"dist/app/widget/c.widget.slide",cWidgetMember:"dist/app/widget/c.widget.member",cWidgetGuider:"dist/app/widget/c.widget.guider",cWidgetCaptcha:"dist/app/widget/c.widget.captcha",cBasePageView:"dist/app/page/c.page.base",cCommonPageFactory:"dist/app/page/c.page.factory",cCommonListPage:"dist/app/page/c.page.common.list",cHybridFacade:"dist/app/hybrid/c.hybrid.facade"}}),define("app/common_r",function(){});