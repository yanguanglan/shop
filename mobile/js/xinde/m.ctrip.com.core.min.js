var ctripmobi={author:"m.ctrip.com",version:"2.0"};ctripmobi.utils={website:"/html5",fileName:".html",restful:location.host.match(/waptest\.ctrip\.com|localhost|172\.16|127\.0|210\.13/ig)?"http://waptest.ctrip.com/restapi2":"http://m.ctrip.com/restapi",canStorage:function(){return!!window.localStorage?true:false},setStorage:function(a,b){if(ctripmobi.utils.canStorage())try{localStorage.removeItem(a);localStorage.setItem(a,b)}catch(e){if(e&&e.name){var c=/(quota.*)$/,d=c.test(e.name.toLowerCase());if(d){ctripmobi.utils.MsgBox("您开启了秘密浏览或无痕浏览模式，请关闭");return}}}},getStorage:function(d){var b=null;if(ctripmobi.utils.canStorage()){var g=localStorage.getItem(d),a=b;try{a=g?JSON.parse(g):b}catch(i){a=b}if(a&&a.timeout){var c=localStorage.getItem("SERVERDATE");c=c?JSON.parse(c):b;var h=c&&c.date?Date.ParseString(c.date):new Date,e=h,f=Date.ParseString(a.timeout);if(a.timeby){if(f-e>=0)return a}else if(f-Date.ParseString(e.format("yyyy-MM-dd"))>=0)return a;localStorage.removeItem(d);return b}return a}},removeStorage:function(a,h){if(ctripmobi.utils.canStorage()){h&&localStorage.removeItem(a);var f=localStorage.getItem(a),c=f?JSON.parse(f):null;if(!c||!c.timeout)localStorage.removeItem(a);else{var b=ctripmobi.utils.getStorage("SERVERDATE"),g=b&&b.date?Date.ParseString(b.date):new Date,d=g,e=Date.ParseString(c.timeout);(e-d<0||e-Date.ParseString(d.format("yyyy-MM-dd"))<0)&&localStorage.removeItem(a)}}},setSession:function(a,b){if(window.sessionStorage)try{sessionStorage.removeItem(a);sessionStorage.setItem(a,b)}catch(c){c.name=="QUOTA_EXCEEDED_ERR"&&ctripmobi.utils.MsgBox("您开启了秘密浏览或无痕浏览模式，请关闭")}},getSession:function(b){if(window.sessionStorage)try{var a=sessionStorage.getItem(b);return a?JSON.parse(a):null}catch(c){return null}},removeSession:function(a){window.sessionStorage&&sessionStorage.removeItem(a)},cleanSession:function(){window.sessionStorage&&sessionStorage.clear()},getUrlParam:function(c,b){var d=document.location.search,e=new RegExp("(\\?|&)"+c+"=([^&]+)(&|$)","i"),a=d.match(e);return a?a[2]:b?null:""},getFromUrl:function(){var a=document.location.search;if(a&&a.length>0){var b=ctripmobi.utils.getUrlParam("from");return b||""}return""},getUserInfo:function(){var b="USERINFO",a=ctripmobi.utils.getStorage(b);if(a&&a.data&&a.data.Auth&&a.data.Auth.length>0)return a;ctripmobi.utils.removeStorage(b,true);return null},getLoginLog:function(){return ctripmobi.utils.getStorage("USERLOGINLOG")},logOut:function(h,a){var g="ORDERDETAILID",f="MYCTRIP_HOTEL_FAV_LIST",e="COMMENTORDER",d="USERLOGINLOG";ctripmobi.utils.OnLoading();var b=ctripmobi.utils.getStorage(d);b={LoginName:a&&a.data?a.data.LoginName:b?b.LoginName:""};ctripmobi.utils.setStorage(d,JSON.stringify(b));ctripmobi.utils.cleanSession();var c=["FLIGHTINFO","ORDERLIST_TRAIN","VACATION_LSIT_FILTER","USERINFO","TICKETDETAILDATA",e,"DATALIST",e,"ORDERLIST","ORDERPARAM","HOTELDETAIL","TRAINSSEARCHINFO","VACATION_DETAILS","VACATION_ORDERINFO","USER","TrainOrderId","CUSTOMER_HOTELORDER_ID","CAR_CUSTOMER_ADDR","TRAIN_ORDER_LIST","USER_WAITFORTCOMMENT_ORDER_LIST","PERSONNAL_INFO","VERIFYTIMEOUT","CUSTOMER_TRAVEL_LIST","FLIGHT_PASSENGERRESULT","VACATION_PRODUCT","VACATION_BOOKINGINFO","VACATION_PRODUCTIMAGELIST","VACATION_ITEMDAYPRICE","USER_GROUP_ORDERPARAM","VACATION_GUESTUSER","VACATION_TICKETDETAIL","VACATION_SELECTEDTICKET","FLIGHT_CUSTOMER_ADDR_LIST","CUSTOMER_HOTELORDER_DETAIL","CUSTOMER_HOTELORDER_LIST","CAR_CUSTOMER_ADDR_LIST","TUAN_ORDER_INFO","HEADSTORE","MYCTRIP_COUPON_LIST",f,"FLIGHT_CUSTOMER_ADDR","USER_FLTINTL_ORDERDETAIL","GROUP_RETURNPAGE","TUAN_ORDER_LIST",g,"OrderDetailReturnTarget",g,"FLTINTL_RETURNPAGE","fltintlOrderId","FltintlListModelresult","VACATION_SUBMITRESULT","TICKET_ORDERINFO","FLIGHT_SEARCH_SUBJOIN","FLIGHT_PASSENGEREDIT","FLIGHT_PASSENGERCHOOSE","FLIGHT_OPER_ADDR","zqInCityInfo","zqInCityDateStore","CUSTOMER_GATE_LIST","MYCTRIP_TRAVELTICKET_LIST","CUSTOMER_VACATION_TICKET_DETAIL","USER_TRAIN_ORDERDETAIL","BANK_SELECT_ADDR","ACCOUNT_TRANSFER","TRANS_ACCOUNT_INFO","Modify_Pre_PhoneStore","EXCHANGE_VALIDATE_NUM","CHECK_EXCHANGE_PHONE","LastInCitySelectDateTime","LastzqInAirportSelectDateTime","zqInAirportInfo","zqInAirportDateStore","USER_FLIGHT_ORDERPARAM","zqInAirportDateAndAddressStore","zqInCityDateAndAddressStore","zqInCitySelectStore","zqInAirportSelectStore","FLIGHT_DETAILS","FLIGHT_ORDERINFO","USER_FLIGHT_ORDERLIST","USER_FLIGHT_ORDERDETAIL","FLIGHT_RETURNPAGE","FLIGHT_SELECTED_INFO","FLIGHT_PICK_TICKET_SELECT","FLIGHT_LIST_FILTER","FLIGHT_PICK_TICKET","FLIGHT_PICK_TICKET_PARAM","TICKET_LIST","TUAN_DETAILS","TUAN_LIST","carOrderId","FLIGHT_LIST","CAR_ORDER_DETAIL",f,"FLTINTL_SELECTED_INFO","VACATION_LIST","VACATION_TICKETLIST","OrderDetailParamStore","VACATIONS_PRODUCT_DETAIL","VACATIONS_PRODUCT_DETAIL_PARAM","VACATIONS_PRODUCT_LIST","VACATIONS_PRODUCT_LIST_PARAM","CAR_PRODUCT_LIST","CAR_PRODUCT_LIST_PARAM","CAR_PRODUCT_DETAIL","CAR_PRODUCT_DETAIL_PARAM","FLIGHT_DETAILS_PARAM","FLTINTL_LIST","FltintlListModelParam","VACATIONS_PRODUCT_COMMENT_PARAM","TUAN_ORDER_DETAIL"];for(var i in c)ctripmobi.utils.removeStorage(c[i],true);$.ajax({url:ctripmobi.utils.website+"/Account/Logout",type:"post",dataType:"json",success:function(){a=null;setTimeout(function(){ctripmobi.utils.redirectTo(h)},300)},error:function(){setTimeout(function(){ctripmobi.utils.redirectTo(h)},300)}})},Confirm:function(a){var b=[{value:"取消","class":"ctrip-cancel",event:{click:function(){this.Close()}}},{value:"确定","class":"ctrip-confirm",event:{click:function(){this.Close();a.callback()}}}];if(a.Cancel)b[0].value=a.Cancel;if(a.Ok)b[1].value=a.Ok;var c=new Oui.Alert({Buttons:b,Title:"提示信息",Content:a.message});c.Open()},Toast:function(d,c){var a=$('<div class="ui-loader"><h1>'+d+"</h1></div>");$("body").append(a);var b=function(){var b=0,c=0;if(window.jQuery){boxHeight=a.outerHeight();b=a.outerWidth()}else{b=a.width();c=a.height()}var d=Oui.Tools.GetCenterPos();a.css({position:"absolute",margin:"0px",top:d.top-c/2+"px",left:d.left-b/2+"px"})};$(window).bind("scroll",b);$(window).bind("resize",b);b();setTimeout(function(){$(".ui-loader").hide();$(".loading-ui").remove();Oui.Loading.Close();typeof c=="function"&&c();$(window).unbind("scroll",b);$(window).unbind("resize",b)},2e3)},MsgBox:function(c,b){var a=".loading-ui";$(a)&&$(a).remove();var d=$('<div class="msgbox-ui"><h1>'+c+"</h1></div>");$("body").append(d);setTimeout(function(){$(".msgbox-ui").remove();typeof b=="function"&&b()},2e3)},Prompt:function(a){var b=[{value:"取消","class":"ctrip-cancel",event:{click:function(){this.Close()}}},{value:"确定","class":"ctrip-confirm",event:{click:function(){this.Close();typeof a.callback=="function"&&a.callback()}}}];if(a.Cancel)b[0].value=a.Cancel;if(a.Ok)b[1].value=a.Ok;var c=new Oui.Alert({Buttons:b,Title:"提示信息",Content:a.message});c.Open()},Note:function(a){Oui.Loading.Close();var b=[{value:a.ButtonTitle,"class":"ctrip-confirm",event:{click:function(){this.Close();typeof a.callback=="function"&&a.callback()}}}],c=new Oui.Alert({Buttons:b,Title:a.Title?a.Title:"信息提示",Content:a.Text});c.Open()},Alert:function(a){var b=[{value:"我知道了","class":"ctrip-confirm",event:{click:function(){this.Close()}}}],c=new Oui.Alert({Buttons:b,Title:"提示信息",Content:a});c.Open()},ShowLoad:function(a){Oui.Loading.Open(a)},OnLoading:function(){$("body").append('<div class="loading-ui"><div class="cui-breaking-load"><div class="cui-w-loading"></div><i class="cui-white-logo"></i></div></div>')},EndLoading:function(){$(".loading-ui").remove()},HideLoad:function(){Oui.Loading.Close()},renderU:function(a,d,b){if(typeof a==="object"){var c=_.template(b.html()),e=c(a);d.html(e)}},render2U:function(c,a){a=a||"";var b=_.template(a),d=b(c);return d},render:function(b,a,c){if(typeof b==="object"){a.setTemplate(c.html());a.processTemplate(b)}},render2:function(c,b){var a=$("<div>");b=b||"";a.setTemplate(b);a.processTemplate(c);return a.html()},getWeeks:function(a){return a==1?"周一":a==2?"周二":a==3?"周三":a==4?"周四":a==5?"周五":a==6?"周六":"周日"},isSuportAnimate:function(){var a=navigator.userAgent;if(a){a=a.toUpperCase();return a.indexOf("HW-HUAWEI")>-1?false:a.indexOf("IPHONE")>-1||a.indexOf("MAC")>-1||a.indexOf("MAC OS")>-1||a.indexOf("WINDOWS PHONE")>-1}return false},isPC:!/(iphone|ios|android|mini|mobile|mobi|Nokia|Symbian|iPod|iPad|Windows\s+Phone|MQQBrowser|wp7|wp8|UCBrowser7|UCWEB|360\s+Aphone\s+Browser|AppleWebKit)/i.test(navigator.userAgent),Cookie:function(c,a){var b={};b.Set=function(e,h,d,f,c){var b=[];if(!e)return false;b.push(e+"="+escape(h));if(Object.prototype.toString.call(d)=="[object Number]"){var g=new Date;second=parseInt(d*86400);g.setSeconds(second);var i=g.toGMTString();b.push("expires="+i)}f&&b.push("path="+f);c&&b.push("domain="+c);a.cookie=b.join(";")};b.Get=function(g){var b;if(g){var h=new RegExp("\\b"+g+"=([^;]*)\\b"),f=h.exec(a.cookie);b=f&&unescape(f[1])}else{var e=a.cookie.split(";"),c,d;b={};for(c=0,len=e.length;c<len;c++){d=e[c].split("=");b[d[0]]=unescape(d[2])}}return b};b.Del=function(e){var c=new Date;c.AddHours(-1e3);var d=b.Get(e);if(d)a.cookie="name="+d+";domain=.ctrip.com;expires="+c.toGMTString()+";path=/";else a.cookie="name=;domain=.ctrip.com;expires="+c.toGMTString()+";path=/"};return b}(window,document),StringToTime:function(a){a=a||"";var c=/^(\d{4})\-?(\d{2})\-?(\d{2})$/i;if(a.match(c))a=a.replace(c,"$2/$3/$1");var b=Date.parse(a),d=Date.parse((new Date).format("MM/dd/yyyy"));b=isNaN(b)||b<d?new Date:new Date(b);return b},Back:function(a,b){if(a)if(b)location.replace(a);else location.href=a;else history.back()},setSource:function(a){ctripmobi.utils.setStorage("SOURCE",JSON.stringify(a))},getSource:function(){return ctripmobi.utils.getStorage("SOURCE")},JumpUrl:function(a,b,c){if(!a)a="/html5/";else if(!c&&!a.match(/html5/i))a="/html5"+a;if(b)location.replace(a);else location.href=a},redirectTo:function(a,b){if(!a||a.length<=0)a="/html5/";else if(!b&&!a.match(/html5/i))a="/html5"+a;location.href=a},replaceContent:function(a){if(!a||!a.data){var e=ctripmobi.utils;a=e.getStorage("SALESOBJ")}if(a&&a.data){var d=".__hreftel__",c=".__conttel__",b=".__appaddress__";if(a.data.tel){$(d).each(function(){this.href="tel:"+a.data.tel});$(c).each(function(){var b=$(this);b.html(a.data.teltitle)})}$(b).each(function(){var b="/market/download.aspx?from=",c=a.data.appurl?a.data.appurl:a.data.sid?b+a.data.sid.toLowerCase():b+a.data.sales.toLowerCase();this.href=c});if(a&&a.data&&a.data.isseo)if(a.data.isseo=="1"){$("#appheader,#divListContent").css({top:"50px"});$(".module").show()}}}};ctripmobi.controllers={};ctripmobi.run=function(a){for(var a=a,f=a.length,b=0;b<f;b++){var d=a[b],g=d.id;e_array=d.event.split(",");for(var c=0;c<e_array.length;c++){var e=e_array[c];if($.trim(e).length==0)continue;$(document).ready(function(a){ctripmobi.controllers[g][e](a)})}}};window.UsingNamespace=Function.usingNamespace=function(f){var a=window;if(String.IsNullOrEmpty(f))return a;for(var e=a,d=f.split("."),c=0;c<d.length;c++){var b=d[c];if(!a[b])a[b]={};e=a=a[b]}return e};String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"").replace(/[<>&"]/g,function(a){return({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"})[a]})};String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"**").length};String._typeName="String";String.IsNullOrEmpty=function(a){return!(typeof a==="string"&&a.length!=0)};String.Parse=function(a){return String.tryParse(a,"")};String.TryParse=function(a,b){return Object.isNull(a)||!a.toString?b:a.toString()};Date.prototype.AddHours=function(a){return new Date(this.setHours(this.getHours()+a))};Date.prototype.AddMinutes=function(a){return new Date(this.setMinutes(this.getMinutes()+a))};Date.prototype.AddSeconds=function(a){return new Date(this.setSeconds(this.getSeconds()+a))};Date.prototype.format=function(b){var a=this,d={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};if(/(y+)/.test(b))b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length));for(var c in d)if((new RegExp("("+c+")")).test(b))b=b.replace(RegExp.$1,RegExp.$1.length==1?d[c]:("00"+d[c]).substr((""+d[c]).length));return b};Date.prototype.addDays=function(d,c){var a,b=function(){var d=a.getFullYear(),b=a.getMonth(),c=a.getDate();if(b===0)b=1;else b=b+1;if(b<10)b="0"+b.toString();if(c<10)c="0"+c.toString();return d+"-"+b+"-"+c};a=this.setDate(this.getDate()+d);a=new Date(a);return c?a:b()};Number.toChinese=function(){var a="",d={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},c={10:"十",100:"百",1e3:"千"};function b(i){for(var h=i.toString().split(a),e=function(d){for(var b=[],a=0,c=d.length;a<c;a++)b.push({Unit:d[a],BigUnit:"1"+Array(c-a).join("0")});return b}(h),g=a,f,b=0,j=e.length;b<j;b++)if(f!="0"||e[b].Unit!="0"){g+=function(){var c=h.slice(b).join(a);return b!=0&&c.match(/^0+$/i)?a:b==0&&e[b].BigUnit=="10"&&e[b].Unit=="1"?a:d[e[b].Unit]}()+(e[b].Unit!="0"&&typeof c[e[b].BigUnit]!="undefined"?c[e[b].BigUnit]:a);f=e[b].Unit}return g}return function(h){h=h||0;var j=h.toString().split(a).reverse().join(a),i=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/i,d=i.exec(j),e,f,g;if(d[1])e=d[1].split(a).reverse().join(a);if(d[2])f=d[2].split(a).reverse().join(a);if(d[3])g=d[3].split(a).reverse().join(a);var c=a;if(g&&g.match(/[^0]/i))c=c+b(g)+"亿";if(f&&f.match(/[^0]/i))c=c+b(f)+"万";if(!e||!c||!e.match(/^0+$/i))c=c+b(e);return c}}();JSON.CtripUnPack=function(e){var q="return o;";for(var u=[],f=[],i=e[0],n=i.length,l=e.length,x=-1,A=-1,a=0,p=0,d,o;a<n;++a){f[++A]=i[a];if(typeof i[a+1]=="object"){++a;for(d=1;d<l;++d){o=e[d];o[p]=i[a][o[p]]}}++p}for(var k=1;k<l;++k)for(var g=e[k],c=0;c<f.length;c++)if(typeof g[c]=="object")if(g[c]&&g[c].length>0){for(var t=[],h=[],s=g[c][0],m=s.length,v=g[c].length,w=-1,y=-1,b=0,z=0,j;b<m;++b){h[++y]=s[b];++z}for(b=0,m=h.length;b<m;++b)h[b]='o["'.concat(h[b].replace('"',"\\x22"),'"]=a[',b,"];");var r=Function("o,a",h.join("")+q);for(j=1;j<v;++j)t[++w]=r({},g[c][j]);e[k][c]=t}for(a=0,n=f.length;a<n;++a)f[a]='o["'.concat(f[a].replace('"',"\\x22"),'"]=a[',a,"];");var r=Function("o,a",f.join("")+q);for(d=1;d<l;++d)u[++x]=r({},e[d]);return u};(function(){var b="http://m.ctrip.com/wap";if(!window.localStorage||!window.sessionStorage)window.location.href=b;else{var a=navigator.userAgent?navigator.userAgent:"";a=a.toLowerCase();if(a.indexOf("android")>-1&&a.indexOf("opera")>-1&&a.indexOf("applewebkit")<=-1)window.location.href=b}})();(function(a){if(ctripmobi.utils.isPC&&!/HotelDetail/i.test(a.location.href)){a.location.href="http://www.ctrip.com";return}})(window);!function(a,b){var c=".__return__";a(function(){a(c).on("click",function(){var c="data-backurl",d=a(this);if(d.attr(c))b.Back(d.attr(c));else b.Back()})})}($,ctripmobi.utils);(function(d,c){var a="placeholder";if(!ctripmobi.utils.InputClear){var b=a in document.createElement("input");ctripmobi.utils.InputClear=function(e,d,f){d||(d="");var g=typeof e=="string"?c(e):e;g.each(function(){var g=c('<a class="clear-input '+d+'" href="javascript:;"><span></span></a>'),e=c(this);if(!b)var i=e.attr(a),h=c('<span class="placeholder-title'+(d?" placeholder-"+d:"")+'">'+i+"</span>");g.hide();e.bind({focus:function(){var a=e.val().Trim();a!=""&&g.show()},input:function(){var a=e.val().Trim();if(e.val().Trim()=="")g.hide();else g.show();if(!b)if(a=="")h.show();else h.hide()},blur:function(){var a=e.val().Trim();if(!b)if(a=="")h.show();else h.hide();setTimeout(function(){g.hide()},300)}});g.bind("click",function(){e.val("");e.keyup();g.hide();e.focus();e.trigger("input");typeof f=="function"&&f.call(this)});e.after(g);if(!b){e.after(h);h.bind("click",function(){e.focus()})}e.blur()})}}})(window,$);Date.ParseString=function(d){var g=/(\d{4})-(\d{1,2})-(\d{1,2})(?:[T\s]+(\d{1,2}):(\d{1,2})(?:\:(\d{1,2}))?)?/i,a=g.exec(d),b=0,c=null;if(a&&a.length)if(a.length>5){var f=[a[1],a[2],a[3]].join("/")+" "+[a[4]||"00",a[5]||"00",a[6]||"00"].join(":");b=Date.parse(f)}else{var e=[a[1],a[2],a[3]].join("/");b=Date.parse(e)}else b=Date.parse(d);if(!isNaN(b))c=new Date(b);return c};!function(){}(window,$,ctripmobi.utils);void function(a){var b="yyyy-MM-dd hh:mm:ss";$.get(a.utils.website+"/ClientData/GetServerDate?v="+(new Date).format(b),function(c){a.ServerDate=c;a.ServerDateObj=Date.ParseString(a.ServerDate);$("#copyno").html(a.ServerDateObj.getFullYear());var d={date:a.ServerDate,timeout:a.ServerDateObj.AddMinutes(30).format(b)};a.utils.setStorage("SERVERDATE",JSON.stringify(d))})}(ctripmobi);!function(a){a(function(){var b=a("#preloading");b.length&&b.hide();a("body").bind("selectstart",function(a){a.preventDefault();return false})})}($);!function(c,e,a){var b="function",d=function(b){switch(b.code){case b.TIMEOUT:a.Toast("地理位置服务连接超时");break;case b.PERMISSION_DENIED:a.Toast("您可能曾拒绝获取我的位置，请在浏览器设置中重新开启！");break;case b.POSITION_UNAVAILABLE:a.Toast("浏览器无法获取您的位置信息");break;default:a.Toast("定位失败，请确保您的设备已打开定位功能或正常连接到网络")}};a.getGeoLocation=function(h,g,f){var e=false;f=f||{enableHighAccuracy:e,timeout:5e3,maximumAge:1.5e5};if(!c.navigator.geolocation||!c.navigator.geolocation.getCurrentPosition){a.MsgBox("非常抱歉，您的的设备不支持定位或是未开启定位");return e}c.navigator.geolocation.getCurrentPosition(h,function(a){if(typeof g==b&&g.call(this,a)===e)return e;d.call(this,a)},f)};a.getGeocoder=function(i,h,e,d){if(c.AMap){var f=new AMap.LngLat(i,h),g=new AMap.Geocoder;g.regeocode(f,function(c){if(c.status=="E0")e(c);else{typeof d==b&&d();a.Toast("未能定位到您所在的城市，请确保您的设备已打开定位功能或正常连接到网络")}})}else{typeof d==b&&d();a.Toast("您当前的地理坐标未能定位到您所在的城市，请重试")}}}(window,$,ctripmobi.utils);!function(l,j,b){var N="select-open",t="option-over",q="option-current",d="data-id",s="data-value",k="value",f="selected",J='[value="',E="z-index",y="click",D="100%",C="50%",r=" ",B="Class",o="resize",g="px",u="auto",x="none",n="0px",w="absolute",c="div",I="hidden",p=true,i="function",H="html",h="body",e=false,T=b(l),L=function(a){return function(b){return a.call(b)}}(Object.prototype.toString),cb=function(a){return typeof a},A=function(a){return L(a)==="[object Array]"},v=function(a){return L(a)==="[object Object]"},z=function(a){return L(a)==="[object Function]"},G=function(a){return L(a)==="[object String]"},Z=function(a){return L(a)==="[object Number]"},X=function(a){a=a||{};var c={};for(var b in a)c[b]=a[b];return c},m=function(g,e,d,f){var c=b("<"+g+">"),a;if(v(e))for(a in e)c.attr(a,e[a]);if(v(d))for(a in d)c.css(a,d[a]);f&&c.html(f);return c},Q=function(a,c){if(!A(a))return e;var b=a.indexOf||function(c){for(var a=0,b=this.length;a<b;a++)if(this[a]==c)return a;return-1};return b.call(a,c)},U=function(d){var b=0,c=0,a=d;do{b+=a.offsetLeft;c+=a.offsetTop}while((a=a.offsetParent)&&"offsetTop"in a);return{left:b,top:c}},Y=function(a){var c=Math.max(j.body.scrollTop,j.documentElement.scrollTop),b=Math.max(j.body.scrollLeft,j.documentElement.scrollLeft);return{top:c+a.clientY,left:b+a.clientX}},P=function(){var a=arguments.callee;if(!a.body||!a.body.length)a.body=b(h);var d=Math.max(a.body.width(),j.documentElement.scrollWidth,j.documentElement.clientWidth,j.documentElement.offsetWidth,j.body.scrollWidth,j.body.clientWidth),c=Math.max(a.body.height(),j.documentElement.scrollHeight,j.documentElement.clientHeight,j.documentElement.offsetHeight,j.body.scrollHeight,j.body.clientHeight);return{width:d,height:c}},R=function(){var b=j.getElementsByTagName(H)[0],a=j.getElementsByTagName(h)[0],f=Math.max(b.scrollTop,a.scrollTop),e=Math.max(b.scrollLeft,a.scrollLeft),d=Math.min(b.clientWidth,a.clientWidth),c=Math.min(b.clientHeight,a.clientHeight);return{top:f+c/2,left:e+d/2}},W=function(){var b=Math.max(j.documentElement.scrollLeft,j.body.scrollLeft),c=Math.max(j.documentElement.scrollTop,j.body.scrollTop),a=Math.min(j.documentElement.clientHeight,j.body.clientHeight);return{top:c,left:b,height:a}},O=function(c){var a=[];for(var b in c)a.push(b);return a},F=function(){var b=parseInt(Math.random()*1e3);return function(){b++;return a.PRDFIX+"cid"+parseInt(Math.random()*1e6)+""+b}}(),K=function(){var a=parseInt(Math.random()*1e3)+6e3;return function(){a++;return a}}(),M=function(a,b){return function(){a.call(b)}},V=function(a,b){if(typeof a!=i)return;if(V[b]!=a.toString()){a();V[b]=a.toString()}},bb=function(b,d,c){var a;typeof b==i&&(a=b.apply(d||null,c||[]));return a},S=function(){var a=/huawei/i;return a.test(navigator.userAgent)?e:p},a=l.Oui={};a.Tools={C:m,isArray:A,isObject:v,isFunction:z,isString:G,isNumber:Z,AindexOf:Q,GetPos:U,GetMousePos:Y,GetPageSize:P,GetCenterPos:R,GetKey:O,CreateId:F,Bind:M,GetZIndex:K,cloneObject:X,isNotAnimate:S,getPageScrollPos:W};a.LockWindow=function(){b(H).css({overflow:I})};a.UnLockWindow=function(){b(H).css({overflow:"visible"})};a.PRDFIX="cui-";a.Mask=function(){var e="Mask-Show",d=b("."+a.PRDFIX+"Mask"),k=b(l),f=b(h);if(!d.length){d=m(c,{"class":a.PRDFIX+"Mask"});d.hide()}d.css({position:w,left:n,top:n,display:x,width:n,height:n,"z-index":"88",overflow:I});var p,j=function(){d.css({width:u,height:u});var a=P(),c=a.width,b=a.height;f.length&&d.css({width:c+g,height:b+g})},i={};i.SetStyle=function(a){if(v(a))for(var b in a)d.css(b,a[b])};i.GetStyle=function(a){return d.css(a)};i.Show=function(){f=f.length?f:b(h);j();k.bind(o,j);f.append(d);d.show();setTimeout(function(){d.addClass(a.PRDFIX+e)},1)};i.Hide=function(){d.removeClass(a.PRDFIX+e);d.hide();clearInterval(p);k.unbind(o,j)};return i}();a.Alert=function(d){var c=this;if(!c instanceof arguments.callee)return new arguments.callee(d);c.Buttons;c.Title="";c.Content="";c.Class=[a.PRDFIX+"alert"];c.isMask=e;c._id=F();c._Mask=a.Mask;c._BoxDom;c._ConBoxDom;c._TitleDom;c._ButtonsBoxDom;c._ButtonsDom={};c._ContentDom;c._CloseDom;c._TranBgDom;c._AutoPosHandler;c._body=b(h);c.WatchHash=new a.WatchHash(c._id,M(c.Close,c));c._setOption(d);c._init()};a.Alert.prototype={_setOption:function(a){var c=this;if(v(a))for(var b in a)switch(b){case"Buttons":case"Title":case"Content":case"isMask":c[b]=a[b];break;case B:A(a[b])&&(c.Class=c.Class.concat(a[b]));G(a[b])&&c.Class.push(a[b])}},_init:function(){this._createDom();this._BindEvent()},_createDom:function(){var f="alert-button",d=this;d._BoxDom=m(c,{id:d._id,"class":d.Class.join(r)});d._BoxDom.css({position:"fixed",left:C,top:C,"z-index":"99",display:x});d._TranBgDom=m(c,{"class":a.PRDFIX+"alert-tbg"});d._TranBgDom.css({position:w,left:n,top:n,width:D,height:D});d._BoxDom.append(d._TranBgDom);d._ConBoxDom=m(c,{"class":a.PRDFIX+"alert-conbox"});d._CloseDom=m("a",{"class":a.PRDFIX+"close"},null,"×");d._CloseDom.css({position:w,"z-index":"100"});d._BoxDom.append(d._CloseDom);if(b.trim(d.Title)){d._TitleDom=m("h3",{"class":a.PRDFIX+"alert-title"});d._TitleDom.html(d.Title);d._ConBoxDom.append(d._TitleDom)}d._ContentDom=m(c,{"class":a.PRDFIX+"alert-content"});if(G(d.Content))d._ContentDom.html(d.Content);else{d._ContentDom.empty();d._ContentDom.append(b(d.Content))}d._ConBoxDom.append(d._ContentDom);d._ButtonsBoxDom=m(c,{"class":a.PRDFIX+"alert-button-box"});var e,g,h=d;if(v(d.Buttons))for(e in d.Buttons){g=d._ButtonsDom[e]=m("input",{type:"button",value:e,"class":a.PRDFIX+f});d._ButtonsBoxDom.append(g)}else if(A(d.Buttons))for(e=0,len=d.Buttons.length;e<len;e++){g=d._ButtonsDom[d.Buttons[e].value]=m("input",{type:"button",value:d.Buttons[e].value,"class":[a.PRDFIX+f,d.Buttons[e]["class"]].join(r)});d._ButtonsBoxDom.append(g)}d._ConBoxDom.append(d._ButtonsBoxDom);d._BoxDom.append(d._ConBoxDom);d._body.append(d._BoxDom)},_Location:function(){var a=this,c=this._AutoPosHandler=function(){var e=a._BoxDom.width(),d=a._BoxDom.height(),b=-(e/2),c=-(d/2);a._BoxDom.css({top:"49%","margin-left":b+g,"margin-top":c+g})};c();b(l).bind(o,c)},_UnLocation:function(){b(l).unbind(o,this._AutoPosHandler)},_BindEvent:function(){var a=this,c,d,e=a,b;if(A(a.Buttons)){for(b=0,len=a.Buttons.length;b<len;b++)if(a.Buttons[b]&&a.Buttons[b].value&&a._ButtonsDom[a.Buttons[b].value]&&a.Buttons[b].event){c=a.Buttons[b];d=c.event;for(var f in d)a._ButtonsDom[c.value].bind(f,function(a){return function(b){z(a)&&a.call(e,b)}}(d[f]))}}else if(v(a.Buttons))for(b in a.Buttons){c=a._ButtonsDom[b];if(c){c.bind(y,function(a){return function(b){z(a)&&a.call(e,b)}}(a.Buttons[b]));a._ButtonsBoxDom.append(c)}}a._CloseDom.bind(y,function(){e.Close()})},Close:function(){var a=this;a._BoxDom.hide();a._BoxDom.remove();a._Mask.Hide();a._Mask.SetStyle({opacity:0});a._UnLocation();a.WatchHash.End()},Open:function(){var a=this;a._Mask.SetStyle({opacity:.3});a._Mask.Show();a._BoxDom.css(E,K());a._BoxDom.show();a._Location();a.WatchHash.Start()}};a.Layer=function(d){var c=this;if(!c instanceof arguments.callee)return new arguments.callee(d);c.Content="";c.Time;c.CallBack;c.Class=[a.PRDFIX+"layer"];c.Event;c._Id=F();c._Mask=a.Mask;c._BoxDom;c._ContentDom;c.autolocation;c._body=b(h);c._setOption(d);c._init()};a.Layer.prototype={_setOption:function(a){var c=this;if(v(a))for(var b in a)switch(b){case"Content":case"Time":case"CallBack":case"Event":c[b]=a[b];break;case B:A(a[b])&&(c.Class=c.Class.concat(a[b]));G(a[b])&&c.Class.push(a[b])}},_init:function(){this._createDom();this._BuildEvent()},_createDom:function(){var d=this;d._BoxDom=m(c,{"class":d.Class.join(r)});d._BoxDom.css({position:"fixed",left:C,top:C,"z-index":"99999","display:":x});d._ContentDom=m(c,{"class":a.PRDFIX+"layer-content"});if(G(d.Content))d._ContentDom.html(d.Content);else d._ContentDom.append(b(d.Content));d._BoxDom.append(d._ContentDom)},_BuildEvent:function(){var a=this,c=a;if(v(a.Event))for(var b in a.Event)a._BoxDom.bind(b,function(a){return function(b){a.call(c,b)}}(a.Event[b]))},_Location:function(){var c=R(),b=this._BoxDom.width(),a=this._BoxDom.height();this._BoxDom.css({"margin-left":-(b/2)+g,"margin-top":-(a/2)+g})},_UnAutoLocation:function(){b(l).unbind(o,this.autolocation);b(l).unbind("scroll",this.autolocation)},_AutoLocation:function(){var a=this,c=a;a.autolocation=function(){c._Location()};b(l).bind(o,a.autolocation);b(l).bind("scroll",a.autolocation)},Close:function(){this._BoxDom.hide();this._Mask.Hide();this._UnAutoLocation()},Open:function(d){var a=this;!b("#"+a._Id).length&&b(h).append(a._BoxDom);!d&&a._Mask.Show();a._BoxDom.css(E,K());a._BoxDom.show();a._Location();var c=a;a.Time&&setTimeout(function(){c.Close();z(c.CallBack)&&c.CallBack()},a.Time*1e3);a._AutoLocation()}};a.ViewPage=function(d){var c=this;c.Element;c.onBeforeCreate;c.onCreate;c.onShow;c.onHide;c.Class=[a.PRDFIX+"view-page"];c._id=F();c._BoxDom;c._ContDom;c.Doc;c._BodyDom;c._AutoLocResoure;c.$window=b(l);c._callback_Location;c._WhichHash=new a.WatchHash(c._id,M(function(){this.Close()},c));c._setOption(d);c._init()};a.ViewPage.prototype={_setOption:function(a){var c=this;if(v(a))for(var b in a)switch(b){case"Element":case"onBeforeCreate":case"onCreate":case"onShow":case"onHide":c[b]=a[b];break;case B:A(a[b])&&(c.Class=c.Class.concat(a[b]));G(a[b])&&c.Class.push(a[b])}},_init:function(){var a=this;z(a.onBeforeCreate)&&a.onBeforeCreate();a._ContDom&&a._ContDom.remove();a._BoxDom&&a._BoxDom.remove();a._CreateDom();a._BuildEvent();z(a.onCreate)&&a.onCreate()},_CreateDom:function(){var d=this;d._BodyDom=b(h);d.Element=b(d.Element);d._BoxDom=m(c,{id:d._id,"class":d.Class.join(r)});d._BoxDom.css({position:w,left:n,top:n,width:D,display:x});d._ContDom=m(c,{"class":a.PRDFIX+"view-page-content"});d._BoxDom.append(d._ContDom);d._ContDom.append(d.Element);d.Doc=d._ContDom;d._BodyDom.append(d._BoxDom)},_Location:function(){this._BoxDom.css({width:u,height:u});var a=P();this._BoxDom.css({width:a.width+g,height:a.height+g})},_AutoLocation:function(){var a=this;a._Location();var b=a;a._callback_Location=function(){b._Location()};a.$window.bind(o,a._callback_Location)},_UnAutoLocation:function(){this.$window.unbind(o,this._callback_Location)},_BuildEvent:function(){},Open:function(){var a=this;a._BoxDom.css(E,K());a._BoxDom.show();z(a.onShow)&&a.onShow();a._WhichHash.Start();a._AutoLocation()},Close:function(){var a=this;a._BoxDom.hide();z(a.onHide)&&a.onHide();a._WhichHash.End();a._UnAutoLocation()},CloseNotCallBack:function(){this._BoxDom.hide();this._WhichHash.End();this._UnAutoLocation()},getRoot:function(){return this._ContDom}};a.form={};a.form.Select=function(c){var b=this;if(!b instanceof arguments.callee)return new arguments.callee(c);b.Select;b.Class=[a.PRDFIX+"form-select"];b.OnChange=[];b.Direction="bottom";b.UseEmptyOption;b.Title;b.isShowValue;b.isNotShowInputTitle;b.DefaultValue;b.FormatOptionTitle;b.isShowBodyfirstChind;b.Type=a.form.Select.TYPE.NORMAL;b.FloatBoxOffset;b.OnShow=function(){};b.OnHide=function(){};b.EmptyOptionTitle="无";b._Id=F();b._OSelect;b._OGroups;b._OOptions;b._SelectInputDom;b._SelectFloatBoxDom;b._SelectContentDom;b._OptGroupDom;b._OptionsDoms;b._OptionsMap;b._OptionsDomMap;b._SelectHeader;b._TitleDom;b._CloseButtonDom;b._Mask=a.Mask;b._CurrentOptions;b._multiple;b._desabled;b.__WindowReSizeHander;b._isfocus=e;b._lastkey=[];b._hasError=e;b._beforePosition={};b.WatchHash=new a.WatchHash(b._Id,M(b._Close,b));b._CssSelectOption="option[value]";b._setOption(c);b._init()};a.form.Select.TYPE={NORMAL:1,SELECTDOWN:2};a.form.Select.prototype={_setOption:function(a){var c=this;if(v(a))for(var b in a)switch(b){case"Select":case"Direction":case"UseEmptyOption":case"Title":case"isShowValue":case"isNotShowInputTitle":case"DefaultValue":case"FormatOptionTitle":case"isShowBodyfirstChind":case"Type":case"FloatBoxOffset":case"OnShow":case"OnHide":case"EmptyOptionTitle":c[b]=a[b];break;case"OnChange":typeof a[b]==i&&c.OnChange.push(a[b]);break;case B:A(a[b])&&(c.Class=c.Class.concat(a[b]));G(a[b])&&c.Class.push(a[b])}},_init:function(){var a=this;a._SelectInputDom&&a._SelectInputDom.remove();a._SelectFloatBoxDom&&a._SelectFloatBoxDom.remove();a._SelectContentDom&&a._SelectContentDom.remove();a._OptGroupDom=[];a._OptionsDoms=[];a._OptionsMap={};a._OptionsDomMap={};a._CloseButtonDom;a._CurrentOptions={};a._multiple=e;a._desabled=e;if(a.UseEmptyOption)a._CssSelectOption="option";a._createDom();a._afterDispose();a._BuildEvent()},_afterDispose:function(){switch(this.Type){case a.form.Select.TYPE.SELECTDOWN:this._SelectHeader.hide()}},_location:function(){switch(this.Type){case a.form.Select.TYPE.NORMAL:this._location_normal();break;case a.form.Select.TYPE.SELECTDOWN:this._location_select()}},_location_normal:function(){},_location_select:function(){var a=this,n=0,m=0,i=0;if(l.jQuery)n=a._SelectInputDom.outerWidth(),m=a._SelectInputDom.outerHeight(),i=b(h).innerHeight();else{n=a._SelectInputDom.width();m=a._SelectInputDom.height();i=b(h).height()}var c=U(a._SelectInputDom[0]),r=n,o=m,s=a._SelectFloatBoxDom.width(),k=a._SelectFloatBoxDom.height(),f=0,e=0,q=u,p=Math.max(i,j.documentElement.clientHeight);if(z(a.FloatBoxOffset)){var d=a.FloatBoxOffset(c);if(d){c.top+=d.top?d.top:0;c.left+=d.left?d.left:0;r+=d.width?d.width:0;o+=d.height?d.height:0}}if(a.Direction=="top"){f=c.left;e=c.top-k;if(k>=c.top){q=c.top+g;e=0}}else{f=c.left;e=c.top+o;if(p-e<=k){q=p-e+g;e=c.top+o}}a._SelectFloatBoxDom.css({left:f,top:e,width:r+g})},_OnChange:function(c){var a=this;for(var b=0,d=a.OnChange.length;b<d;b++)typeof a.OnChange[b]==i&&a.OnChange[b].call(a,c)},_AutoLoaction:function(){var a=this,b=a;if(!a._AutoLoactionRun){a.__WindowReSizeHander=function(){b._location()};T.bind(o,a.__WindowReSizeHander);a._AutoLoactionRun=p}},_UnAutoLoaction:function(){T.unbind(o,this.__WindowReSizeHander);this._AutoLoactionRun=e},_getOhtml:function(a){a=a||[];var d=[],c;if(v(a))for(c in a)d.push(b(a[c]).html());else if(A(a))for(var c=0,e=a.length;c<e;c++)d.push(b(a[c]).html());return d.join(",")},_getCurrentSelected:function(b){var a=[];b.each(function(){this.selected&&a.push(this)});!this._multiple&&a.length&&(a=[a.pop()]);return a},_getSelectedTitle:function(){return select_value},_createDom:function(){var j="select-option",e=this,g=e;e._OSelect=b(e.Select);e._OSelect=b(e._OSelect[0]);if(!e._OSelect.length)throw Error("Select框不存在!");e._multiple=!!e._OSelect[0].multiple;e._desabled=!!e._OSelect[0].disabled;e._OGroups=e._OSelect.find("optgroup");e._OOptions=e._OSelect.find(e._CssSelectOption);if(e.DefaultValue&&e._OOptions.filter(J+e.DefaultValue+'"]').length){e._OOptions.removeAttr(f);e._OOptions.filter(J+e.DefaultValue+'"]').attr(f,f)}e._SelectInputDom=m("span",{"class":e.Class.join(r),tabindex:"1"});var l=e._getCurrentSelected(e._OOptions),p=e._getOhtml(l);if(e._OOptions.length)e._SelectInputDom.html(p);else e._SelectInputDom.html(e.EmptyOptionTitle);e._SelectInputDom.html(p);e.isNotShowInputTitle&&e._SelectInputDom.hide();e._SelectFloatBoxDom=m(c,{"class":a.PRDFIX+"select-float-box",tabindex:"1"});for(var o=0,t=e.Class.length;o<t;o++)e._SelectFloatBoxDom.addClass(e.Class[o]+"-float");e._SelectFloatBoxDom.css({position:w,width:D,overflow:I,left:n,top:n,"z-index":"199"});e._SelectContentDom=m(c,{"class":a.PRDFIX+"select-cont-box"});if(e._OGroups.length){e._OGroups.each(function(){var o=b(this),e=[a.PRDFIX+"select-optgroup-box"];b.trim(this.className).length&&e.push(this.className);var h=m(c,{"class":e.join(r)}),n=o.find(g._CssSelectOption);n.each(function(){var n=this,u=[a.PRDFIX+j],t=b(n);b.trim(n.className).length&&u.push(n.className);var e=m(c,{"class":u.join(r),tabindex:"2"}),p=t.html();if(typeof g.FormatOptionTitle==i)p=g.FormatOptionTitle(p,n);e.html(p);var v=t.attr(k);e.attr(s,v);var o=F();g._OptionsMap[o]=n;g._OptionsDomMap[o]=e;e.attr("id",o);t.attr(d,o);g._OptionsDoms.push(e);n.selected&&b.each(l,function(){var c=this;if(v==b(c).attr(k)){b(c).attr(f,f);g._CurrentOptions[b(c).attr(d)]=c;e.addClass(a.PRDFIX+q)}});h.append(e)});g._OptGroupDom.push(h)});e._SelectContentDom.append(g._OptGroupDom)}else e._OOptions.each(function(){var h=this,t=[a.PRDFIX+j],p=b(h);b.trim(h.className).length&&t.push(h.className);var e=m(c,{"class":t.join(r),tabindex:"2"}),o=p.html();if(typeof g.FormatOptionTitle==i)o=g.FormatOptionTitle(o,h);e.html(o);var u=p.attr(k);e.attr(s,u);var n=F();g._OptionsMap[n]=h;g._OptionsDomMap[n]=e;e.attr("id",n);p.attr(d,n);h.selected&&b.each(l,function(){var c=this;if(u==b(c).attr(k)&&c.selected){b(c).attr(f,f);g._CurrentOptions[b(c).attr(d)]=c;e.addClass(a.PRDFIX+q)}});g._OptionsDoms.push(e);g._SelectContentDom.append(e)});e._SelectHeader=m(c,{"class":a.PRDFIX+"select-head"});e._CloseButtonDom=m(c,{"class":a.PRDFIX+"select-close"});e._CloseButtonDom.html("关闭");e._TitleDom=m(c,{"class":a.PRDFIX+"select-title"});e.Title&&e._TitleDom.html(e.Title);e._SelectHeader.append(e._CloseButtonDom);e._SelectHeader.append(e._TitleDom);e._SelectFloatBoxDom.append(e._SelectHeader);e._SelectFloatBoxDom.append(e._SelectContentDom);b(h).append(e._SelectFloatBoxDom);e._OSelect.after(e._SelectInputDom);e._OSelect.hide();e._location()},_Toggle:function(){var a=this;if(a._SelectFloatBoxDom.css("display")==x){a._Open();a._AutoLoaction()}else{a._Close();a._UnAutoLoaction()}},_BuildEvent:function(){var b=this;if(b._OOptions.length)switch(b.Type){case a.form.Select.TYPE.NORMAL:b._BuildEvent_normal();break;case a.form.Select.TYPE.SELECTDOWN:b._BuildEvent_selectdown()}},_BuildEvent_selectdown:function(){var f=this,c=f,d=p;f._SelectInputDom.bind({click:function(){c._location();c._Toggle()},focus:function(){d=e},blur:function(){d=p;setTimeout(function(){d&&c.Close()},200)}});b(f._OptionsDoms).each(function(){b(this).bind({mouseover:function(){c._OOptions.removeClass(a.PRDFIX+t);var d=b(this);d.addClass(a.PRDFIX+t)},click:function(){var a=b(this),e=a.attr(s),d=c._OptionsMap[this.id];c._lastkey=O(c._CurrentOptions);c._SetValue(d,a);!c._multiple&&c._Toggle();c._isChange(e)},focus:function(){d=e},blur:function(){d=p;setTimeout(function(){d&&c.Close()},200)}})});f._CloseButtonDom.bind(y,function(){c._Close()});f._OSelect.bind("change",function(){c._OnChange(c.GetValue().shift())})},_BuildEvent_normal:function(){var d=this,c=d;d._SelectInputDom.bind(y,function(){c._location();c._Toggle()});b(d._OptionsDoms).each(function(){b(this).bind({mouseover:function(){c._OOptions.removeClass(a.PRDFIX+t);var d=b(this);d.addClass(a.PRDFIX+t)},click:function(){var a=b(this),e=a.attr(s),d=c._OptionsMap[this.id];c._lastkey=O(c._CurrentOptions);c._SetValue(d,a);!c._multiple&&c._Toggle();c._isChange(e)}})});d._CloseButtonDom.bind(y,function(){c._Close()});d._OSelect.bind("change",function(){c._OnChange(c.GetValue().shift())})},_isChange:function(d){var b=this,c=O(b._CurrentOptions),a;for(a=0,len=c.length;a<len;a++)if(Q(b._lastkey,c[a])<0){b._OnChange(d);return}for(a=0,len=b._lastkey.length;a<len;a++)if(Q(c,b._lastkey[a])<0){b._OnChange(d);return}},_SetValue:function(e,g){var c=this;if(c._hasError)return;g=g||c._OptionsDomMap[b(e).attr(d)];var h=c;if(!c._multiple){c._CurrentOptions={};c._OOptions.removeAttr(f);b.each(c._OptionsDoms,function(){b(this).removeClass(a.PRDFIX+q)});g.addClass(a.PRDFIX+q);c._CurrentOptions[b(e).attr(d)]=e;b(e).attr(f,f)}else{var i=b(e).attr(d);if(g&&g.attr(s))if(c._CurrentOptions[i]){g.removeClass(a.PRDFIX+q);c._UnSetValue(e)}else{g.addClass(a.PRDFIX+q);c._CurrentOptions[b(e).attr(d)]=e;b(e).attr(f,f)}else b.each(c._OOptions,function(){h._UnSetValue(this)})}c._SelectInputDom.html(c.isShowValue?c.GetValue().join("，"):c.GetTitle().join("，"))},_Open:function(){var b=this;typeof b.OnShow==i&&b.OnShow();switch(b.Type){case a.form.Select.TYPE.NORMAL:b._Open_normal();break;case a.form.Select.TYPE.SELECTDOWN:b._Open_select()}b._SelectInputDom.addClass(a.PRDFIX+N)},_Open_normal:function(){var a=this,e=a;a._beforePosition.top=Math.max(j.documentElement.scrollTop,j.body.scrollTop);a._beforePosition.left=Math.max(j.documentElement.scrollLeft,j.body.scrollLeft);if(!a.isShowBodyfirstChind){if(!a._masterPage)a._masterPage=b(h).find(c).first();a._masterPage.hide()}l.scrollTo(0,1);var d=b(l);a._SelectFloatBoxDom.css({top:d.height()+g});a._SelectFloatBoxDom.show();a._SelectFloatBoxDom[S()?"animate":"css"]({top:n});a._Mask.SetStyle({background:"#fff"});a._SelectFloatBoxDom.css(E,K());a.WatchHash.Start()},_Open_select:function(){this._SelectFloatBoxDom.show()},_Close:function(){var b=this;typeof b.OnHide==i&&b.OnHide();switch(b.Type){case a.form.Select.TYPE.NORMAL:b._Close_normal();break;case a.form.Select.TYPE.SELECTDOWN:b._Close_select()}b._SelectInputDom.removeClass(a.PRDFIX+N)},_Close_normal:function(){var a=this;if(!a.isShowBodyfirstChind){if(!a._masterPage)a._masterPage=b(h).find("div:first");a._masterPage.show()}a._Mask.SetStyle({background:""});a._SelectFloatBoxDom.hide();a._beforePosition.top&&setTimeout(M(function(){l.scrollTo(this._beforePosition.left,this._beforePosition.top)},a),120);a.WatchHash.End()},_Close_select:function(){this._SelectFloatBoxDom.hide()},_UnSetValue:function(a){if(this._hasError)return;delete this._CurrentOptions[b(a).attr(d)];b(a).removeAttr(f)},WatchChange:function(){var a=this;if(a._hasError)return;a._OOptions=a._OSelect.find(a._CssSelectOption);var c=a,f=e;a._OOptions.each(function(){var a=b(this);if(c._OptionsDomMap[a.attr(d)]){c._OptionsDomMap[a.attr(d)].html(a.html());c._OptionsDomMap[a.attr(d)].attr(s,a.attr(k));this.selected&&c._SetValue(this)}else f=p});f&&a.ReLoad()},ReLoad:function(){if(this._hasError)return;this._init()},SetValue:function(a){var b=this._OOptions.filter(J+a+'"]'),c=this;this.DefaultValue=a;b.each(function(){c._SetValue(this)})},GetValue:function(){if(this._hasError)return;var c=[],a=[],e=this;this._OOptions.each(function(){e._CurrentOptions[b(this).attr(d)]&&a.push(this)});b.each(a,function(){c.push(b(this).attr(k))});return c},GetTitle:function(){if(this._hasError)return;var c=[],a=[],e=this;this._OOptions.each(function(){e._CurrentOptions[b(this).attr(d)]&&a.push(this)});b.each(a,function(){c.push(b(this).text())});return c},Clear:function(){var c=this;c._OOptions.removeAttr(f);c._CurrentOptions={};var d=c._getSelectedTitle(c._OOptions);c._SelectInputDom.html(d);b.each(c._OptionsDoms,function(){this.removeClass(a.PRDFIX+q)})},CurrentIndexOf:function(a){for(var c in this._CurrentOptions)if(b(this._CurrentOptions[c]).attr(k)==a)return p;return e},SetTitle:function(a){this._SelectInputDom.html(a)},TriggerChange:function(){this._OnChange(this.GetValue().shift())},Open:function(){this._Open();this._AutoLoaction()},Close:function(){this._Close();this._UnAutoLoaction()},addOnChange:function(a){typeof a==i&&this.OnChange.push(a)}};a.Mobile={};a.Mobile.DIR_TOP=1;a.Mobile.DIR_RIGHT=2;a.Mobile.DIR_BOTTOM=3;a.Mobile.DIR_LEFT=4;a.Mobile.DIR_CENTER=5;a.Mobile.addEventGesture=function(c,g,f){c=b(c);var h=0,j=0;if(c.length){c[0].addEventListener("touchstart",function(b){b.preventDefault();var a=b.targetTouches[0];h=a.clientX;j=a.clientY;typeof f==i&&f()},e);var d=function(d){d.preventDefault();var e=d.changedTouches[0],b=e.clientX-h,c=e.clientY-j,f;if(Math.abs(b)<40&&Math.abs(c)<40)return;f={XDirection:b<0?a.Mobile.DIR_LEFT:a.Mobile.DIR_RIGHT,XOffset:Math.abs(b),YDirection:c<0?a.Mobile.DIR_TOP:a.Mobile.DIR_BOTTOM,YOffset:Math.abs(c)};z(g)&&g.apply(this,[f,d])};c[0].addEventListener("touchend",d,e);c[0].addEventListener("touchcancel",d,e)}};a.WatchHash=function(b,f){var a="hashchange";b=b.replace(/[\s\-]/mg,"");if(!this instanceof arguments.callee)return new arguments.callee(b,f);var h=new RegExp("\\b"+b+"\\b"),j=l.location.hash,c=e,g=/qq/i.test(navigator.userAgent),d=function(){if(!l.location.hash.match(h)){c=p;l.removeEventListener(a,d);typeof f==i&&f()}};this.Start=function(){j=l.location.hash;var f=[];l.location.hash.length&&f.push(location.hash);f.push(b);if(!g){l.location.assign(l.location.hash.indexOf("#")==-1?"#"+f.join("/"):f.join("/"));l.addEventListener(a,d);c=e}};this.End=function(){if(c)return;if(!g){l.removeEventListener(a,d);l.history.go(-1)}}}}(this,document,$);void function(a,c){var d=new a.Layer({Content:c('<div class="cui-loading"></div>'),Class:"cui-loadingbox"});a.Loading=d;var b=function(f,e){var d=arguments.callee,b;if(!d[e])b=new a.Layer({Content:c('<div class="loading-ui"><div class="cui-breaking-load"><div class="cui-w-loading"></div><i class="cui-white-logo"></i><div class="cui-loading-title">'+f+"</div></div></div>"),Class:"text-loading"});else b=d[e];return b};a.TextLoading=b;a.AlertLoading=b("正在定位中...","AlertLoading")}(Oui,$);(function(J,o,a){var s="SALES_OBJECT",q="SALESOBJ",p="SALES",v="Session",B="SEO_360SO",x="5376",A="APP_DOWNLOAD",c=-1,z="https://",i="",m="UNION",r=null,u="1622",t="ydwxcs",d=true,g=a.getUrlParam("sales"),j=a.getUrlParam("sourceid"),G=a.getUrlParam("sticket",d),E=a.getUrlParam("areacode",d);if(typeof G=="string"&&typeof E=="string"){g=t;j=u}var e=a.getUrlParam("AllianceID"),f=a.getUrlParam("SID"),h=a.getUrlParam("OUID"),n=r;if(e&&f){var C={data:{AllianceID:e,SID:f,OUID:h},timeout:(new Date).addDays(7),timeby:7};n={value:{isExpire:1,isClose:1},timeout:(new Date).addDays(1),timeby:1};a.setStorage(m,JSON.stringify(C));a.Cookie.Del(m)}else{var b=document.referrer;if(b){b=b.replace("http://",i).replace(z,i).split("/")[0].toLowerCase();if(b.indexOf("www.ctrip.com")>c||b.indexOf("hotels.ctrip.com")>c||b.indexOf("flights.ctrip.com")>c||b.indexOf("trains.ctrip.com")>c||b.indexOf("vacations.ctrip.com")>c||b.indexOf("tuan.ctrip.com")>c||b.indexOf("lipin.ctrip.com")>c||b.indexOf("huixuan.ctrip.com")>c||b.indexOf("package.ctrip.com")>c){var D=a.Cookie.Get(m);if(D){a.removeStorage(m,d);n={value:{isExpire:1,isClose:1},timeout:(new Date).addDays(1),timeby:1}}}}}a.union={GetUnion:function(){var b=a.getStorage(m);return b&&b.data?b.data:r}};j&&+j>0||g&&g.length>0;n&&a.setStorage(A,JSON.stringify(n));if(!g&&!j){var b=document.referrer;if(b){b=b.replace("http://",i).replace(z,i).split("/")[0].toLowerCase();if(b.indexOf("baidu")>c){g="SEO_BAIDU";e=e||"4897";f=f||"353693";h=h||i}if(b.indexOf("google")>c){g="SEO_GOOGLE";e=e||"4899";f=f||"353694";h=h||i}if(b.indexOf("soso.com")>c){g="SEO_SOSO";e=e||"4900";f=f||"353696";h=h||i}if(b.indexOf("sogou")>c){g="SEO_SOGOU";e=e||"4901";f=f||"353698";h=h||i}if(b.indexOf("m.so.com")>c){g="SEO_SO";e=e||x;f=f||"353699";h=h||i}if(b.indexOf("so.360")>c){g=B;e=e||x;f=f||"353700";h=h||i}if(b.indexOf("bing.com")>c){g="SEO_BING";e=e||"4902";f=f||"353701";h=h||i}if(b.indexOf("yahoo")>c){g="SEO_YAHOO";e=e||"4903";f=f||"353703";h=h||i}if(b.indexOf("youdao")>c){g="SEO_YOUDAO";e=e||"4904";f=f||"353704";h=h||i}if(b.indexOf("jike.com")>c||b.indexOf("babylon.com")>c||b.indexOf("ask.com")>c||b.indexOf("avg.com")>c||b.indexOf("easou.com")>c||b.indexOf("panguso.com")>c||b.indexOf("yandex.com")>c){g=B;e=e||x;f=f||"353700";h=h||i}if(e&&f){var C={data:{AllianceID:e,SID:f,OUID:h},timeout:(new Date).addDays(7),timeby:7};a.setStorage(m,JSON.stringify(C));a.Cookie.Del(m);n={value:{isExpire:1,isClose:1},timeout:(new Date).addDays(1),timeby:1};n&&a.setStorage(A,JSON.stringify(n))}}}var l=r;if(g||j){l={timeout:(new Date).addDays(1,d),timeby:d,data:{}};a.Cookie.Del(v);if(g.toLowerCase()!=t&&j!=u){a.removeStorage("YDWXCS",d);a.removeStorage(p,d);a.removeStorage(q,d);a.removeStorage(s,d)}else l={timeout:(new Date).addDays(30,d),timeby:d,data:{}};l.data.sales=g;l.data.sourceid=j;a.setStorage(p,JSON.stringify(l))}if(!g&&!j){var k=a.Cookie.Get(v);if(k){k=k.toLowerCase();for(var y=k.split("&"),w=0,I=y.length;w<I;w++)if(y[w].indexOf("smartlinkcode")>c){k=y[w];break}k=k?k.replace("smartlinkcode=",i):r;k&&o.get(ctripmobi.utils.website+"/ClientData/GetSourceInfo/"+encodeURI(k),function(b){if(b&&b.ServerCode==1&&b.Data){var c=(new Date).addDays(30,d),f={timeout:c,timeby:d,data:b.Data};l.data.sales=b.Data.sales;l.data.sourceid=b.Data.sid;a.setStorage(p,JSON.stringify(l));a.setStorage(q,JSON.stringify(f));var e={savedate:c,tag:l.data.sales,timeout:c};e.value=b.Data;a.setStorage(s,JSON.stringify(e));a.Cookie.Del(v)}})}}if(g||j){var H=g?g:j;o.get(ctripmobi.utils.website+"/ClientData/GetSalesInfo/"+H,function(b){if(b&&b.ServerCode==1&&b.Data){var e=(new Date).addDays(30,d),c={timeout:e,timeby:d,data:{}},h={timeout:e,timeby:d,data:b.Data};c.data.sales=b.Data.sales;c.data.sourceid=b.Data.sid;if(g.toLowerCase()==t||j==u)c.timeout=(new Date).addDays(1,d);else{a.removeStorage("YDWXCS",d);o("#ydwxcsH").empty();o("#ydwxcsF").empty()}if(!b.Data.appurl||b.Data.appurl.length<=0){o("#dl_app").hide();o("footer")&&o("footer").removeClass("pb85")}a.setStorage(p,JSON.stringify(c));a.setStorage(q,JSON.stringify(h));var f={savedate:e,tag:c.data.sales,timeout:e};f.value=b.Data;a.setStorage(s,JSON.stringify(f));a.replaceContent(h)}})}else{var F=a.getStorage(q);a.replaceContent(F)}})(window,$,ctripmobi.utils);(function(d,b,c){var u="#ydwxcsF",t="wap",l=null,m="/webapp/myctrip/#account/login?from=/webapp/myctrip/",s="ctrip-confirm cui-alert-button-small",k="&portaltype=x",j="http://120.197.232.22:80/sso-core/singlesignon?backurl=",i="http://",r="ctrip-cancel",g="/webapp/myctrip/",B=".jsmodule",q="USERINFO",f=true,h="YDWXCS",e=c.getStorage("SALES");if(e&&e.data&&(e.data.sales||e.data.sourceid))if(e.data.sales&&e.data.sales.toLowerCase()=="ydwxcs"||e.data.sourceid&&e.data.sourceid=="1622"){b(".exit_a").on("click",function(){c.removeStorage(h,f);c.removeStorage(q,f)});b(B).hide();b(".jsH").addClass("jsH_ydwxcs");b(".jsM").hide();var C={index:function(){b(B).hide();b("#unloginTip").hide();b(".login").hide();b("#righthead").hide();b("footer nav").hide();b("footer p").css("border-top","0px");b("li[data-type='/webapp/myctrip/']").click(function(b){var a=c.getStorage(h);if(a&&a.data&&a.data.IsLogin)d.location.href=g;else{var e=[{value:"会员登录","class":r,event:{click:function(){this.Close();var a=i+d.location.host+g;d.location.href=j+a+k}}},{value:"非会员订单查询","class":s,event:{click:function(){this.Close();d.location.href=m}}}],f=new Oui.Alert({Buttons:e,Title:"提示信息",Content:"请选择查询方式"});f.Open();b.preventDefault();b.stopPropagation()}})},index_custom:function(){var a=c.getStorage(h);if(a&&a.data&&a.data.IsLogin)d.location.href=g;else{var b=[{value:"会员登录","class":r,event:{click:function(){this.Close();var a=i+d.location.host+g;d.location.href=j+a+k}}},{value:"非会员订单查询","class":s,event:{click:function(){this.Close();d.location.href=m}}}],e=new Oui.Alert({Buttons:b,Title:"提示信息",Content:"请选择查询方式"});e.Open()}},orderInfo:function(){b(".novip").hide()},orderResult:function(){b("#reg").hide();b("#regbox").hide()},customIndex:function(){b("#logout").hide();b(".modifypass").hide()},orderQuery:function(){b("#li_notlogin").click();b(".query").undelegate("#li_login","click");b("#RegPassLink").hide();b(".reggift").hide()}};d.wxcity=C;var o=c.getUrlParam("usessionid"),n=c.getUrlParam("ticket",f),x=c.getUrlParam("sticket"),a=c.getStorage(h);a=a?a:{};var y=1,A=1,z=0,w=c.getUrlParam("AreaCode",f),v=c.getUrlParam("portaltype",f),p=l;if(v!=l){if(v==0||v==1)p=t;else if(v==2)p="app"}else if(a&&a.data&&a.data)if(a.data.IsHead)p=t;else p="app";if(a&&a.data){if(a.data.Foot){y=0;p==t&&b(u).html(a.data.Foot)}if(w==l||w.length==0)w=a.data.AreaCode;z=a.data.IsLogin;if(!a.data.IsFoot)y=0;if(!a.data.IsHead)A=0;if(!o)o=a.usessionid;if(!n)n=a.ticket;if(!x)x=a.sticket;c.setStorage(h,JSON.stringify(a))}switch(v){case"0":case"1":y=1;A=1;break;case"2":y=0;A=0}var D={SourceId:e.data.sourceid,Sales:e.data.sales,AreaCode:w,UseSsionid:o,Ticket:n,IsFoot:y,IsHead:A,IsLogin:z,STicket:x};n!=l&&w!=l&&z<=0&&c.removeStorage(q,f);b.ajax({url:c.website+"/Other/GetWCityData",data:D,type:"post",dataType:"json",success:function(g){if(g&&g.Data){e.timeout=g.Data.ExpiredTime;e.timeby=f;c.setStorage("SALES",JSON.stringify(e));var m=l;if(a&&a.data&&a.data.Foot)m=a.data.Foot;a={timeout:g.ExpiredTime,data:g.Data,timeby:1};if(g.Data.Head){b("#ydwxcsH").html(g.Data.Head);a.data.CityName=b("a.cityon").html()}if(o&&n){a.usessionid=o;a.ticket=n}if(x)a.sticket=x;if(g.User){var s={timeout:g.User.ExpiredTime,data:g.User};a.data.IsLogin=1;c.setStorage(q,JSON.stringify(s))}g.Data.Foot&&p==t&&b(u).html(g.Data.Foot);if(!a.data.Foot){a.data.Foot=m;b(u).html(m)}c.setStorage(h,JSON.stringify(a));if(o&&n&&!g.User&&z<=0){var r=i+d.location.host+"/html5/";d.location.href=j+r+k}}},error:function(){}})}!void function(b){/opera/i.test(b)&&ctripmobi.utils.JumpUrl("/wap/",l,f);if(d.screen.height>=568){var a=document.querySelector("meta[name=viewport]");if(a)a.content="width=320.1,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"}}(d.navigator.userAgent)})(window,$,ctripmobi.utils);