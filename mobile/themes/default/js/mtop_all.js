!function(a){a.encode||(a.encode={}),a.encode.md5=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=8*(i%4),g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=8*(i%4),g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=255&a>>>8*c,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d))}return b}var o,p,q,r,s,t,u,v,w,x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);var O=m(t)+m(u)+m(v)+m(w);return O.toLowerCase()}}(window.lib||(window.lib={})),function(a){function b(a){var b=document.cookie.indexOf(";",a);return-1===b&&(b=document.cookie.length),window.unescape(decodeURIComponent(document.cookie.substring(a,b)))}a.storage||(a.storage={}),a.storage.cookie={isCookieEnable:function(){if(!window.navigator.cookieEnabled)return!1;var a="_s_cookie_",b=this.getCookie(a);return this.setCookie(a,"1"),"1"===b?(this.delCookie(a),!0):!1},getCookie:function(a){for(var c,d=a+"=",e=d.length,f=document.cookie.length,g=0;f>g;){if(c=g+e,document.cookie.substring(g,c)===d)return b(c);if(g=document.cookie.indexOf(" ",g)+1,0===g)break}return null},setCookie:function(a,b){var c=window.location.host,d=c.indexOf("."),e=c.substring(0,d),f=arguments.length>2?arguments[2]:null,g=new Date;"waptest"!==e&&"wapa"!==e&&"m"!==e&&(c.indexOf("taobao")>-1||c.indexOf("tmall")>-1)&&(c=c.substr(d+1)),null==f?document.cookie=a+"="+window.escape(b)+";path=/;domain="+c:(g.setTime(g.getTime()+1e3*f),document.cookie=a+"="+window.escape(b)+";path=/;domain="+c+";expires="+g.toGMTString())},delCookie:function(a){var b=new Date,c=this.getCookie(a);b.setTime(b.getTime()-1),document.cookie=a+"="+c+"; expires="+b.toGMTString()}}}(window.lib||(window.lib={})),function(a){var b={sysType:"m",defaultAppKey:"12574478"};"localhost"===window.location.host||window.location.host.match(".*\\waptest\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")?(b.sysType="waptest",b.defaultAppKey="4272"):window.location.host.match(".*\\wapa\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")?b.sysType="wapa":window.location.host.match(".*\\m\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")&&(b.sysType="m"),a.config=b}(window.lib||(window.lib={})),function(a){var b={},c=a.config,d={protocol:"http://",sysType:c.sysType,defaultDomain:"taobao.com"},e=function(a){try{return decodeURIComponent(a)}catch(b){return a}},f=b.getParam=function(a){var b,c=this.queryMap||function(a){if(a.length<1)return"";a=a.substr(1);var b,c,d=a.split("&"),f={};for(c in d)b=d[c].split("="),f[e(b[0])]=e(b[1]);return f}(location.search);return this.queryMap=c,a?(b=c[a],b&&b.indexOf("#")>-1&&(b=encodeURIComponent(b)),b):c},g=function(a){var b,c,d,e="";for(b in a)c=a[b],d=f(c),d&&""!==d&&(e+="&"+c+"="+d);return e}(["ttid","sprefer"]);b.getUrl=function(a){function b(a,b){if(!b)return a;a.indexOf("?")<0&&(a+="?");var c=a.charAt(a.length-1),d=b.charAt(0);return"?"===c||"&"===c?"?"===d||"&"===d?a+b.substr(1):a+b:"?"===d||"&"===d?a+b:a+"&"+b}var c=a.url||function(b){var c=a.host||a.subdomain+"."+b.sysType+"."+b.defaultDomain;return b.protocol+c+"/"+a.path}(d);return c.indexOf("?")>0||(c+="?"),c=b(c,g),a.data&&(c=b(c,function(a){var b,c,d="";if(null==a)return d;for(b in a)c=a[b],null!=c&&""!==c&&(d+=b+"="+encodeURIComponent("object"==typeof c?JSON.stringify(c):c)+"&");return""!==d&&d.length-1===d.lastIndexOf("&")&&(d=d.substr(0,d.length-1)),d}(a.data))),c},a.uri=b}(window.lib||(window.lib={})),function(a){a.hybrid||(a.hybrid={}),a.hybrid.detect={isClient:function(){return location.search&&location.search.match(/ttid=[^&]+@[^&]+/)},isAndroidClient:function(){if(!location.search)return!1;var a=location.search.match(/ttid=[^&]+@[^&]+/);if(a&&a.length){var b=a[0];return b&&b.toLowerCase().indexOf("android")>-1}return!1},isIos:function(){var a=navigator.userAgent;return a&&a.toLowerCase().indexOf("iphone")>-1},getBrowserInfo:function(a){var b={os:"iphone",version:6,browser:"safari",keyboardHeight:250,ios6:function(){return"iphone"===this.os&&this.version>=6},lowLevel:function(){return!1}},c=a.toUpperCase(),d=c.indexOf("IPHONE")>=0||c.indexOf("IPOD")>=0||c.indexOf("IPAD")>=0;c.indexOf("IPAD")>=0&&(b.keyboardHeight=450),d||(b.os="android");var e=a.match(/UC\sAppleWebKit\/([\d.]+)/),f=a.match(/(UCWEB)(\d.+?(?=\/))/);if(e||f?b.browser="uc":a.match(/MQQBrowser/)?b.browser="qq":a.match(/(Chrome)|(CriOS)/)&&(b.browser="chrome"),"iphone"===b.os)b.version=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||6;else if("android"===b.os){var g=a.indexOf("Android "),h=a.substr(g+8,6),i=h.split(/_|\./);b.version=parseFloat(i.join("."))}return d||(b.keyboardHeight=.8*window.innerWidth),b}}}(window.lib||(window.lib={})),function(a){function b(a){var b=document.getElementById("loc-simulate-dom");null==b?(b=document.createElement("a"),b.id="loc-simulate-dom",b.href=a,b.value="",document.body.appendChild(b)):b.href=a,c(b,"click"),b.click()}function c(a,b){try{var c=document.createEvent("Event");c.initEvent(b,!0,!0),a.dispatchEvent(c)}catch(d){console.log("error")}}var d=a.hybrid.detect;a.hybrid.h5jump={simulateJump:function(a){b(a)},setLocationHref:function(a){if(d.isAndroidClient()){var c=d.getBrowserInfo(navigator.userAgent);if("android"===c.os&&(""+c.version).indexOf("2.3")>-1)return b(a),void 0}location.href=a}}}(window.lib||(window.lib={})),function(a,b){function c(a){if(b("#J_h5_login").length<1){var c=document.createElement("script");c.type="text/javascript",c.id="J_h5_login",c.src="http://a.tbcdn.cn/mw/plugins/login/h5_login.min.js",b("body").append(c),c.onload=function(){window.H5_M.Login.showLogin(a)}}else window.H5_M.Login.showLogin(a)}function d(a){var b=g({subdomain:"login",path:"login/login.htm",data:{tpl_redirect_url:a||location.href}});f.setLocationHref(b)}function e(){return location.search&&location.search.match(/ttid=[^&]+@[^&]+/)}var f=a.hybrid.h5jump,g=a.uri.getUrl,h=a.storage.cookie;a.login={getNickFromCookie:function(){var a=h.getCookie("_w_tb_nick");return a&&a.length>0&&"null"!=a?a:""},isLogin:function(){var a=h.getCookie("imewweoriw");return a&&a.length>32},goLogin:function(a){a=a||{},!e()&&a.hideType?c(a):d(a.rediUrl)}}}(window.lib,window.$),function(a){var b=a.config,c=a.storage.cookie,d=a.encode.md5,e=a.uri.getUrl,f="J_app_key",g={tokenKey:"_m_h5_tk",that:this,appKey:function(){var a=document.getElementById(f);return a?a.value:b.defaultAppKey}(),_getToken:function(){return(c.getCookie(this.tokenKey)||"").split("_")[0]},_hostReg:/(m|waptest|wapa)\.(taobao|etao|tmall)\.(com)/,genApiUrl:function(a,b,c){var d="rest/"+b,f=this._hostReg.exec(location.hostname),g={path:d,data:a};f?(f[0]="etao"===f[2]?"apie":"api",g.host=f.join(".")):g.subdomain="api";var h=e(g);return h+"&appKey="+this.appKey+"&t="+c},sign:function(a,b){var c=this._getToken()+"&"+b+"&"+this.appKey+"&"+a;return d(c)}};a.mtop={base:g}}(window.lib),function(a){a.EXECUTOR={isRunning:!1,executorQue:[],resume:function(){var a=this.executorQue[0];this.executorQue=this.executorQue.slice(1),a?a.run():this.isRunning=!1},_executors:[],_getExecutor:function(a){for(var b,c=this._executors.length,d=c;d>0&&(b=this._executors[d-1],!b.canRun(a));d--);var e=new b(a);return e},register:function(b,c){var d=function(a){this.init(a)};d.canRun=b,c.handleResponse=function(b){a.wrapHandler.call(this,b),a.EXECUTOR.resume()},d.prototype=c,this._executors.push(d)},execute:function(a){var b=this._getExecutor(a);this.executorQue.push(b),this.isRunning||(this.isRunning=!0,this.resume())}}}(window.lib.mtop),function(a){var b=a.storage.cookie,c=0,d=5;a.mtop.wrapHandler=function(e){var f=(e.ret?e.ret:"").toString();0===f.indexOf("SUCCESS::")?(c=0,this.callback&&this.callback(e)):-1!==f.indexOf("TOKEN_EMPTY::")||-1!==f.indexOf("TOKEN_EXOIRED::")?++c<d?(console.log("TODO RETRY"),this.retryed=!0,a.mtop.ajax(this.options,this.callback,this.errorback)):(b.delCookie(a.mtop.base.tokenKey),console.log("try exceed times")):this.errorback&&this.errorback(e)}}(window.lib),function(a){a.ajax=function(){this.EXECUTOR.execute(arguments)}}(window.lib.mtop),function(a){var b=a.base,c="h5ApiUpdate.do";a.EXECUTOR.register(function(a){return!a[0].length&&a[0].api&&!a[0].cros},{init:function(a){this.options=a[0],this.t=(new Date).getTime(),this.callback=a[1],this.errorback=a[2]},run:function(){var a=this,b=this._genSignUrl(),c={type:"GET",url:b,timeout:2e4,dataType:"jsonp",success:function(b){a.handleResponse&&a.handleResponse(b)},error:function(b){a.handleResponse&&a.handleResponse(b)}};window.$.ajax(c)},_genSignUrl:function(){var a=b.genApiUrl(this.options,c,this.t);return this._addJsonParam(a)+"&sign="+b.sign(JSON.stringify(this.options.data),this.t)},_addJsonParam:function(a){if(-1===a.indexOf("callback=")){var b=a.indexOf("?");return a.substr(0,b)+"?callback=?&type=jsonp&"+a.substr(b+1,a.length)}return a}}),a.request=function(a,b,c){var d=a.data;a.v=a.v||"*",a.data="string"==typeof d?JSON.parse(d):d,this.ajax(a,b,c)},a.getApi=function(a,b,c,d,e,f){d||(d={}),d.api=a,d.v=b,d.data=c,this.request(d,e,f)}}(window.lib.mtop),function(a,b){var c="bigPipe.do",d=b.mtop,e=a&&a.ajaxSettings&&a.ajaxSettings.xhr?a.ajaxSettings.xhr:function(){return new XMLHttpRequest},f=d.base,g=0;d.cros="withCredentials"in e(),d.jsonpTimeout=3e3,d.EXECUTOR.register(function(a){return 1<a[0].length},{init:function(a){this.t=(new Date).getTime(),this.options=a[0],this.callback=a[1],this.errorback=a[2],this.retryed=!1,this.processedIndex=0,this.locked=!1},run:function(){this.ajax(this._genSignUrl(),this)},_genSignUrl:function(){for(var a=[],b=0,d=this.options.length;d>b;b++){var e=this.options[b],g={};for(var h in e)e.hasOwnProperty(h)&&(g[h]=e[h]);g.data=JSON.stringify(e.data),g.sign=f.sign(g.data,this.t),a.push(g)}return f.genApiUrl({apis:a},c,this.t)},ajax:function(a,b){var c=e(),f=this,h=setTimeout(function(){console.log("clear time out"),c.abort(),++g>3&&(d.cros=!1),b.options.forEach(function(a){d.request(a,b.callback,b.errorback)}),d.EXECUTOR.resume()},d.jsonpTimeout),i=function(){g=0,console.log("timeout,timout is"+h),h&&(clearTimeout(h),h=null)};c.withCredentials=!0,c.open("GET",a,!0),c.onreadystatechange=function(){if(4===c.readyState)for(;c.responseText.length>f.processedIndex;)i(),f.chunkProcess(c);else 3===c.readyState&&(i(),f.chunkProcess(c))},c.send(),console.log("xhr sended")},chunkProcess:function(a){if(this.locked)return!0;var b=a.responseText,c=b.substr(this.processedIndex),d=c.search(/\d+/);if(0>d)return!0;var e=c.match(/\d+/)[0],f=e.length+parseInt(e,10)+d;if(c.length>=f){this.locked=!0;var g=c.substr(e.length+d,parseInt(e,10));try{var h=JSON.parse(g);this.handleResponse&&!this.retryed&&this.handleResponse(h)}catch(i){a.abort()}this.processedIndex+=f,this.locked=!1}}}),d.addApi=function(a,b,c){if(!d.cros)return d.request(a,b,c),d.execute=function(){},d;var e={},f={};return e[a.api]=b,f[a.api]=c,{apis:[a],succ:e,error:f,addApi:function(a,b,c){return this.apis.push(a),this.succ[a.api]=b,this.error[a.api]=c,this},execute:function(){var a=this;return d.ajax(this.apis,function(b){a.succ[b.api](b)},function(b){a.error[b.api](b)})}}}}(window.$,window.lib),function(a,b){a.loginedRequest=function(c,d){function e(){c.retryed?g.call(null,{errcode:"NOT_LOGINED",message:"该页面需要登录，请刷新重试!"}):(h&&h.call(),b.goLogin({hideType:{succ:function(){a.loginedRequest(c,d)},fail:function(){c.retryed=!0,a.loginedRequest(c,d)}}}))}var f=d.succ,g=d.fail,h=d.beforeLogin;return b.isLogin()?(a.request(c,function(a){f&&f.call(null,a)},function(a){var b={message:"系统错误",result:a};if(a&&a.ret&&a.ret.length){var c=a.ret[0].split("::");if(2===c.length){if(0<=c[0].indexOf("SESSION_EXPIRED")||0<=c[0].indexOf("NEED_LOGIN"))return e(),void 0;b.errcode=c[0],b.message=c[1]}}g&&g.call(null,b)}),void 0):(e(),void 0)}}(window.lib.mtop,window.lib.login);